{"version":3,"file":null,"sources":["src/base.js","src/decorators.js","src/tables/cmap.js","src/tables/head.js","src/tables/hhea.js","src/tables/hmtx.js","src/tables/maxp.js","src/tables/name.js","src/tables/OS2.js","src/tables/post.js","src/tables/cvt.js","src/tables/fpgm.js","src/tables/loca.js","src/tables/prep.js","src/tables/glyf.js","src/cff/CFFIndex.js","src/cff/CFFOperand.js","src/cff/CFFDict.js","src/cff/CFFPointer.js","src/cff/CFFPrivateDict.js","src/cff/CFFStandardStrings.js","src/cff/CFFEncodings.js","src/cff/CFFCharsets.js","src/cff/CFFTop.js","src/cff/CFFFont.js","src/tables/VORG.js","src/tables/EBDT.js","src/tables/EBLC.js","src/tables/sbix.js","src/tables/COLR.js","src/tables/CPAL.js","src/tables/opentype.js","src/tables/BASE.js","src/tables/GDEF.js","src/tables/GPOS.js","src/tables/GSUB.js","src/tables/JSTF.js","src/tables/DSIG.js","src/tables/gasp.js","src/tables/hdmx.js","src/tables/kern.js","src/tables/LTSH.js","src/tables/PCLT.js","src/tables/VDMX.js","src/tables/vhea.js","src/tables/vmtx.js","src/tables/avar.js","src/tables/aat.js","src/tables/bsln.js","src/tables/feat.js","src/tables/fvar.js","src/tables/gvar.js","src/tables/just.js","src/tables/morx.js","src/tables/opbd.js","src/tables/index.js","src/tables/directory.js","src/CmapProcessor.js","src/layout/KernProcessor.js","src/layout/UnicodeLayoutEngine.js","src/glyph/BBox.js","src/layout/GlyphRun.js","src/layout/GlyphPosition.js","src/layout/Script.js","src/aat/AATFeatureMap.js","src/aat/AATLookupTable.js","src/aat/AATStateMachine.js","src/aat/AATMorxProcessor.js","src/aat/AATLayoutEngine.js","src/opentype/ShapingPlan.js","src/opentype/shapers/DefaultShaper.js","src/opentype/shapers/ArabicShaper.js","src/opentype/GlyphInfo.js","src/opentype/shapers/HangulShaper.js","src/opentype/shapers/index.js","src/opentype/GlyphIterator.js","src/opentype/OTProcessor.js","src/opentype/GSUBProcessor.js","src/opentype/GPOSProcessor.js","src/opentype/OTLayoutEngine.js","src/layout/LayoutEngine.js","src/glyph/Path.js","src/glyph/StandardNames.js","src/glyph/Glyph.js","src/glyph/TTFGlyph.js","src/glyph/CFFGlyph.js","src/glyph/SBIXGlyph.js","src/glyph/COLRGlyph.js","src/glyph/GlyphVariationProcessor.js","src/subset/Subset.js","src/subset/TTFSubset.js","src/subset/CFFSubset.js","src/TTFFont.js","src/tables/WOFFDirectory.js","src/WOFFFont.js","src/glyph/WOFF2Glyph.js","src/tables/WOFF2Directory.js","src/WOFF2Font.js","src/TrueTypeCollection.js","src/DFont.js","src/index.js"],"sourcesContent":["import r from 'restructure';\nconst fs = require('fs');\n\nvar fontkit = {};\nexport default fontkit;\n\nfontkit.logErrors = false;\n\nlet formats = [];\nfontkit.registerFormat = function(format) {\n  formats.push(format);\n};\n\nfontkit.openSync = function(filename, postscriptName) {\n  let buffer = fs.readFileSync(filename);\n  return fontkit.create(buffer, postscriptName);\n};\n\nfontkit.open = function(filename, postscriptName, callback) {\n  if (typeof postscriptName === 'function') {\n    callback = postscriptName;\n    postscriptName = null;\n  }\n\n  fs.readFile(filename, function(err, buffer) {\n    if (err) { return callback(err); }\n\n    try {\n      var font = fontkit.create(buffer, postscriptName);\n    } catch (e) {\n      return callback(e);\n    }\n\n    return callback(null, font);\n  });\n\n  return;\n};\n\nfontkit.create = function(buffer, postscriptName) {\n  for (let i = 0; i < formats.length; i++) {\n    let format = formats[i];\n    if (format.probe(buffer)) {\n      let font = new format(new r.DecodeStream(buffer));\n      if (postscriptName) {\n        return font.getFont(postscriptName);\n      }\n\n      return font;\n    }\n  }\n\n  throw new Error('Unknown font format');\n};\n","/**\n * This decorator caches the results of a getter such that\n * the results are lazily computed once, and then cached.\n * @private\n */\nexport function cache(target, key, descriptor) {\n  var get = descriptor.get;\n  descriptor.get = function() {\n    let value = get.call(this);\n    Object.defineProperty(this, key, { value });\n    return value;\n  };\n}\n","import r from 'restructure';\n\nlet SubHeader = new r.Struct({\n  firstCode:      r.uint16,\n  entryCount:     r.uint16,\n  idDelta:        r.int16,\n  idRangeOffset:  r.uint16\n});\n\nlet CmapGroup = new r.Struct({\n  startCharCode:  r.uint32,\n  endCharCode:    r.uint32,\n  glyphID:        r.uint32\n});\n\nlet UnicodeValueRange = new r.Struct({\n  startUnicodeValue:  r.uint24,\n  additionalCount:    r.uint8\n});\n\nlet UVSMapping = new r.Struct({\n  unicodeValue: r.uint24,\n  glyphID:      r.uint16\n});\n\nlet DefaultUVS = new r.Array(UnicodeValueRange, r.uint32);\nlet NonDefaultUVS = new r.Array(UVSMapping, r.uint32);\n\nlet VarSelectorRecord = new r.Struct({\n  varSelector:    r.uint24,\n  defaultUVS:     new r.Pointer(r.uint32, DefaultUVS, {type: 'parent'}),\n  nonDefaultUVS:  new r.Pointer(r.uint32, NonDefaultUVS, {type: 'parent'})\n});\n\nlet CmapSubtable = new r.VersionedStruct(r.uint16, {\n  0: { // Byte encoding\n    length:     r.uint16,   // Total table length in bytes (set to 262 for format 0)\n    language:   r.uint16,   // Language code for this encoding subtable, or zero if language-independent\n    codeMap:    new r.LazyArray(r.uint8, 256)\n  },\n\n  2: { // High-byte mapping (CJK)\n    length:           r.uint16,\n    language:         r.uint16,\n    subHeaderKeys:    new r.Array(r.uint16, 256),\n    subHeaderCount:   t => Math.max.apply(Math, t.subHeaderKeys),\n    subHeaders:       new r.LazyArray(SubHeader, 'subHeaderCount'),\n    glyphIndexArray:  new r.LazyArray(r.uint16, 'subHeaderCount')\n  },\n\n  4: { // Segment mapping to delta values\n    length:           r.uint16,              // Total table length in bytes\n    language:         r.uint16,              // Language code\n    segCountX2:       r.uint16,\n    segCount:         t => t.segCountX2 >> 1,\n    searchRange:      r.uint16,\n    entrySelector:    r.uint16,\n    rangeShift:       r.uint16,\n    endCode:          new r.LazyArray(r.uint16, 'segCount'),\n    reservedPad:      new r.Reserved(r.uint16),       // This value should be zero\n    startCode:        new r.LazyArray(r.uint16, 'segCount'),\n    idDelta:          new r.LazyArray(r.int16, 'segCount'),\n    idRangeOffset:    new r.LazyArray(r.uint16, 'segCount'),\n    glyphIndexArray:  new r.LazyArray(r.uint16, t => (t.length - t._currentOffset) / 2)\n  },\n\n  6: { // Trimmed table\n    length:         r.uint16,\n    language:       r.uint16,\n    firstCode:      r.uint16,\n    entryCount:     r.uint16,\n    glyphIndices:   new r.LazyArray(r.uint16, 'entryCount')\n  },\n\n  8: { // mixed 16-bit and 32-bit coverage\n    reserved: new r.Reserved(r.uint16),\n    length:   r.uint32,\n    language: r.uint16,\n    is32:     new r.LazyArray(r.uint8, 8192),\n    nGroups:  r.uint32,\n    groups:   new r.LazyArray(CmapGroup, 'nGroups')\n  },\n\n  10: { // Trimmed Array\n    reserved:       new r.Reserved(r.uint16),\n    length:         r.uint32,\n    language:       r.uint32,\n    firstCode:      r.uint32,\n    entryCount:     r.uint32,\n    glyphIndices:   new r.LazyArray(r.uint16, 'numChars')\n  },\n\n  12: { // Segmented coverage\n    reserved: new r.Reserved(r.uint16),\n    length:   r.uint32,\n    language: r.uint32,\n    nGroups:  r.uint32,\n    groups:   new r.LazyArray(CmapGroup, 'nGroups')\n  },\n\n  13: { // Many-to-one range mappings (same as 12 except for group.startGlyphID)\n    reserved: new r.Reserved(r.uint16),\n    length:   r.uint32,\n    language: r.uint32,\n    nGroups:  r.uint32,\n    groups:   new r.LazyArray(CmapGroup, 'nGroups')\n  },\n\n  14: { // Unicode Variation Sequences\n    length:       r.uint32,\n    numRecords:   r.uint32,\n    varSelectors: new r.LazyArray(VarSelectorRecord, 'numRecords')\n  }\n});\n\nlet CmapEntry = new r.Struct({\n  platformID:  r.uint16,  // Platform identifier\n  encodingID:  r.uint16,  // Platform-specific encoding identifier\n  table:       new r.Pointer(r.uint32, CmapSubtable, {type: 'parent', lazy: true})\n});\n\n// character to glyph mapping\nexport default new r.Struct({\n  version:      r.uint16,\n  numSubtables: r.uint16,\n  tables:       new r.Array(CmapEntry, 'numSubtables')\n});\n","import r from 'restructure';\n\n// font header\nexport default new r.Struct({\n  version:            r.int32,                   // 0x00010000 (version 1.0)\n  revision:           r.int32,                   // set by font manufacturer\n  checkSumAdjustment: r.uint32,\n  magicNumber:        r.uint32,                  // set to 0x5F0F3CF5\n  flags:              r.uint16,\n  unitsPerEm:         r.uint16,                  // range from 64 to 16384\n  created:            new r.Array(r.int32, 2),\n  modified:           new r.Array(r.int32, 2),\n  xMin:               r.int16,                   // for all glyph bounding boxes\n  yMin:               r.int16,                   // for all glyph bounding boxes\n  xMax:               r.int16,                   // for all glyph bounding boxes\n  yMax:               r.int16,                   // for all glyph bounding boxes\n  macStyle:           new r.Bitfield(r.uint16, [\n    'bold', 'italic', 'underline', 'outline',\n    'shadow', 'condensed', 'extended'\n  ]),\n  lowestRecPPEM:      r.uint16,                  // smallest readable size in pixels\n  fontDirectionHint:  r.int16,\n  indexToLocFormat:   r.int16,                   // 0 for short offsets, 1 for long\n  glyphDataFormat:    r.int16                    // 0 for current format\n});\n","import r from 'restructure';\n\n// horizontal header\nexport default new r.Struct({\n  version:              r.int32,\n  ascent:               r.int16,   // Distance from baseline of highest ascender\n  descent:              r.int16,   // Distance from baseline of lowest descender\n  lineGap:              r.int16,   // Typographic line gap\n  advanceWidthMax:      r.uint16,  // Maximum advance width value in 'hmtx' table\n  minLeftSideBearing:   r.int16,   // Maximum advance width value in 'hmtx' table\n  minRightSideBearing:  r.int16,   // Minimum right sidebearing value\n  xMaxExtent:           r.int16,\n  caretSlopeRise:       r.int16,   // Used to calculate the slope of the cursor (rise/run); 1 for vertical\n  caretSlopeRun:        r.int16,   // 0 for vertical\n  caretOffset:          r.int16,   // Set to 0 for non-slanted fonts\n  reserved:             new r.Reserved(r.int16, 4),\n  metricDataFormat:     r.int16,   // 0 for current format\n  numberOfMetrics:      r.uint16   // Number of advance widths in 'hmtx' table\n});\n","import r from 'restructure';\n\nlet HmtxEntry = new r.Struct({\n  advance: r.uint16,\n  bearing: r.int16\n});\n\nexport default new r.Struct({\n  metrics:    new r.LazyArray(HmtxEntry, t => t.parent.hhea.numberOfMetrics),\n  bearings:   new r.LazyArray(r.int16, t => t.parent.maxp.numGlyphs - t.parent.hhea.numberOfMetrics)\n});\n","import r from 'restructure';\n\n// maxiumum profile\nexport default new r.Struct({\n  version:                r.int32,\n  numGlyphs:              r.uint16,  // The number of glyphs in the font\n  maxPoints:              r.uint16,  // Maximum points in a non-composite glyph\n  maxContours:            r.uint16,  // Maximum contours in a non-composite glyph\n  maxComponentPoints:     r.uint16,  // Maximum points in a composite glyph\n  maxComponentContours:   r.uint16,  // Maximum contours in a composite glyph\n  maxZones:               r.uint16,  // 1 if instructions do not use the twilight zone, 2 otherwise\n  maxTwilightPoints:      r.uint16,  // Maximum points used in Z0\n  maxStorage:             r.uint16,  // Number of Storage Area locations\n  maxFunctionDefs:        r.uint16,  // Number of FDEFs\n  maxInstructionDefs:     r.uint16,  // Number of IDEFs\n  maxStackElements:       r.uint16,  // Maximum stack depth\n  maxSizeOfInstructions:  r.uint16,  // Maximum byte count for glyph instructions\n  maxComponentElements:   r.uint16,  // Maximum number of components referenced at “top level” for any composite glyph\n  maxComponentDepth:      r.uint16   // Maximum levels of recursion; 1 for simple components\n});\n","import r from 'restructure';\n\nlet NameRecord = new r.Struct({\n  platformID: r.uint16,\n  encodingID: r.uint16,\n  languageID: r.uint16,\n  nameID:     r.uint16,\n  length:     r.uint16,\n  string:     new r.Pointer(r.uint16,\n    new r.String('length', t => ENCODINGS[t.platformID][t.encodingID]),\n    { type: 'parent', relativeTo: 'parent.stringOffset', allowNull: false }\n  )\n});\n\nlet LangTagRecord = new r.Struct({\n  length:  r.uint16,\n  tag:     new r.Pointer(r.uint16, new r.String('length', 'utf16be'), {type: 'parent', relativeTo: 'stringOffset'})\n});\n\nvar NameTable = new r.VersionedStruct(r.uint16, {\n  0: {\n    count:          r.uint16,\n    stringOffset:   r.uint16,\n    records:        new r.Array(NameRecord, 'count')\n  },\n  1: {\n    count:          r.uint16,\n    stringOffset:   r.uint16,\n    records:        new r.Array(NameRecord, 'count'),\n    langTagCount:   r.uint16,\n    langTags:       new r.Array(LangTagRecord, 'langTagCount')\n  }\n});\n\nexport default NameTable;\n\nlet NAMES = [\n  'copyright',\n  'fontFamily',\n  'fontSubfamily',\n  'uniqueSubfamily',\n  'fullName',\n  'version',\n  'postscriptName', // Note: A font may have only one PostScript name and that name must be ASCII.\n  'trademark',\n  'manufacturer',\n  'designer',\n  'description',\n  'vendorURL',\n  'designerURL',\n  'license',\n  'licenseURL',\n  null, // reserved\n  'preferredFamily',\n  'preferredSubfamily',\n  'compatibleFull',\n  'sampleText',\n  'postscriptCIDFontName',\n  'wwsFamilyName',\n  'wwsSubfamilyName'\n];\n\nlet ENCODINGS = [\n  // unicode\n  ['utf16be', 'utf16be', 'utf16be', 'utf16be', 'utf16be', 'utf16be'],\n\n  // macintosh\n  // Mappings available at http://unicode.org/Public/MAPPINGS/VENDORS/APPLE/\n  // 0\t  Roman                 17\tMalayalam\n  // 1\t  Japanese\t            18\tSinhalese\n  // 2\t  Traditional Chinese\t  19\tBurmese\n  // 3\t  Korean\t              20\tKhmer\n  // 4\t  Arabic\t              21\tThai\n  // 5\t  Hebrew\t              22\tLaotian\n  // 6\t  Greek\t                23\tGeorgian\n  // 7\t  Russian\t              24\tArmenian\n  // 8\t  RSymbol\t              25\tSimplified Chinese\n  // 9\t  Devanagari\t          26\tTibetan\n  // 10\tGurmukhi\t            27\tMongolian\n  // 11\tGujarati\t            28\tGeez\n  // 12\tOriya\t                29\tSlavic\n  // 13\tBengali\t              30\tVietnamese\n  // 14\tTamil\t                31\tSindhi\n  // 15\tTelugu\t              32\t(Uninterpreted)\n  // 16\tKannada\n  ['macroman', 'shift-jis', 'big5', 'euc-kr', 'iso-8859-6', 'iso-8859-8',\n   'macgreek', 'maccyrillic', 'symbol', 'Devanagari', 'Gurmukhi', 'Gujarati',\n   'Oriya', 'Bengali', 'Tamil', 'Telugu', 'Kannada', 'Malayalam', 'Sinhalese',\n   'Burmese', 'Khmer', 'macthai', 'Laotian', 'Georgian', 'Armenian', 'gb-2312-80',\n   'Tibetan', 'Mongolian', 'Geez', 'maccyrillic', 'Vietnamese', 'Sindhi'],\n\n  // ISO (deprecated)\n  ['ascii'],\n\n  // windows\n  // Docs here: http://msdn.microsoft.com/en-us/library/system.text.encoding(v=vs.110).aspx\n  ['symbol', 'utf16be', 'shift-jis', 'gb18030', 'big5', 'wansung', 'johab', null, null, null, 'ucs-4']\n];\n\nlet LANGUAGES = [\n  // unicode\n  [],\n\n  { // macintosh\n     0: \"English\",                          59: \"Pashto\",\n     1: \"French\",                           60: \"Kurdish\",\n     2: \"German\",                           61: \"Kashmiri\",\n     3: \"Italian\",                          62: \"Sindhi\",\n     4: \"Dutch\",                            63: \"Tibetan\",\n     5: \"Swedish\",                          64: \"Nepali\",\n     6: \"Spanish\",                          65: \"Sanskrit\",\n     7: \"Danish\",                           66: \"Marathi\",\n     8: \"Portuguese\",                       67: \"Bengali\",\n     9: \"Norwegian\",                        68: \"Assamese\",\n    10: \"Hebrew\",                           69: \"Gujarati\",\n    11: \"Japanese\",                         70: \"Punjabi\",\n    12: \"Arabic\",                           71: \"Oriya\",\n    13: \"Finnish\",                          72: \"Malayalam\",\n    14: \"Greek\",                            73: \"Kannada\",\n    15: \"Icelandic\",                        74: \"Tamil\",\n    16: \"Maltese\",                          75: \"Telugu\",\n    17: \"Turkish\",                          76: \"Sinhalese\",\n    18: \"Croatian\",                         77: \"Burmese\",\n    19: \"Chinese (Traditional)\",            78: \"Khmer\",\n    20: \"Urdu\",                             79: \"Lao\",\n    21: \"Hindi\",                            80: \"Vietnamese\",\n    22: \"Thai\",                             81: \"Indonesian\",\n    23: \"Korean\",                           82: \"Tagalong\",\n    24: \"Lithuanian\",                       83: \"Malay (Roman script)\",\n    25: \"Polish\",                           84: \"Malay (Arabic script)\",\n    26: \"Hungarian\",                        85: \"Amharic\",\n    27: \"Estonian\",                         86: \"Tigrinya\",\n    28: \"Latvian\",                          87: \"Galla\",\n    29: \"Sami\",                             88: \"Somali\",\n    30: \"Faroese\",                          89: \"Swahili\",\n    31: \"Farsi/Persian\",                    90: \"Kinyarwanda/Ruanda\",\n    32: \"Russian\",                          91: \"Rundi\",\n    33: \"Chinese (Simplified)\",             92: \"Nyanja/Chewa\",\n    34: \"Flemish\",                          93: \"Malagasy\",\n    35: \"Irish Gaelic\",                     94: \"Esperanto\",\n    36: \"Albanian\",                         128: \"Welsh\",\n    37: \"Romanian\",                         129: \"Basque\",\n    38: \"Czech\",                            130: \"Catalan\",\n    39: \"Slovak\",                           131: \"Latin\",\n    40: \"Slovenian\",                        132: \"Quenchua\",\n    41: \"Yiddish\",                          133: \"Guarani\",\n    42: \"Serbian\",                          134: \"Aymara\",\n    43: \"Macedonian\",                       135: \"Tatar\",\n    44: \"Bulgarian\",                        136: \"Uighur\",\n    45: \"Ukrainian\",                        137: \"Dzongkha\",\n    46: \"Byelorussian\",                     138: \"Javanese (Roman script)\",\n    47: \"Uzbek\",                            139: \"Sundanese (Roman script)\",\n    48: \"Kazakh\",                           140: \"Galician\",\n    49: \"Azerbaijani (Cyrillic script)\",    141: \"Afrikaans\",\n    50: \"Azerbaijani (Arabic script)\",      142: \"Breton\",\n    51: \"Armenian\",                         143: \"Inuktitut\",\n    52: \"Georgian\",                         144: \"Scottish Gaelic\",\n    53: \"Moldavian\",                        145: \"Manx Gaelic\",\n    54: \"Kirghiz\",                          146: \"Irish Gaelic (with dot above)\",\n    55: \"Tajiki\",                           147: \"Tongan\",\n    56: \"Turkmen\",                          148: \"Greek (polytonic)\",\n    57: \"Mongolian (Mongolian script)\",     149: \"Greenlandic\",\n    58: \"Mongolian (Cyrillic script)\",      150: \"Azerbaijani (Roman script)\"\n  },\n\n  // ISO (deprecated)\n  [],\n\n  { // windows\n    0x0436: \"Afrikaans\",               0x0453: \"Khmer\",\n    0x041C: \"Albanian\",                0x0486: \"K'iche\",\n    0x0484: \"Alsatian\",                0x0487: \"Kinyarwanda\",\n    0x045E: \"Amharic\",                 0x0441: \"Kiswahili\",\n    0x1401: \"Arabic\",                  0x0457: \"Konkani\",\n    0x3C01: \"Arabic\",                  0x0412: \"Korean\",\n    0x0C01: \"Arabic\",                  0x0440: \"Kyrgyz\",\n    0x0801: \"Arabic\",                  0x0454: \"Lao\",\n    0x2C01: \"Arabic\",                  0x0426: \"Latvian\",\n    0x3401: \"Arabic\",                  0x0427: \"Lithuanian\",\n    0x3001: \"Arabic\",                  0x082E: \"Lower Sorbian\",\n    0x1001: \"Arabic\",                  0x046E: \"Luxembourgish\",\n    0x1801: \"Arabic\",                  0x042F: \"Macedonian (FYROM)\",\n    0x2001: \"Arabic\",                  0x083E: \"Malay\",\n    0x4001: \"Arabic\",                  0x043E: \"Malay\",\n    0x0401: \"Arabic\",                  0x044C: \"Malayalam\",\n    0x2801: \"Arabic\",                  0x043A: \"Maltese\",\n    0x1C01: \"Arabic\",                  0x0481: \"Maori\",\n    0x3801: \"Arabic\",                  0x047A: \"Mapudungun\",\n    0x2401: \"Arabic\",                  0x044E: \"Marathi\",\n    0x042B: \"Armenian\",                0x047C: \"Mohawk\",\n    0x044D: \"Assamese\",                0x0450: \"Mongolian (Cyrillic)\",\n    0x082C: \"Azeri (Cyrillic)\",        0x0850: \"Mongolian (Traditional)\",\n    0x042C: \"Azeri (Latin)\",           0x0461: \"Nepali\",\n    0x046D: \"Bashkir\",                 0x0414: \"Norwegian (Bokmal)\",\n    0x042D: \"Basque\",                  0x0814: \"Norwegian (Nynorsk)\",\n    0x0423: \"Belarusian\",              0x0482: \"Occitan\",\n    0x0845: \"Bengali\",                 0x0448: \"Odia (formerly Oriya)\",\n    0x0445: \"Bengali\",                 0x0463: \"Pashto\",\n    0x201A: \"Bosnian (Cyrillic)\",      0x0415: \"Polish\",\n    0x141A: \"Bosnian (Latin)\",         0x0416: \"Portuguese\",\n    0x047E: \"Breton\",                  0x0816: \"Portuguese\",\n    0x0402: \"Bulgarian\",               0x0446: \"Punjabi\",\n    0x0403: \"Catalan\",                 0x046B: \"Quechua\",\n    0x0C04: \"Chinese\",                 0x086B: \"Quechua\",\n    0x1404: \"Chinese\",                 0x0C6B: \"Quechua\",\n    0x0804: \"Chinese\",                 0x0418: \"Romanian\",\n    0x1004: \"Chinese\",                 0x0417: \"Romansh\",\n    0x0404: \"Chinese\",                 0x0419: \"Russian\",\n    0x0483: \"Corsican\",                0x243B: \"Sami (Inari)\",\n    0x041A: \"Croatian\",                0x103B: \"Sami (Lule)\",\n    0x101A: \"Croatian (Latin)\",        0x143B: \"Sami (Lule)\",\n    0x0405: \"Czech\",                   0x0C3B: \"Sami (Northern)\",\n    0x0406: \"Danish\",                  0x043B: \"Sami (Northern)\",\n    0x048C: \"Dari\",                    0x083B: \"Sami (Northern)\",\n    0x0465: \"Divehi\",                  0x203B: \"Sami (Skolt)\",\n    0x0813: \"Dutch\",                   0x183B: \"Sami (Southern)\",\n    0x0413: \"Dutch\",                   0x1C3B: \"Sami (Southern)\",\n    0x0C09: \"English\",                 0x044F: \"Sanskrit\",\n    0x2809: \"English\",                 0x1C1A: \"Serbian (Cyrillic)\",\n    0x1009: \"English\",                 0x0C1A: \"Serbian (Cyrillic)\",\n    0x2409: \"English\",                 0x181A: \"Serbian (Latin)\",\n    0x4009: \"English\",                 0x081A: \"Serbian (Latin)\",\n    0x1809: \"English\",                 0x046C: \"Sesotho sa Leboa\",\n    0x2009: \"English\",                 0x0432: \"Setswana\",\n    0x4409: \"English\",                 0x045B: \"Sinhala\",\n    0x1409: \"English\",                 0x041B: \"Slovak\",\n    0x3409: \"English\",                 0x0424: \"Slovenian\",\n    0x4809: \"English\",                 0x2C0A: \"Spanish\",\n    0x1C09: \"English\",                 0x400A: \"Spanish\",\n    0x2C09: \"English\",                 0x340A: \"Spanish\",\n    0x0809: \"English\",                 0x240A: \"Spanish\",\n    0x0409: \"English\",                 0x140A: \"Spanish\",\n    0x3009: \"English\",                 0x1C0A: \"Spanish\",\n    0x0425: \"Estonian\",                0x300A: \"Spanish\",\n    0x0438: \"Faroese\",                 0x440A: \"Spanish\",\n    0x0464: \"Filipino\",                0x100A: \"Spanish\",\n    0x040B: \"Finnish\",                 0x480A: \"Spanish\",\n    0x080C: \"French\",                  0x080A: \"Spanish\",\n    0x0C0C: \"French\",                  0x4C0A: \"Spanish\",\n    0x040C: \"French\",                  0x180A: \"Spanish\",\n    0x140c: \"French\",                  0x3C0A: \"Spanish\",\n    0x180C: \"French\",                  0x280A: \"Spanish\",\n    0x100C: \"French\",                  0x500A: \"Spanish\",\n    0x0462: \"Frisian\",                 0x0C0A: \"Spanish (Modern Sort)\",\n    0x0456: \"Galician\",                0x040A: \"Spanish (Traditional Sort)\",\n    0x0437: \"Georgian\",                0x540A: \"Spanish\",\n    0x0C07: \"German\",                  0x380A: \"Spanish\",\n    0x0407: \"German\",                  0x200A: \"Spanish\",\n    0x1407: \"German\",                  0x081D: \"Sweden\",\n    0x1007: \"German\",                  0x041D: \"Swedish\",\n    0x0807: \"German\",                  0x045A: \"Syriac\",\n    0x0408: \"Greek\",                   0x0428: \"Tajik (Cyrillic)\",\n    0x046F: \"Greenlandic\",             0x085F: \"Tamazight (Latin)\",\n    0x0447: \"Gujarati\",                0x0449: \"Tamil\",\n    0x0468: \"Hausa (Latin)\",           0x0444: \"Tatar\",\n    0x040D: \"Hebrew\",                  0x044A: \"Telugu\",\n    0x0439: \"Hindi\",                   0x041E: \"Thai\",\n    0x040E: \"Hungarian\",               0x0451: \"Tibetan\",\n    0x040F: \"Icelandic\",               0x041F: \"Turkish\",\n    0x0470: \"Igbo\",                    0x0442: \"Turkmen\",\n    0x0421: \"Indonesian\",              0x0480: \"Uighur\",\n    0x045D: \"Inuktitut\",               0x0422: \"Ukrainian\",\n    0x085D: \"Inuktitut (Latin)\",       0x042E: \"Upper Sorbian\",\n    0x083C: \"Irish\",                   0x0420: \"Urdu\",\n    0x0434: \"isiXhosa\",                0x0843: \"Uzbek (Cyrillic)\",\n    0x0435: \"isiZulu\",                 0x0443: \"Uzbek (Latin)\",\n    0x0410: \"Italian\",                 0x042A: \"Vietnamese\",\n    0x0810: \"Italian\",                 0x0452: \"Welsh\",\n    0x0411: \"Japanese\",                0x0488: \"Wolof\",\n    0x044B: \"Kannada\",                 0x0485: \"Yakut\",\n    0x043F: \"Kazakh\",                  0x0478: \"Yi\",\n    0x046A: \"Yoruba\"\n  }\n];\n\nNameTable.process = function(stream) {\n  var records = {};\n  for (let record of this.records) {\n    // find out what language this is for\n    let language = LANGUAGES[record.platformID][record.languageID];\n\n    if (language == null && this.langTags != null && record.languageID >= 0x8000) {\n      language = this.langTags[record.languageID - 0x8000].tag;\n    }\n\n    if (language == null) {\n      language = record.platformID + '-' + record.languageID;\n    }\n\n    // check for reserved nameIDs\n    // if (20 <= record.nameID && record.nameID <= 255) {\n    //   throw new Error(`Reserved nameID ${record.nameID}`);\n    // }\n\n    // if the nameID is >= 256, it is a font feature record (AAT)\n    if (record.nameID >= 256) {\n      if (records.fontFeatures == null) { records.fontFeatures = {}; }\n      let feature = records.fontFeatures[language] != null ? records.fontFeatures[language] : (records.fontFeatures[language] = {});\n      feature[record.nameID] = record.string;\n    } else {\n      let key = NAMES[record.nameID] || record.nameID;\n      if (records[key] == null) { records[key] = {}; }\n      records[key][language] = record.string;\n    }\n  }\n\n  this.records = records;\n};\n\nNameTable.preEncode = function() {\n  if (Array.isArray(this.records)) return;\n  this.version = 0;\n\n  let records = [];\n  for (let key in this.records) {\n    let val = this.records[key];\n    if (key === 'fontFeatures') continue;\n\n    records.push({\n      platformID: 3,\n      encodingID: 1,\n      languageID: 0x409,\n      nameID: NAMES.indexOf(key),\n      length: Buffer.byteLength(val.English, 'utf16le'),\n      string: val.English\n    });\n\n    if (key === 'postscriptName') {\n      records.push({\n        platformID: 1,\n        encodingID: 0,\n        languageID: 0,\n        nameID: NAMES.indexOf(key),\n        length: val.English.length,\n        string: val.English\n      });\n    }\n  }\n\n  this.records = records;\n  this.count = records.length;\n  this.stringOffset = module.exports.size(this, null, false);\n};\n","import r from 'restructure';\n\nvar OS2 = new r.VersionedStruct(r.uint16, {\n  header: {\n    xAvgCharWidth:          r.int16,   // average weighted advance width of lower case letters and space\n    usWeightClass:          r.uint16,  // visual weight of stroke in glyphs\n    usWidthClass:           r.uint16,  // relative change from the normal aspect ratio (width to height ratio)\n    fsType:                 new r.Bitfield(r.uint16, [ // Indicates font embedding licensing rights\n      null, 'noEmbedding', 'viewOnly', 'editable', null,\n      null, null, null, 'noSubsetting', 'bitmapOnly'\n    ]),\n    ySubscriptXSize:        r.int16,   // recommended horizontal size in pixels for subscripts\n    ySubscriptYSize:        r.int16,   // recommended vertical size in pixels for subscripts\n    ySubscriptXOffset:      r.int16,   // recommended horizontal offset for subscripts\n    ySubscriptYOffset:      r.int16,   // recommended vertical offset form the baseline for subscripts\n    ySuperscriptXSize:      r.int16,   // recommended horizontal size in pixels for superscripts\n    ySuperscriptYSize:      r.int16,   // recommended vertical size in pixels for superscripts\n    ySuperscriptXOffset:    r.int16,   // recommended horizontal offset for superscripts\n    ySuperscriptYOffset:    r.int16,   // recommended vertical offset from the baseline for superscripts\n    yStrikeoutSize:         r.int16,   // width of the strikeout stroke\n    yStrikeoutPosition:     r.int16,   // position of the strikeout stroke relative to the baseline\n    sFamilyClass:           r.int16,   // classification of font-family design\n    panose:                 new r.Array(r.uint8, 10),   // describe the visual characteristics of a given typeface\n    ulCharRange:            new r.Array(r.uint32, 4),\n    vendorID:               new r.String(4),          // four character identifier for the font vendor\n    fsSelection:            new r.Bitfield(r.uint16, [  // bit field containing information about the font\n      'italic', 'underscore', 'negative', 'outlined', 'strikeout',\n      'bold', 'regular', 'useTypoMetrics', 'wws', 'oblique'\n    ]),\n    usFirstCharIndex:       r.uint16,  // The minimum Unicode index in this font\n    usLastCharIndex:        r.uint16   // The maximum Unicode index in this font\n  },\n\n  // The Apple version of this table ends here, but the Microsoft one continues on...\n  0: {},\n\n  1: {\n    typoAscender:       r.int16,\n    typoDescender:      r.int16,\n    typoLineGap:        r.int16,\n    winAscent:          r.uint16,\n    winDescent:         r.uint16,\n    codePageRange:      new r.Array(r.uint32, 2)\n  },\n\n  2: {\n    // these should be common with version 1 somehow\n    typoAscender:       r.int16,\n    typoDescender:      r.int16,\n    typoLineGap:        r.int16,\n    winAscent:          r.uint16,\n    winDescent:         r.uint16,\n    codePageRange:      new r.Array(r.uint32, 2),\n\n    xHeight:            r.int16,\n    capHeight:          r.int16,\n    defaultChar:        r.uint16,\n    breakChar:          r.uint16,\n    maxContent:         r.uint16\n  },\n\n  5: {\n    typoAscender:       r.int16,\n    typoDescender:      r.int16,\n    typoLineGap:        r.int16,\n    winAscent:          r.uint16,\n    winDescent:         r.uint16,\n    codePageRange:      new r.Array(r.uint32, 2),\n\n    xHeight:            r.int16,\n    capHeight:          r.int16,\n    defaultChar:        r.uint16,\n    breakChar:          r.uint16,\n    maxContent:         r.uint16,\n\n    usLowerOpticalPointSize: r.uint16,\n    usUpperOpticalPointSize: r.uint16\n  }\n});\n\nlet versions = OS2.versions;\nversions[3] = versions[4] = versions[2];\n\nexport default OS2;\n","import r from 'restructure';\n\n// PostScript information\nexport default new r.VersionedStruct(r.fixed32, {\n  header: { // these fields exist at the top of all versions\n    italicAngle:        r.fixed32, // Italic angle in counter-clockwise degrees from the vertical.\n    underlinePosition:  r.int16,   // Suggested distance of the top of the underline from the baseline\n    underlineThickness: r.int16,   // Suggested values for the underline thickness\n    isFixedPitch:       r.uint32,  // Whether the font is monospaced\n    minMemType42:       r.uint32,  // Minimum memory usage when a TrueType font is downloaded as a Type 42 font\n    maxMemType42:       r.uint32,  // Maximum memory usage when a TrueType font is downloaded as a Type 42 font\n    minMemType1:        r.uint32,  // Minimum memory usage when a TrueType font is downloaded as a Type 1 font\n    maxMemType1:        r.uint32   // Maximum memory usage when a TrueType font is downloaded as a Type 1 font\n  },\n\n  1: {}, // version 1 has no additional fields\n\n  2: {\n    numberOfGlyphs: r.uint16,\n    glyphNameIndex: new r.Array(r.uint16, 'numberOfGlyphs'),\n    names:          new r.Array(new r.String(r.uint8))\n  },\n\n  2.5: {\n    numberOfGlyphs: r.uint16,\n    offsets:        new r.Array(r.uint8, 'numberOfGlyphs')\n  },\n\n  3: {}, // version 3 has no additional fields\n\n  4: {\n    map: new r.Array(r.uint32, t => t.parent.maxp.numGlyphs)\n  }\n});\n","import r from 'restructure';\n\n// An array of predefined values accessible by instructions\nexport default new r.Struct({\n  controlValues: new r.Array(r.int16)\n});\n","import r from 'restructure';\n\n// A list of instructions that are executed once when a font is first used.\n// These instructions are known as the font program. The main use of this table\n// is for the definition of functions that are used in many different glyph programs.\nexport default new r.Struct({\n  instructions: new r.Array(r.uint8)\n});\n","import r from 'restructure';\n\nlet loca = new r.VersionedStruct('head.indexToLocFormat', {\n  0: {\n    offsets: new r.Array(r.uint16)\n  },\n  1: {\n    offsets: new r.Array(r.uint32)\n  }\n});\n\nloca.process = function() {\n  if (this.version === 0) {\n    for (let i = 0; i < this.offsets.length; i++) {\n      this.offsets[i] <<= 1;\n    }\n  }\n};\n\nloca.preEncode = function() {\n  if (this.version != null) return;\n\n  // assume this.offsets is a sorted array\n  this.version = this.offsets[this.offsets.length - 1] > 0xffff ? 1 : 0;\n\n  if (this.version === 0) {\n    for (let i = 0; i < this.offsets.length; i++) {\n      this.offsets[i] >>>= 1;\n    }\n  }\n};\n\nexport default loca;\n","import r from 'restructure';\n\n// Set of instructions executed whenever the point size or font transformation change\nexport default new r.Struct({\n  controlValueProgram: new r.Array(r.uint8)\n});\n","import r from 'restructure';\n\n// only used for encoding\nexport default new r.Array(new r.Buffer);\n","import r from 'restructure';\n\nexport default class CFFIndex {\n  constructor(type) {\n    this.type = type;\n  }\n\n  decode(stream, parent) {\n    let count = stream.readUInt16BE();\n    if (count === 0) {\n      return [];\n    }\n\n    let offSize = stream.readUInt8();\n    let offsetType;\n    if (offSize === 1) {\n      offsetType = r.uint8;\n    } else if (offSize === 2) {\n      offsetType = r.uint16;\n    } else if (offSize === 3) {\n      offsetType = r.uint24;\n    } else if (offSize === 4) {\n      offsetType = r.uint32;\n    } else {\n      throw new Error(`Bad offset size in CFFIndex: ${offSize} ${stream.pos}`);\n    }\n\n    let ret = [];\n    let startPos = stream.pos + ((count + 1) * offSize) - 1;\n\n    let start = offsetType.decode(stream);\n    for (let i = 0; i < count; i++) {\n      let end = offsetType.decode(stream);\n\n      if (this.type != null) {\n        let pos = stream.pos;\n        stream.pos = startPos + start;\n\n        parent.length = end - start;\n        ret.push(this.type.decode(stream, parent));\n        stream.pos = pos;\n      } else {\n        ret.push({\n          offset: startPos + start,\n          length: end - start\n        });\n      }\n\n      start = end;\n    }\n\n    stream.pos = startPos + start;\n    return ret;\n  }\n\n  size(arr, parent) {\n    let size = 2;\n    if (arr.length === 0) {\n      return size;\n    }\n\n    let type = this.type || new r.Buffer;\n\n    // find maximum offset to detminine offset type\n    let offset = 1;\n    for (let i = 0; i < arr.length; i++) {\n      let item = arr[i];\n      offset += type.size(item, parent);\n    }\n\n    let offsetType;\n    if (offset <= 0xff) {\n      offsetType = r.uint8;\n    } else if (offset <= 0xffff) {\n      offsetType = r.uint16;\n    } else if (offset <= 0xffffff) {\n      offsetType = r.uint24;\n    } else if (offset <= 0xffffffff) {\n      offsetType = r.uint32;\n    } else {\n      throw new Error(\"Bad offset in CFFIndex\");\n    }\n\n    size += 1 + offsetType.size() * (arr.length + 1);\n    size += offset - 1;\n\n    return size;\n  }\n\n  encode(stream, arr, parent) {\n    stream.writeUInt16BE(arr.length);\n    if (arr.length === 0) {\n      return;\n    }\n\n    let type = this.type || new r.Buffer;\n\n    // find maximum offset to detminine offset type\n    let sizes = [];\n    let offset = 1;\n    for (let item of arr) {\n      let s = type.size(item, parent);\n      sizes.push(s);\n      offset += s;\n    }\n\n    let offsetType;\n    if (offset <= 0xff) {\n      offsetType = r.uint8;\n    } else if (offset <= 0xffff) {\n      offsetType = r.uint16;\n    } else if (offset <= 0xffffff) {\n      offsetType = r.uint24;\n    } else if (offset <= 0xffffffff) {\n      offsetType = r.uint32;\n    } else {\n      throw new Error(\"Bad offset in CFFIndex\");\n    }\n\n    // write offset size\n    stream.writeUInt8(offsetType.size());\n\n    // write elements\n    offset = 1;\n    offsetType.encode(stream, offset);\n\n    for (let size of sizes) {\n      offset += size;\n      offsetType.encode(stream, offset);\n    }\n\n    for (let item of arr) {\n      type.encode(stream, item, parent);\n    }\n\n    return;\n  }\n}\n","const FLOAT_EOF = 0xf;\nconst FLOAT_LOOKUP = [\n  '0', '1', '2', '3', '4', '5', '6', '7',\n  '8', '9', '.', 'E', 'E-', null, '-'\n];\n\nconst FLOAT_ENCODE_LOOKUP = {\n  '.': 10,\n  'E': 11,\n  'E-': 12,\n  '-': 14\n};\n\nexport default class CFFOperand {\n  static decode(stream, value) {\n    if (32 <= value && value <= 246) {\n      return value - 139;\n    }\n\n    if (247 <= value && value <= 250) {\n      return (value - 247) * 256 + stream.readUInt8() + 108;\n    }\n\n    if (251 <= value && value <= 254) {\n      return -(value - 251) * 256 - stream.readUInt8() - 108;\n    }\n\n    if (value === 28) {\n      return stream.readInt16BE();\n    }\n\n    if (value === 29) {\n      return stream.readInt32BE();\n    }\n\n    if (value === 30) {\n      let str = '';\n      while (true) {\n        let b = stream.readUInt8();\n\n        let n1 = b >> 4;\n        if (n1 === FLOAT_EOF) { break; }\n        str += FLOAT_LOOKUP[n1];\n\n        let n2 = b & 15;\n        if (n2 === FLOAT_EOF) { break; }\n        str += FLOAT_LOOKUP[n2];\n      }\n\n      return parseFloat(str);\n    }\n\n    return null;\n  }\n\n  static size(value) {\n    // if the value needs to be forced to the largest size (32 bit)\n    // e.g. for unknown pointers, set to 32768\n    if (value.forceLarge) {\n      value = 32768;\n    }\n\n    if ((value | 0) !== value) { // floating point\n      let str = '' + value;\n      return 1 + Math.ceil((str.length + 1) / 2);\n\n    } else if (-107 <= value && value <= 107) {\n      return 1;\n\n    } else if (108 <= value && value <= 1131 || -1131 <= value && value <= -108) {\n      return 2;\n\n    } else if (-32768 <= value && value <= 32767) {\n      return 3;\n\n    } else {\n      return 5;\n    }\n  }\n\n  static encode(stream, value) {\n    // if the value needs to be forced to the largest size (32 bit)\n    // e.g. for unknown pointers, save the old value and set to 32768\n    let val = Number(value);\n\n    if (value.forceLarge) {\n      stream.writeUInt8(29);\n      return stream.writeInt32BE(val);\n\n    } else if ((val | 0) !== val) { // floating point\n      stream.writeUInt8(30);\n\n      let str = '' + val;\n      for (let i = 0; i < str.length; i += 2) {\n        let c1 = str[i];\n        let n1 = FLOAT_ENCODE_LOOKUP[c1] || +c1;\n\n        if (i === str.length - 1) {\n          var n2 = FLOAT_EOF;\n        } else {\n          let c2 = str[i + 1];\n          var n2 = FLOAT_ENCODE_LOOKUP[c2] || +c2;\n        }\n\n        stream.writeUInt8((n1 << 4) | (n2 & 15));\n      }\n\n      if (n2 !== FLOAT_EOF) {\n        return stream.writeUInt8((FLOAT_EOF << 4));\n      }\n\n    } else if (-107 <= val && val <= 107) {\n      return stream.writeUInt8(val + 139);\n\n    } else if (108 <= val && val <= 1131) {\n      val -= 108;\n      stream.writeUInt8((val >> 8) + 247);\n      return stream.writeUInt8(val & 0xff);\n\n    } else if (-1131 <= val && val <= -108) {\n      val = -val - 108;\n      stream.writeUInt8((val >> 8) + 251);\n      return stream.writeUInt8(val & 0xff);\n\n    } else if (-32768 <= val && val <= 32767) {\n      stream.writeUInt8(28);\n      return stream.writeInt16BE(val);\n\n    } else {\n      stream.writeUInt8(29);\n      return stream.writeInt32BE(val);\n    }\n  }\n}\n","import isEqual from 'deep-equal';\nimport r from 'restructure';\nimport CFFOperand from './CFFOperand';\nimport { PropertyDescriptor } from 'restructure/src/utils';\n\nexport default class CFFDict {\n  constructor(ops = []) {\n    this.ops = ops;\n    this.fields = {};\n    for (let field of ops) {\n      let key = Array.isArray(field[0]) ? field[0][0] << 8 | field[0][1] : field[0];\n      this.fields[key] = field;\n    }\n  }\n\n  decodeOperands(type, stream, ret, operands) {\n    if (Array.isArray(type)) {\n      return operands.map((op, i) => this.decodeOperands(type[i], stream, ret, [op]));\n    } else if (type.decode != null) {\n      return type.decode(stream, ret, operands);\n    } else {\n      switch (type) {\n        case 'number':\n        case 'offset':\n        case 'sid':\n          return operands[0];\n        case 'boolean':\n          return !!operands[0];\n        default:\n          return operands;\n      }\n    }\n  }\n\n  encodeOperands(type, stream, ctx, operands) {\n    if (Array.isArray(type)) {\n      return operands.map((op, i) => this.encodeOperands(type[i], stream, ctx, op)[0]);\n    } else if (type.encode != null) {\n      return type.encode(stream, operands, ctx);\n    } else if (typeof operands === 'number') {\n      return [operands];\n    } else if (typeof operands === 'boolean') {\n      return [+operands];\n    } else if (Array.isArray(operands)) {\n      return operands;\n    } else {\n      return [operands];\n    }\n  }\n\n  decode(stream, parent) {\n    let end = stream.pos + parent.length;\n    let ret = {};\n    let operands = [];\n\n    // define hidden properties\n    Object.defineProperties(ret, {\n      parent:         { value: parent },\n      _startOffset:   { value: stream.pos }\n    });\n\n    // fill in defaults\n    for (let key in this.fields) {\n      let field = this.fields[key];\n      ret[field[1]] = field[3];\n    }\n\n    while (stream.pos < end) {\n      let b = stream.readUInt8();\n      if (b <= 21) {\n        if (b === 12) {\n          b = (b << 8) | stream.readUInt8();\n        }\n\n        let field = this.fields[b];\n        if (!field) {\n          throw new Error(`Unknown operator ${b}`);\n        }\n\n        let val = this.decodeOperands(field[2], stream, ret, operands);\n        if (val != null) {\n          if (val instanceof PropertyDescriptor) {\n            Object.defineProperty(ret, field[1], val);\n          } else {\n            ret[field[1]] = val;\n          }\n        }\n\n        operands = [];\n      } else {\n        operands.push(CFFOperand.decode(stream, b));\n      }\n    }\n\n    return ret;\n  }\n\n  size(dict, parent, includePointers = true) {\n    let ctx = {\n      parent,\n      val: dict,\n      pointerSize: 0,\n      startOffset: parent.startOffset || 0\n    };\n\n    let len = 0;\n\n    for (let k in this.fields) {\n      let field = this.fields[k];\n      let val = dict[field[1]];\n      if (val == null || isEqual(val, field[3])) {\n        continue;\n      }\n\n      let operands = this.encodeOperands(field[2], null, ctx, val);\n      for (let op of operands) {\n        len += CFFOperand.size(op);\n      }\n\n      let key = Array.isArray(field[0]) ? field[0] : [field[0]];\n      len += key.length;\n    }\n\n    if (includePointers) {\n      len += ctx.pointerSize;\n    }\n\n    return len;\n  }\n\n  encode(stream, dict, parent) {\n    let ctx = {\n      pointers: [],\n      startOffset: stream.pos,\n      parent,\n      val: dict,\n      pointerSize: 0\n    };\n\n    ctx.pointerOffset = stream.pos + this.size(dict, ctx, false);\n\n    for (let field of this.ops) {\n      let val = dict[field[1]];\n      if (val == null || isEqual(val, field[3])) {\n        continue;\n      }\n\n      let operands = this.encodeOperands(field[2], stream, ctx, val);\n      for (let op of operands) {\n        CFFOperand.encode(stream, op);\n      }\n\n      let key = Array.isArray(field[0]) ? field[0] : [field[0]];\n      for (let op of key) {\n        stream.writeUInt8(op);\n      }\n    }\n\n    let i = 0;\n    while (i < ctx.pointers.length) {\n      let ptr = ctx.pointers[i++];\n      ptr.type.encode(stream, ptr.val, ptr.parent);\n    }\n\n    return;\n  }\n}\n","import r from 'restructure';\n\nexport default class CFFPointer extends r.Pointer {\n  constructor(type, options = {}) {\n    if (options.type == null) {\n      options.type = 'global';\n    }\n\n    super(null, type, options);\n  }\n\n  decode(stream, parent, operands) {\n    this.offsetType = {\n      decode: () => operands[0]\n    };\n\n    return super.decode(stream, parent, operands);\n  }\n\n  encode(stream, value, ctx) {\n    if (!stream) {\n      // compute the size (so ctx.pointerSize is correct)\n      this.offsetType = {\n        size: () => 0\n      };\n\n      this.size(value, ctx);\n      return [new Ptr(0)];\n    }\n\n    let ptr = null;\n    this.offsetType = {\n      encode: (stream, val) => ptr = val\n    };\n\n    super.encode(stream, value, ctx);\n    return [new Ptr(ptr)];\n  }\n}\n\nclass Ptr {\n  constructor(val) {\n    this.val = val;\n    this.forceLarge = true;\n  }\n\n  valueOf() {\n    return this.val;\n  }\n}\n","import CFFDict from './CFFDict';\nimport CFFIndex from './CFFIndex';\nimport CFFPointer from './CFFPointer';\n\nexport default new CFFDict([\n  // key       name                    type                                          default\n  [6,         'BlueValues',           'delta',                                       null],\n  [7,         'OtherBlues',           'delta',                                       null],\n  [8,         'FamilyBlues',          'delta',                                       null],\n  [9,         'FamilyOtherBlues',     'delta',                                       null],\n  [[12, 9],   'BlueScale',            'number',                                      0.039625],\n  [[12, 10],  'BlueShift',            'number',                                      7],\n  [[12, 11],  'BlueFuzz',             'number',                                      1],\n  [10,        'StdHW',                'number',                                      null],\n  [11,        'StdVW',                'number',                                      null],\n  [[12, 12],  'StemSnapH',            'delta',                                       null],\n  [[12, 13],  'StemSnapV',            'delta',                                       null],\n  [[12, 14],  'ForceBold',            'boolean',                                     false],\n  [[12, 17],  'LanguageGroup',        'number',                                      0],\n  [[12, 18],  'ExpansionFactor',      'number',                                      0.06],\n  [[12, 19],  'initialRandomSeed',    'number',                                      0],\n  [20,        'defaultWidthX',        'number',                                      0],\n  [21,        'nominalWidthX',        'number',                                      0],\n  [19,        'Subrs',                new CFFPointer(new CFFIndex, {type: 'local'}), null]\n]);\n","// Automatically generated from Appendix A of the CFF specification; do\n// not edit. Length should be 391.\nexport default [\n  \".notdef\", \"space\", \"exclam\", \"quotedbl\", \"numbersign\", \"dollar\",\n  \"percent\", \"ampersand\", \"quoteright\", \"parenleft\", \"parenright\",\n  \"asterisk\", \"plus\", \"comma\", \"hyphen\", \"period\", \"slash\", \"zero\", \"one\",\n  \"two\", \"three\", \"four\", \"five\", \"six\", \"seven\", \"eight\", \"nine\", \"colon\",\n  \"semicolon\", \"less\", \"equal\", \"greater\", \"question\", \"at\", \"A\", \"B\", \"C\",\n  \"D\", \"E\", \"F\", \"G\", \"H\", \"I\", \"J\", \"K\", \"L\", \"M\", \"N\", \"O\", \"P\", \"Q\", \"R\",\n  \"S\", \"T\", \"U\", \"V\", \"W\", \"X\", \"Y\", \"Z\", \"bracketleft\", \"backslash\",\n  \"bracketright\", \"asciicircum\", \"underscore\", \"quoteleft\", \"a\", \"b\", \"c\",\n  \"d\", \"e\", \"f\", \"g\", \"h\", \"i\", \"j\", \"k\", \"l\", \"m\", \"n\", \"o\", \"p\", \"q\", \"r\",\n  \"s\", \"t\", \"u\", \"v\", \"w\", \"x\", \"y\", \"z\", \"braceleft\", \"bar\", \"braceright\",\n  \"asciitilde\", \"exclamdown\", \"cent\", \"sterling\", \"fraction\", \"yen\",\n  \"florin\", \"section\", \"currency\", \"quotesingle\", \"quotedblleft\",\n  \"guillemotleft\", \"guilsinglleft\", \"guilsinglright\", \"fi\", \"fl\", \"endash\",\n  \"dagger\", \"daggerdbl\", \"periodcentered\", \"paragraph\", \"bullet\",\n  \"quotesinglbase\", \"quotedblbase\", \"quotedblright\", \"guillemotright\",\n  \"ellipsis\", \"perthousand\", \"questiondown\", \"grave\", \"acute\", \"circumflex\",\n  \"tilde\", \"macron\", \"breve\", \"dotaccent\", \"dieresis\", \"ring\", \"cedilla\",\n  \"hungarumlaut\", \"ogonek\", \"caron\", \"emdash\", \"AE\", \"ordfeminine\", \"Lslash\",\n  \"Oslash\", \"OE\", \"ordmasculine\", \"ae\", \"dotlessi\", \"lslash\", \"oslash\", \"oe\",\n  \"germandbls\", \"onesuperior\", \"logicalnot\", \"mu\", \"trademark\", \"Eth\",\n  \"onehalf\", \"plusminus\", \"Thorn\", \"onequarter\", \"divide\", \"brokenbar\",\n  \"degree\", \"thorn\", \"threequarters\", \"twosuperior\", \"registered\", \"minus\",\n  \"eth\", \"multiply\", \"threesuperior\", \"copyright\", \"Aacute\", \"Acircumflex\",\n  \"Adieresis\", \"Agrave\", \"Aring\", \"Atilde\", \"Ccedilla\", \"Eacute\",\n  \"Ecircumflex\", \"Edieresis\", \"Egrave\", \"Iacute\", \"Icircumflex\", \"Idieresis\",\n  \"Igrave\", \"Ntilde\", \"Oacute\", \"Ocircumflex\", \"Odieresis\", \"Ograve\",\n  \"Otilde\", \"Scaron\", \"Uacute\", \"Ucircumflex\", \"Udieresis\", \"Ugrave\",\n  \"Yacute\", \"Ydieresis\", \"Zcaron\", \"aacute\", \"acircumflex\", \"adieresis\",\n  \"agrave\", \"aring\", \"atilde\", \"ccedilla\", \"eacute\", \"ecircumflex\",\n  \"edieresis\", \"egrave\", \"iacute\", \"icircumflex\", \"idieresis\", \"igrave\",\n  \"ntilde\", \"oacute\", \"ocircumflex\", \"odieresis\", \"ograve\", \"otilde\",\n  \"scaron\", \"uacute\", \"ucircumflex\", \"udieresis\", \"ugrave\", \"yacute\",\n  \"ydieresis\", \"zcaron\", \"exclamsmall\", \"Hungarumlautsmall\",\n  \"dollaroldstyle\", \"dollarsuperior\", \"ampersandsmall\", \"Acutesmall\",\n  \"parenleftsuperior\", \"parenrightsuperior\", \"twodotenleader\",\n  \"onedotenleader\", \"zerooldstyle\", \"oneoldstyle\", \"twooldstyle\",\n  \"threeoldstyle\", \"fouroldstyle\", \"fiveoldstyle\", \"sixoldstyle\",\n  \"sevenoldstyle\", \"eightoldstyle\", \"nineoldstyle\", \"commasuperior\",\n  \"threequartersemdash\", \"periodsuperior\", \"questionsmall\", \"asuperior\",\n  \"bsuperior\", \"centsuperior\", \"dsuperior\", \"esuperior\", \"isuperior\",\n  \"lsuperior\", \"msuperior\", \"nsuperior\", \"osuperior\", \"rsuperior\",\n  \"ssuperior\", \"tsuperior\", \"ff\", \"ffi\", \"ffl\", \"parenleftinferior\",\n  \"parenrightinferior\", \"Circumflexsmall\", \"hyphensuperior\", \"Gravesmall\",\n  \"Asmall\", \"Bsmall\", \"Csmall\", \"Dsmall\", \"Esmall\", \"Fsmall\", \"Gsmall\",\n  \"Hsmall\", \"Ismall\", \"Jsmall\", \"Ksmall\", \"Lsmall\", \"Msmall\", \"Nsmall\",\n  \"Osmall\", \"Psmall\", \"Qsmall\", \"Rsmall\", \"Ssmall\", \"Tsmall\", \"Usmall\",\n  \"Vsmall\", \"Wsmall\", \"Xsmall\", \"Ysmall\", \"Zsmall\", \"colonmonetary\",\n  \"onefitted\", \"rupiah\", \"Tildesmall\", \"exclamdownsmall\", \"centoldstyle\",\n  \"Lslashsmall\", \"Scaronsmall\", \"Zcaronsmall\", \"Dieresissmall\", \"Brevesmall\",\n  \"Caronsmall\", \"Dotaccentsmall\", \"Macronsmall\", \"figuredash\",\n  \"hypheninferior\", \"Ogoneksmall\", \"Ringsmall\", \"Cedillasmall\",\n  \"questiondownsmall\", \"oneeighth\", \"threeeighths\", \"fiveeighths\",\n  \"seveneighths\", \"onethird\", \"twothirds\", \"zerosuperior\", \"foursuperior\",\n  \"fivesuperior\", \"sixsuperior\", \"sevensuperior\", \"eightsuperior\",\n  \"ninesuperior\", \"zeroinferior\", \"oneinferior\", \"twoinferior\",\n  \"threeinferior\", \"fourinferior\", \"fiveinferior\", \"sixinferior\",\n  \"seveninferior\", \"eightinferior\", \"nineinferior\", \"centinferior\",\n  \"dollarinferior\", \"periodinferior\", \"commainferior\", \"Agravesmall\",\n  \"Aacutesmall\", \"Acircumflexsmall\", \"Atildesmall\", \"Adieresissmall\",\n  \"Aringsmall\", \"AEsmall\", \"Ccedillasmall\", \"Egravesmall\", \"Eacutesmall\",\n  \"Ecircumflexsmall\", \"Edieresissmall\", \"Igravesmall\", \"Iacutesmall\",\n  \"Icircumflexsmall\", \"Idieresissmall\", \"Ethsmall\", \"Ntildesmall\",\n  \"Ogravesmall\", \"Oacutesmall\", \"Ocircumflexsmall\", \"Otildesmall\",\n  \"Odieresissmall\", \"OEsmall\", \"Oslashsmall\", \"Ugravesmall\", \"Uacutesmall\",\n  \"Ucircumflexsmall\", \"Udieresissmall\", \"Yacutesmall\", \"Thornsmall\",\n  \"Ydieresissmall\", \"001.000\", \"001.001\", \"001.002\", \"001.003\", \"Black\",\n  \"Bold\", \"Book\", \"Light\", \"Medium\", \"Regular\", \"Roman\", \"Semibold\"\n];\n","export let StandardEncoding = [\n  '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '',\n  '', '', '', '', 'space', 'exclam', 'quotedbl', 'numbersign', 'dollar', 'percent', 'ampersand', 'quoteright',\n  'parenleft', 'parenright', 'asterisk', 'plus', 'comma', 'hyphen', 'period', 'slash', 'zero', 'one', 'two',\n  'three', 'four', 'five', 'six', 'seven', 'eight', 'nine', 'colon', 'semicolon', 'less', 'equal', 'greater',\n  'question', 'at', 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S',\n  'T', 'U', 'V', 'W', 'X', 'Y', 'Z', 'bracketleft', 'backslash', 'bracketright', 'asciicircum', 'underscore',\n  'quoteleft', 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't',\n  'u', 'v', 'w', 'x', 'y', 'z', 'braceleft', 'bar', 'braceright', 'asciitilde', '', '', '', '', '', '', '', '',\n  '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '',\n  'exclamdown', 'cent', 'sterling', 'fraction', 'yen', 'florin', 'section', 'currency', 'quotesingle',\n  'quotedblleft', 'guillemotleft', 'guilsinglleft', 'guilsinglright', 'fi', 'fl', '', 'endash', 'dagger',\n  'daggerdbl', 'periodcentered', '', 'paragraph', 'bullet', 'quotesinglbase', 'quotedblbase', 'quotedblright',\n  'guillemotright', 'ellipsis', 'perthousand', '', 'questiondown', '', 'grave', 'acute', 'circumflex', 'tilde',\n  'macron', 'breve', 'dotaccent', 'dieresis', '', 'ring', 'cedilla', '', 'hungarumlaut', 'ogonek', 'caron',\n  'emdash', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', 'AE', '', 'ordfeminine', '', '', '',\n  '', 'Lslash', 'Oslash', 'OE', 'ordmasculine', '', '', '', '', '', 'ae', '', '', '', 'dotlessi', '', '',\n  'lslash', 'oslash', 'oe', 'germandbls'\n];\n\nexport let ExpertEncoding = [\n  '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '',\n  '', '', '', '', 'space', 'exclamsmall', 'Hungarumlautsmall', '', 'dollaroldstyle', 'dollarsuperior',\n  'ampersandsmall', 'Acutesmall', 'parenleftsuperior', 'parenrightsuperior', 'twodotenleader', 'onedotenleader',\n  'comma', 'hyphen', 'period', 'fraction', 'zerooldstyle', 'oneoldstyle', 'twooldstyle', 'threeoldstyle',\n  'fouroldstyle', 'fiveoldstyle', 'sixoldstyle', 'sevenoldstyle', 'eightoldstyle', 'nineoldstyle', 'colon',\n  'semicolon', 'commasuperior', 'threequartersemdash', 'periodsuperior', 'questionsmall', '', 'asuperior',\n  'bsuperior', 'centsuperior', 'dsuperior', 'esuperior', '', '', 'isuperior', '', '', 'lsuperior', 'msuperior',\n  'nsuperior', 'osuperior', '', '', 'rsuperior', 'ssuperior', 'tsuperior', '', 'ff', 'fi', 'fl', 'ffi', 'ffl',\n  'parenleftinferior', '', 'parenrightinferior', 'Circumflexsmall', 'hyphensuperior', 'Gravesmall', 'Asmall',\n  'Bsmall', 'Csmall', 'Dsmall', 'Esmall', 'Fsmall', 'Gsmall', 'Hsmall', 'Ismall', 'Jsmall', 'Ksmall', 'Lsmall',\n  'Msmall', 'Nsmall', 'Osmall', 'Psmall', 'Qsmall', 'Rsmall', 'Ssmall', 'Tsmall', 'Usmall', 'Vsmall', 'Wsmall',\n  'Xsmall', 'Ysmall', 'Zsmall', 'colonmonetary', 'onefitted', 'rupiah', 'Tildesmall', '', '', '', '', '', '', '',\n  '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '',\n  'exclamdownsmall', 'centoldstyle', 'Lslashsmall', '', '', 'Scaronsmall', 'Zcaronsmall', 'Dieresissmall',\n  'Brevesmall', 'Caronsmall', '', 'Dotaccentsmall', '', '', 'Macronsmall', '', '', 'figuredash', 'hypheninferior',\n  '', '', 'Ogoneksmall', 'Ringsmall', 'Cedillasmall', '', '', '', 'onequarter', 'onehalf', 'threequarters',\n  'questiondownsmall', 'oneeighth', 'threeeighths', 'fiveeighths', 'seveneighths', 'onethird', 'twothirds', '',\n  '', 'zerosuperior', 'onesuperior', 'twosuperior', 'threesuperior', 'foursuperior', 'fivesuperior',\n  'sixsuperior', 'sevensuperior', 'eightsuperior', 'ninesuperior', 'zeroinferior', 'oneinferior', 'twoinferior',\n  'threeinferior', 'fourinferior', 'fiveinferior', 'sixinferior', 'seveninferior', 'eightinferior',\n  'nineinferior', 'centinferior', 'dollarinferior', 'periodinferior', 'commainferior', 'Agravesmall',\n  'Aacutesmall', 'Acircumflexsmall', 'Atildesmall', 'Adieresissmall', 'Aringsmall', 'AEsmall', 'Ccedillasmall',\n  'Egravesmall', 'Eacutesmall', 'Ecircumflexsmall', 'Edieresissmall', 'Igravesmall', 'Iacutesmall',\n  'Icircumflexsmall', 'Idieresissmall', 'Ethsmall', 'Ntildesmall', 'Ogravesmall', 'Oacutesmall',\n  'Ocircumflexsmall', 'Otildesmall', 'Odieresissmall', 'OEsmall', 'Oslashsmall', 'Ugravesmall', 'Uacutesmall',\n  'Ucircumflexsmall', 'Udieresissmall', 'Yacutesmall', 'Thornsmall', 'Ydieresissmall'\n];\n","export let ISOAdobeCharset = [\n  '.notdef', 'space', 'exclam', 'quotedbl', 'numbersign', 'dollar',\n  'percent', 'ampersand', 'quoteright', 'parenleft', 'parenright',\n  'asterisk', 'plus', 'comma', 'hyphen', 'period', 'slash', 'zero',\n  'one', 'two', 'three', 'four', 'five', 'six', 'seven', 'eight',\n  'nine', 'colon', 'semicolon', 'less', 'equal', 'greater', 'question',\n  'at', 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M',\n  'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z',\n  'bracketleft', 'backslash', 'bracketright', 'asciicircum', 'underscore',\n  'quoteleft', 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l',\n  'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z',\n  'braceleft', 'bar', 'braceright', 'asciitilde', 'exclamdown', 'cent',\n  'sterling', 'fraction', 'yen', 'florin', 'section', 'currency',\n  'quotesingle', 'quotedblleft', 'guillemotleft', 'guilsinglleft',\n  'guilsinglright', 'fi', 'fl', 'endash', 'dagger', 'daggerdbl',\n  'periodcentered', 'paragraph', 'bullet', 'quotesinglbase',\n  'quotedblbase', 'quotedblright', 'guillemotright', 'ellipsis',\n  'perthousand', 'questiondown', 'grave', 'acute', 'circumflex', 'tilde',\n  'macron', 'breve', 'dotaccent', 'dieresis', 'ring', 'cedilla',\n  'hungarumlaut', 'ogonek', 'caron', 'emdash', 'AE', 'ordfeminine',\n  'Lslash', 'Oslash', 'OE', 'ordmasculine', 'ae', 'dotlessi', 'lslash',\n  'oslash', 'oe', 'germandbls', 'onesuperior', 'logicalnot', 'mu',\n  'trademark', 'Eth', 'onehalf', 'plusminus', 'Thorn', 'onequarter',\n  'divide', 'brokenbar', 'degree', 'thorn', 'threequarters', 'twosuperior',\n  'registered', 'minus', 'eth', 'multiply', 'threesuperior', 'copyright',\n  'Aacute', 'Acircumflex', 'Adieresis', 'Agrave', 'Aring', 'Atilde',\n  'Ccedilla', 'Eacute', 'Ecircumflex', 'Edieresis', 'Egrave', 'Iacute',\n  'Icircumflex', 'Idieresis', 'Igrave', 'Ntilde', 'Oacute', 'Ocircumflex',\n  'Odieresis', 'Ograve', 'Otilde', 'Scaron', 'Uacute', 'Ucircumflex',\n  'Udieresis', 'Ugrave', 'Yacute', 'Ydieresis', 'Zcaron', 'aacute',\n  'acircumflex', 'adieresis', 'agrave', 'aring', 'atilde', 'ccedilla',\n  'eacute', 'ecircumflex', 'edieresis', 'egrave', 'iacute', 'icircumflex',\n  'idieresis', 'igrave', 'ntilde', 'oacute', 'ocircumflex', 'odieresis',\n  'ograve', 'otilde', 'scaron', 'uacute', 'ucircumflex', 'udieresis',\n  'ugrave', 'yacute', 'ydieresis', 'zcaron'\n];\n\nexport let ExpertCharset = [\n  '.notdef', 'space', 'exclamsmall', 'Hungarumlautsmall', 'dollaroldstyle',\n  'dollarsuperior', 'ampersandsmall', 'Acutesmall', 'parenleftsuperior',\n  'parenrightsuperior', 'twodotenleader', 'onedotenleader', 'comma',\n  'hyphen', 'period', 'fraction', 'zerooldstyle', 'oneoldstyle',\n  'twooldstyle', 'threeoldstyle', 'fouroldstyle', 'fiveoldstyle',\n  'sixoldstyle', 'sevenoldstyle', 'eightoldstyle', 'nineoldstyle',\n  'colon', 'semicolon', 'commasuperior', 'threequartersemdash',\n  'periodsuperior', 'questionsmall', 'asuperior', 'bsuperior',\n  'centsuperior', 'dsuperior', 'esuperior', 'isuperior', 'lsuperior',\n  'msuperior', 'nsuperior', 'osuperior', 'rsuperior', 'ssuperior',\n  'tsuperior', 'ff', 'fi', 'fl', 'ffi', 'ffl', 'parenleftinferior',\n  'parenrightinferior', 'Circumflexsmall', 'hyphensuperior', 'Gravesmall',\n  'Asmall', 'Bsmall', 'Csmall', 'Dsmall', 'Esmall', 'Fsmall', 'Gsmall',\n  'Hsmall', 'Ismall', 'Jsmall', 'Ksmall', 'Lsmall', 'Msmall', 'Nsmall',\n  'Osmall', 'Psmall', 'Qsmall', 'Rsmall', 'Ssmall', 'Tsmall', 'Usmall',\n  'Vsmall', 'Wsmall', 'Xsmall', 'Ysmall', 'Zsmall', 'colonmonetary',\n  'onefitted', 'rupiah', 'Tildesmall', 'exclamdownsmall', 'centoldstyle',\n  'Lslashsmall', 'Scaronsmall', 'Zcaronsmall', 'Dieresissmall',\n  'Brevesmall', 'Caronsmall', 'Dotaccentsmall', 'Macronsmall',\n  'figuredash', 'hypheninferior', 'Ogoneksmall', 'Ringsmall',\n  'Cedillasmall', 'onequarter', 'onehalf', 'threequarters',\n  'questiondownsmall', 'oneeighth', 'threeeighths', 'fiveeighths',\n  'seveneighths', 'onethird', 'twothirds', 'zerosuperior', 'onesuperior',\n  'twosuperior', 'threesuperior', 'foursuperior', 'fivesuperior',\n  'sixsuperior', 'sevensuperior', 'eightsuperior', 'ninesuperior',\n  'zeroinferior', 'oneinferior', 'twoinferior', 'threeinferior',\n  'fourinferior', 'fiveinferior', 'sixinferior', 'seveninferior',\n  'eightinferior', 'nineinferior', 'centinferior', 'dollarinferior',\n  'periodinferior', 'commainferior', 'Agravesmall', 'Aacutesmall',\n  'Acircumflexsmall', 'Atildesmall', 'Adieresissmall', 'Aringsmall',\n  'AEsmall', 'Ccedillasmall', 'Egravesmall', 'Eacutesmall',\n  'Ecircumflexsmall', 'Edieresissmall', 'Igravesmall', 'Iacutesmall',\n  'Icircumflexsmall', 'Idieresissmall', 'Ethsmall', 'Ntildesmall',\n  'Ogravesmall', 'Oacutesmall', 'Ocircumflexsmall', 'Otildesmall',\n  'Odieresissmall', 'OEsmall', 'Oslashsmall', 'Ugravesmall', 'Uacutesmall',\n  'Ucircumflexsmall', 'Udieresissmall', 'Yacutesmall', 'Thornsmall',\n  'Ydieresissmall'\n];\n\nexport let ExpertSubsetCharset = [\n  '.notdef', 'space', 'dollaroldstyle', 'dollarsuperior',\n  'parenleftsuperior', 'parenrightsuperior', 'twodotenleader',\n  'onedotenleader', 'comma', 'hyphen', 'period', 'fraction',\n  'zerooldstyle', 'oneoldstyle', 'twooldstyle', 'threeoldstyle',\n  'fouroldstyle', 'fiveoldstyle', 'sixoldstyle', 'sevenoldstyle',\n  'eightoldstyle', 'nineoldstyle', 'colon', 'semicolon', 'commasuperior',\n  'threequartersemdash', 'periodsuperior', 'asuperior', 'bsuperior',\n  'centsuperior', 'dsuperior', 'esuperior', 'isuperior', 'lsuperior',\n  'msuperior', 'nsuperior', 'osuperior', 'rsuperior', 'ssuperior',\n  'tsuperior', 'ff', 'fi', 'fl', 'ffi', 'ffl', 'parenleftinferior',\n  'parenrightinferior', 'hyphensuperior', 'colonmonetary', 'onefitted',\n  'rupiah', 'centoldstyle', 'figuredash', 'hypheninferior', 'onequarter',\n  'onehalf', 'threequarters', 'oneeighth', 'threeeighths', 'fiveeighths',\n  'seveneighths', 'onethird', 'twothirds', 'zerosuperior', 'onesuperior',\n  'twosuperior', 'threesuperior', 'foursuperior', 'fivesuperior',\n  'sixsuperior', 'sevensuperior', 'eightsuperior', 'ninesuperior',\n  'zeroinferior', 'oneinferior', 'twoinferior', 'threeinferior',\n  'fourinferior', 'fiveinferior', 'sixinferior', 'seveninferior',\n  'eightinferior', 'nineinferior', 'centinferior', 'dollarinferior',\n  'periodinferior', 'commainferior'\n];\n","import r from 'restructure';\nimport { resolveLength } from 'restructure/src/utils';\nimport CFFDict from './CFFDict';\nimport CFFIndex from './CFFIndex';\nimport CFFPointer from './CFFPointer';\nimport CFFPrivateDict from './CFFPrivateDict';\nimport StandardStrings from './CFFStandardStrings';\nimport { StandardEncoding, ExpertEncoding } from './CFFEncodings';\nimport { ISOAdobeCharset, ExpertCharset, ExpertSubsetCharset } from './CFFCharsets';\n\n// Checks if an operand is an index of a predefined value,\n// otherwise delegates to the provided type.\nclass PredefinedOp {\n  constructor(predefinedOps, type) {\n    this.predefinedOps = predefinedOps;\n    this.type = type;\n  }\n\n  decode(stream, parent, operands) {\n    if (this.predefinedOps[operands[0]]) {\n      return this.predefinedOps[operands[0]];\n    }\n\n    return this.type.decode(stream, parent, operands);\n  }\n\n  size(value, ctx) {\n    return this.type.size(value, ctx);\n  }\n\n  encode(stream, value, ctx) {\n    let index = this.predefinedOps.indexOf(value);\n    if (index !== -1) {\n      return index;\n    }\n\n    return this.type.encode(stream, value, ctx);\n  }\n}\n\nclass CFFEncodingVersion extends r.Number {\n  constructor() {\n    super('UInt8');\n  }\n\n  decode(stream) {\n    return r.uint8.decode(stream) & 0x7f;\n  }\n}\n\nlet Range1 = new r.Struct({\n  first: r.uint16,\n  nLeft: r.uint8\n});\n\nlet Range2 = new r.Struct({\n  first: r.uint16,\n  nLeft: r.uint16\n});\n\nlet CFFCustomEncoding = new r.VersionedStruct(new CFFEncodingVersion(), {\n  0: {\n    nCodes: r.uint8,\n    codes: new r.Array(r.uint8, 'nCodes')\n  },\n\n  1: {\n    nRanges: r.uint8,\n    ranges: new r.Array(Range1, 'nRanges')\n  }\n\n  // TODO: supplement?\n});\n\nlet CFFEncoding = new PredefinedOp([ StandardEncoding, ExpertEncoding ], new CFFPointer(CFFCustomEncoding, { lazy: true }));\n\n// Decodes an array of ranges until the total\n// length is equal to the provided length.\nclass RangeArray extends r.Array {\n  decode(stream, parent) {\n    let length = resolveLength(this.length, stream, parent);\n    let count = 0;\n    let res = [];\n    while (count < length) {\n      let range = this.type.decode(stream, parent);\n      range.offset = count;\n      count += range.nLeft + 1;\n      res.push(range);\n    }\n\n    return res;\n  }\n}\n\nlet CFFCustomCharset = new r.VersionedStruct(r.uint8, {\n  0: {\n    glyphs: new r.Array(r.uint16, t => t.parent.CharStrings.length - 1)\n  },\n\n  1: {\n    ranges: new RangeArray(Range1, t => t.parent.CharStrings.length - 1)\n  },\n\n  2: {\n    ranges: new RangeArray(Range2, t => t.parent.CharStrings.length - 1)\n  }\n});\n\nlet CFFCharset = new PredefinedOp([ ISOAdobeCharset, ExpertCharset, ExpertSubsetCharset ], new CFFPointer(CFFCustomCharset, {lazy: true}));\n\nlet FDRange = new r.Struct({\n  first: r.uint16,\n  fd: r.uint8\n});\n\nlet FDSelect = new r.VersionedStruct(r.uint8, {\n  0: {\n    fds: new r.Array(r.uint8, t => t.parent.CharStrings.length)\n  },\n\n  3: {\n    nRanges: r.uint16,\n    ranges: new r.Array(FDRange, 'nRanges'),\n    sentinel: r.uint16\n  }\n});\n\nlet ptr = new CFFPointer(CFFPrivateDict);\nclass CFFPrivateOp {\n  decode(stream, parent, operands) {\n    parent.length = operands[0];\n    return ptr.decode(stream, parent, [operands[1]]);\n  }\n\n  size(dict, ctx) {\n    return [CFFPrivateDict.size(dict, ctx, false), ptr.size(dict, ctx)[0]];\n  }\n\n  encode(stream, dict, ctx) {\n    return [CFFPrivateDict.size(dict, ctx, false), ptr.encode(stream, dict, ctx)[0]];\n  }\n}\n\nlet FontDict = new CFFDict([\n  // key       name                   type(s)                                 default\n  [18,        'Private',              new CFFPrivateOp,                       null],\n  [[12, 38],  'FontName',             'sid',                                  null]\n]);\n\nlet CFFTopDict = new CFFDict([\n  // key       name                   type(s)                                 default\n  [[12, 30],  'ROS',                  ['sid', 'sid', 'number'],               null],\n\n  [0,         'version',              'sid',                                  null],\n  [1,         'Notice',               'sid',                                  null],\n  [[12, 0],   'Copyright',            'sid',                                  null],\n  [2,         'FullName',             'sid',                                  null],\n  [3,         'FamilyName',           'sid',                                  null],\n  [4,         'Weight',               'sid',                                  null],\n  [[12, 1],   'isFixedPitch',         'boolean',                              false],\n  [[12, 2],   'ItalicAngle',          'number',                               0],\n  [[12, 3],   'UnderlinePosition',    'number',                               -100],\n  [[12, 4],   'UnderlineThickness',   'number',                               50],\n  [[12, 5],   'PaintType',            'number',                               0],\n  [[12, 6],   'CharstringType',       'number',                               2],\n  [[12, 7],   'FontMatrix',           'array',                                [0.001, 0, 0, 0.001, 0, 0]],\n  [13,        'UniqueID',             'number',                               null],\n  [5,         'FontBBox',             'array',                                [0, 0, 0, 0]],\n  [[12, 8],   'StrokeWidth',          'number',                               0],\n  [14,        'XUID',                 'array',                                null],\n  [15,        'charset',              CFFCharset,                             ISOAdobeCharset],\n  [16,        'Encoding',             CFFEncoding,                            StandardEncoding],\n  [17,        'CharStrings',          new CFFPointer(new CFFIndex),           null],\n  [18,        'Private',              new CFFPrivateOp,                       null],\n  [[12, 20],  'SyntheticBase',        'number',                               null],\n  [[12, 21],  'PostScript',           'sid',                                  null],\n  [[12, 22],  'BaseFontName',         'sid',                                  null],\n  [[12, 23],  'BaseFontBlend',        'delta',                                null],\n\n  // CID font specific\n  [[12, 31],  'CIDFontVersion',       'number',                               0],\n  [[12, 32],  'CIDFontRevision',      'number',                               0],\n  [[12, 33],  'CIDFontType',          'number',                               0],\n  [[12, 34],  'CIDCount',             'number',                               8720],\n  [[12, 35],  'UIDBase',              'number',                               null],\n  [[12, 37],  'FDSelect',             new CFFPointer(FDSelect),               null],\n  [[12, 36],  'FDArray',              new CFFPointer(new CFFIndex(FontDict)), null],\n  [[12, 38],  'FontName',             'sid',                                  null]\n]);\n\nlet CFFHeader = new r.Struct({\n  majorVersion:   r.uint8,\n  minorVersion:   r.uint8,\n  hdrSize:        r.uint8,\n  offSize:        r.uint8\n});\n\nlet CFFTop = new r.Struct({\n  header:             CFFHeader,\n  nameIndex:          new CFFIndex(new r.String('length')),\n  topDictIndex:       new CFFIndex(CFFTopDict),\n  stringIndex:        new CFFIndex(new r.String('length')),\n  globalSubrIndex:    new CFFIndex()\n});\n\nexport default CFFTop;\n","import r from 'restructure';\nimport CFFIndex from './CFFIndex';\nimport CFFTop from './CFFTop';\nimport CFFPrivateDict from './CFFPrivateDict';\nimport standardStrings from './CFFStandardStrings';\n\nclass CFFFont {\n  constructor(stream) {\n    this.stream = stream;\n    this.decode();\n  }\n\n  static decode(stream) {\n    return new CFFFont(stream);\n  }\n\n  decode() {\n    let start = this.stream.pos;\n    let top = CFFTop.decode(this.stream);\n    for (let key in top) {\n      let val = top[key];\n      this[key] = val;\n    }\n\n    if (this.topDictIndex.length !== 1) {\n      throw new Error(\"Only a single font is allowed in CFF\");\n    }\n\n    this.isCIDFont = (this.topDict.ROS != null);\n\n    return this;\n  }\n\n  string(sid) {\n    if (sid <= standardStrings.length) {\n      return standardStrings[sid];\n    }\n\n    return this.stringIndex[sid - standardStrings.length];\n  }\n\n  get topDict() {\n    return this.topDictIndex[0];\n  }\n\n  get postscriptName() {\n    return this.nameIndex[0];\n  }\n\n  get fullName() {\n    return this.string(this.topDict.FullName);\n  }\n\n  get familyName() {\n    return this.string(this.topDict.FamilyName);\n  }\n\n  getCharString(glyph) {\n    this.stream.pos = this.topDict.CharStrings[glyph].offset;\n    return this.stream.readBuffer(this.topDict.CharStrings[glyph].length);\n  }\n\n  getGlyphName(gid) {\n    let { charset } = this.topDict;\n    if (Array.isArray(charset)) {\n      return charset[gid];\n    }\n\n    if (gid === 0) {\n      return '.notdef';\n    }\n\n    gid -= 1;\n\n    switch (charset.version) {\n      case 0:\n        return this.string(charset.glyphs[gid]);\n        break;\n\n      case 1: case 2:\n        for (let i = 0; i < charset.ranges.length; i++) {\n          let range = charset.ranges[i];\n          if (range.offset <= gid && gid <= range.offset + range.nLeft) {\n            return this.string(range.first + (gid - range.offset));\n          }\n        }\n        break;\n    }\n\n    return null;\n  }\n\n  fdForGlyph(gid) {\n    if (!this.topDict.FDSelect) { return null; }\n\n    switch (this.topDict.FDSelect.version) {\n      case 0:\n        return this.topDict.FDSelect.fds[gid];\n\n      case 3:\n        let { ranges } = this.topDict.FDSelect;\n        let low = 0;\n        let high = ranges.length - 1;\n\n        while (low <= high) {\n          let mid = (low + high) >> 1;\n\n          if (gid < ranges[mid].first) {\n            high = mid - 1;\n          } else if (mid < high && gid > ranges[mid + 1].first) {\n            low = mid + 1;\n          } else {\n            return ranges[mid].fd;\n          }\n        }\n      default:\n        throw new Error(`Unknown FDSelect version: ${this.topDict.FDSelect.version}`);\n    }\n  }\n\n  privateDictForGlyph(gid) {\n    if (this.topDict.FDSelect) {\n      let fd = this.fdForGlyph(gid);\n      if (this.topDict.FDArray[fd]) {\n        return this.topDict.FDArray[fd].Private;\n      }\n\n      return null;\n    }\n\n    return this.topDict.Private;\n  }\n}\n\nexport default CFFFont;\n","import r from 'restructure';\n\nlet VerticalOrigin = new r.Struct({\n  glyphIndex:   r.uint16,\n  vertOriginY:  r.int16\n});\n\nexport default new r.Struct({\n  majorVersion:           r.uint16,\n  minorVersion:           r.uint16,\n  defaultVertOriginY:     r.int16,\n  numVertOriginYMetrics:  r.uint16,\n  metrics:                new r.Array(VerticalOrigin, 'numVertOriginYMetrics')\n});\n","import r from 'restructure';\n\nexport let BigMetrics = new r.Struct({\n  height: r.uint8,\n  width: r.uint8,\n  horiBearingX: r.int8,\n  horiBearingY: r.int8,\n  horiAdvance: r.uint8,\n  vertBearingX: r.int8,\n  vertBearingY: r.int8,\n  vertAdvance: r.uint8\n});\n\nexport let SmallMetrics = new r.Struct({\n  height: r.uint8,\n  width: r.uint8,\n  bearingX: r.int8,\n  bearingY: r.int8,\n  advance: r.uint8\n});\n\nlet EBDTComponent = new r.Struct({\n  glyph: r.uint16,\n  xOffset: r.int8,\n  yOffset: r.int8\n});\n\nclass ByteAligned {}\n\nclass BitAligned {}\n\nexport let glyph = new r.VersionedStruct('version', {\n  1: {\n    metrics: SmallMetrics,\n    data: ByteAligned\n  },\n\n  2: {\n    metrics: SmallMetrics,\n    data: BitAligned\n  },\n\n  // format 3 is deprecated\n  // format 4 is not supported by Microsoft\n\n  5: {\n    data: BitAligned\n  },\n\n  6: {\n    metrics: BigMetrics,\n    data: ByteAligned\n  },\n\n  7: {\n    metrics: BigMetrics,\n    data: BitAligned\n  },\n\n  8: {\n    metrics: SmallMetrics,\n    pad: new r.Reserved(r.uint8),\n    numComponents: r.uint16,\n    components: new r.Array(EBDTComponent, 'numComponents')\n  },\n\n  9: {\n    metrics: BigMetrics,\n    pad: new r.Reserved(r.uint8),\n    numComponents: r.uint16,\n    components: new r.Array(EBDTComponent, 'numComponents')\n  },\n\n  17: {\n    metrics: SmallMetrics,\n    dataLen: r.uint32,\n    data: new r.Buffer('dataLen')\n  },\n\n  18: {\n    metrics: BigMetrics,\n    dataLen: r.uint32,\n    data: new r.Buffer('dataLen')\n  },\n\n  19: {\n    dataLen: r.uint32,\n    data: new r.Buffer('dataLen')\n  }\n});\n\n","import r from 'restructure';\nimport {BigMetrics} from './EBDT';\n\nlet SBitLineMetrics = new r.Struct({\n  ascender: r.int8,\n  descender: r.int8,\n  widthMax: r.uint8,\n  caretSlopeNumerator: r.int8,\n  caretSlopeDenominator: r.int8,\n  caretOffset: r.int8,\n  minOriginSB: r.int8,\n  minAdvanceSB: r.int8,\n  maxBeforeBL: r.int8,\n  minAfterBL: r.int8,\n  pad: new r.Reserved(r.int8, 2)\n});\n\nlet CodeOffsetPair = new r.Struct({\n  glyphCode: r.uint16,\n  offset: r.uint16\n});\n\nlet IndexSubtable = new r.VersionedStruct(r.uint16, {\n  header: {\n    imageFormat: r.uint16,\n    imageDataOffset: r.uint32\n  },\n\n  1: {\n    offsetArray: new r.Array(r.uint32, t => t.parent.lastGlyphIndex - t.parent.firstGlyphIndex + 1)\n  },\n\n  2: {\n    imageSize: r.uint32,\n    bigMetrics: BigMetrics\n  },\n\n  3: {\n    offsetArray: new r.Array(r.uint16, t => t.parent.lastGlyphIndex - t.parent.firstGlyphIndex + 1)\n  },\n\n  4: {\n    numGlyphs: r.uint32,\n    glyphArray: new r.Array(CodeOffsetPair, t => t.numGlyphs + 1)\n  },\n\n  5: {\n    imageSize: r.uint32,\n    bigMetrics: BigMetrics,\n    numGlyphs: r.uint32,\n    glyphCodeArray: new r.Array(r.uint16, 'numGlyphs')\n  }\n});\n\nlet IndexSubtableArray = new r.Struct({\n  firstGlyphIndex: r.uint16,\n  lastGlyphIndex: r.uint16,\n  subtable: new r.Pointer(r.uint32, IndexSubtable)\n});\n\nlet BitmapSizeTable = new r.Struct({\n  indexSubTableArray: new r.Pointer(r.uint32, new r.Array(IndexSubtableArray, 1), { type: 'parent' }),\n  indexTablesSize: r.uint32,\n  numberOfIndexSubTables: r.uint32,\n  colorRef: r.uint32,\n  hori: SBitLineMetrics,\n  vert: SBitLineMetrics,\n  startGlyphIndex: r.uint16,\n  endGlyphIndex: r.uint16,\n  ppemX: r.uint8,\n  ppemY: r.uint8,\n  bitDepth: r.uint8,\n  flags: new r.Bitfield(r.uint8, ['horizontal', 'vertical'])\n});\n\nexport default new r.Struct({\n  version:  r.uint32, // 0x00020000\n  numSizes: r.uint32,\n  sizes:    new r.Array(BitmapSizeTable, 'numSizes')\n});\n","import r from 'restructure';\n\nlet ImageTable = new r.Struct({\n  ppem: r.uint16,\n  resolution: r.uint16,\n  imageOffsets: new r.Array(new r.Pointer(r.uint32, 'void'), t => t.parent.parent.maxp.numGlyphs + 1)\n});\n\n// This is the Apple sbix table, used by the \"Apple Color Emoji\" font.\n// It includes several image tables with images for each bitmap glyph\n// of several different sizes.\nexport default new r.Struct({\n  version: r.uint16,\n  flags: new r.Bitfield(r.uint16, ['renderOutlines']),\n  numImgTables: r.uint32,\n  imageTables: new r.Array(new r.Pointer(r.uint32, ImageTable), 'numImgTables')\n});\n","import r from 'restructure';\n\nlet LayerRecord = new r.Struct({\n  gid: r.uint16,          // Glyph ID of layer glyph (must be in z-order from bottom to top).\n  paletteIndex: r.uint16  // Index value to use in the appropriate palette. This value must\n});                       // be less than numPaletteEntries in the CPAL table, except for\n                          // the special case noted below. Each palette entry is 16 bits.\n                          // A palette index of 0xFFFF is a special case indicating that\n                          // the text foreground color should be used.\n\nlet BaseGlyphRecord = new r.Struct({\n  gid: r.uint16,             // Glyph ID of reference glyph. This glyph is for reference only\n                             // and is not rendered for color.\n  firstLayerIndex: r.uint16, // Index (from beginning of the Layer Records) to the layer record.\n                             // There will be numLayers consecutive entries for this base glyph.\n  numLayers: r.uint16\n});\n\nexport default new r.Struct({\n  version: r.uint16,\n  numBaseGlyphRecords: r.uint16,\n  baseGlyphRecord: new r.Pointer(r.uint32, new r.Array(BaseGlyphRecord, 'numBaseGlyphRecords')),\n  layerRecords: new r.Pointer(r.uint32, new r.Array(LayerRecord, 'numLayerRecords'), { lazy: true }),\n  numLayerRecords: r.uint16\n});\n","import r from 'restructure';\n\nlet ColorRecord = new r.Struct({\n  blue: r.uint8,\n  green: r.uint8,\n  red: r.uint8,\n  alpha: r.uint8\n});\n\nexport default new r.Struct({\n  version: r.uint16,\n  numPaletteEntries: r.uint16,\n  numPalettes: r.uint16,\n  numColorRecords: r.uint16,\n  colorRecords: new r.Pointer(r.uint32, new r.Array(ColorRecord, 'numColorRecords')),\n  colorRecordIndices: new r.Array(r.uint16, 'numPalettes')\n});\n","import r from 'restructure';\n\n//########################\n// Scripts and Languages #\n//########################\n\nlet LangSysTable = new r.Struct({\n  reserved:         new r.Reserved(r.uint16),\n  reqFeatureIndex:  r.uint16,\n  featureCount:     r.uint16,\n  featureIndexes:   new r.Array(r.uint16, 'featureCount')\n});\n\nlet LangSysRecord = new r.Struct({\n  tag:      new r.String(4),\n  langSys:  new r.Pointer(r.uint16, LangSysTable, { type: 'parent' })\n});\n\nlet Script = new r.Struct({\n  defaultLangSys: new r.Pointer(r.uint16, LangSysTable),\n  count:          r.uint16,\n  langSysRecords: new r.Array(LangSysRecord, 'count')\n});\n\nlet ScriptRecord = new r.Struct({\n  tag:    new r.String(4),\n  script: new r.Pointer(r.uint16, Script, { type: 'parent' })\n});\n\nexport let ScriptList = new r.Array(ScriptRecord, r.uint16);\n\n//#######################\n// Features and Lookups #\n//#######################\n\nlet Feature = new r.Struct({\n  featureParams:      r.uint16, // pointer\n  lookupCount:        r.uint16,\n  lookupListIndexes:  new r.Array(r.uint16, 'lookupCount')\n});\n\nlet FeatureRecord = new r.Struct({\n  tag:      new r.String(4),\n  feature:  new r.Pointer(r.uint16, Feature, { type: 'parent' })\n});\n\nexport let FeatureList = new r.Array(FeatureRecord, r.uint16);\n\nlet LookupFlags = new r.Bitfield(r.uint16, [\n  'rightToLeft', 'ignoreBaseGlyphs', 'ignoreLigatures',\n  'ignoreMarks', 'useMarkFilteringSet', null, 'markAttachmentType'\n]);\n\nexport function LookupList(SubTable) {\n  let Lookup = new r.Struct({\n    lookupType:         r.uint16,\n    flags:              LookupFlags,\n    subTableCount:      r.uint16,\n    subTables:          new r.Array(new r.Pointer(r.uint16, SubTable), 'subTableCount'),\n    markFilteringSet:   r.uint16 // TODO: only present when flags says so...\n  });\n\n  return new r.LazyArray(new r.Pointer(r.uint16, Lookup), r.uint16);\n}\n\n//#################\n// Coverage Table #\n//#################\n\nlet RangeRecord = new r.Struct({\n  start:              r.uint16,\n  end:                r.uint16,\n  startCoverageIndex: r.uint16\n});\n\nexport let Coverage = new r.VersionedStruct(r.uint16, {\n  1: {\n    glyphCount:   r.uint16,\n    glyphs:       new r.Array(r.uint16, 'glyphCount')\n  },\n  2: {\n    rangeCount:   r.uint16,\n    rangeRecords: new r.Array(RangeRecord, 'rangeCount')\n  }\n});\n\n//#########################\n// Class Definition Table #\n//#########################\n\nlet ClassRangeRecord = new r.Struct({\n  start:  r.uint16,\n  end:    r.uint16,\n  class:  r.uint16\n});\n\nexport let ClassDef = new r.VersionedStruct(r.uint16, {\n  1: { // Class array\n    startGlyph:       r.uint16,\n    glyphCount:       r.uint16,\n    classValueArray:  new r.Array(r.uint16, 'glyphCount')\n  },\n  2: { // Class ranges\n    classRangeCount:  r.uint16,\n    classRangeRecord: new r.Array(ClassRangeRecord, 'classRangeCount')\n  }\n});\n\n//###############\n// Device Table #\n//###############\n\nexport let Device = new r.Struct({\n  startSize:    r.uint16,\n  endSize:      r.uint16,\n  deltaFormat:  r.uint16\n});\n\n//#############################################\n// Contextual Substitution/Positioning Tables #\n//#############################################\n\nlet LookupRecord = new r.Struct({\n  sequenceIndex:      r.uint16,\n  lookupListIndex:    r.uint16\n});\n\nlet Rule = new r.Struct({\n  glyphCount:     r.uint16,\n  lookupCount:    r.uint16,\n  input:          new r.Array(r.uint16, t => t.glyphCount - 1),\n  lookupRecords:  new r.Array(LookupRecord, 'lookupCount')\n});\n\nlet RuleSet = new r.Array(new r.Pointer(r.uint16, Rule), r.uint16);\n\nlet ClassRule = new r.Struct({\n  glyphCount:     r.uint16,\n  lookupCount:    r.uint16,\n  classes:        new r.Array(r.uint16, t => t.glyphCount - 1),\n  lookupRecords:  new r.Array(LookupRecord, 'lookupCount')\n});\n\nlet ClassSet = new r.Array(new r.Pointer(r.uint16, ClassRule), r.uint16);\n\nexport let Context = new r.VersionedStruct(r.uint16, {\n  1: { // Simple context\n    coverage:      new r.Pointer(r.uint16, Coverage),\n    ruleSetCount:  r.uint16,\n    ruleSets:      new r.Array(new r.Pointer(r.uint16, RuleSet), 'ruleSetCount')\n  },\n  2: { // Class-based context\n    coverage:      new r.Pointer(r.uint16, Coverage),\n    classDef:      new r.Pointer(r.uint16, ClassDef),\n    classSetCnt:   r.uint16,\n    classSet:      new r.Array(new r.Pointer(r.uint16, ClassSet), 'classSetCnt')\n  },\n  3: {\n    glyphCount:    r.uint16,\n    lookupCount:   r.uint16,\n    coverages:     new r.Array(new r.Pointer(r.uint16, Coverage), 'glyphCount'),\n    lookupRecords: new r.Array(LookupRecord, 'lookupCount')\n  }\n});\n\n//######################################################\n// Chaining Contextual Substitution/Positioning Tables #\n//######################################################\n\nlet ChainRule = new r.Struct({\n  backtrackGlyphCount:  r.uint16,\n  backtrack:            new r.Array(r.uint16, 'backtrackGlyphCount'),\n  inputGlyphCount:      r.uint16,\n  input:                new r.Array(r.uint16, t => t.inputGlyphCount - 1),\n  lookaheadGlyphCount:  r.uint16,\n  lookahead:            new r.Array(r.uint16, 'lookaheadGlyphCount'),\n  lookupCount:          r.uint16,\n  lookupRecords:        new r.Array(LookupRecord, 'lookupCount')\n});\n\nlet ChainRuleSet = new r.Array(new r.Pointer(r.uint16, ChainRule), r.uint16);\n\nexport let ChainingContext = new r.VersionedStruct(r.uint16, {\n  1: { // Simple context glyph substitution\n    coverage:           new r.Pointer(r.uint16, Coverage),\n    chainCount:         r.uint16,\n    chainRuleSets:      new r.Array(new r.Pointer(r.uint16, ChainRuleSet), 'chainCount')\n  },\n\n  2: { // Class-based chaining context\n    coverage:           new r.Pointer(r.uint16, Coverage),\n    backtrackClassDef:  new r.Pointer(r.uint16, ClassDef),\n    inputClassDef:      new r.Pointer(r.uint16, ClassDef),\n    lookaheadClassDef:  new r.Pointer(r.uint16, ClassDef),\n    chainCount:         r.uint16,\n    chainClassSet:      new r.Array(new r.Pointer(r.uint16, ChainRuleSet), 'chainCount')\n  },\n\n  3: { // Coverage-based chaining context\n    backtrackGlyphCount:    r.uint16,\n    backtrackCoverage:      new r.Array(new r.Pointer(r.uint16, Coverage), 'backtrackGlyphCount'),\n    inputGlyphCount:        r.uint16,\n    inputCoverage:          new r.Array(new r.Pointer(r.uint16, Coverage), 'inputGlyphCount'),\n    lookaheadGlyphCount:    r.uint16,\n    lookaheadCoverage:      new r.Array(new r.Pointer(r.uint16, Coverage), 'lookaheadGlyphCount'),\n    lookupCount:            r.uint16,\n    lookupRecords:          new r.Array(LookupRecord, 'lookupCount')\n  }\n});\n","import r from 'restructure';\nimport { ScriptList, FeatureList, LookupList, Coverage, ClassDef, Device } from './opentype';\n\nlet BaseCoord = new r.VersionedStruct(r.uint16, {\n  1: { // Design units only\n    coordinate:   r.int16 // X or Y value, in design units\n  },\n\n  2: { // Design units plus contour point\n    coordinate:     r.int16,   // X or Y value, in design units\n    referenceGlyph: r.uint16,  // GlyphID of control glyph\n    baseCoordPoint: r.uint16   // Index of contour point on the referenceGlyph\n  },\n\n  3: { // Design units plus Device table\n    coordinate:   r.int16,                         // X or Y value, in design units\n    deviceTable:  new r.Pointer(r.uint16, Device)  // Device table for X or Y value\n  }\n});\n\nlet BaseValues = new r.Struct({\n  defaultIndex:   r.uint16,  // Index of default baseline for this script-same index in the BaseTagList\n  baseCoordCount: r.uint16,\n  baseCoords:     new r.Array(new r.Pointer(r.uint16, BaseCoord), 'baseCoordCount')\n});\n\nlet FeatMinMaxRecord = new r.Struct({\n  tag:        new r.String(4),  // 4-byte feature identification tag-must match FeatureTag in FeatureList\n  minCoord:   new r.Pointer(r.uint16, BaseCoord, {type: 'parent'}), // May be NULL\n  maxCoord:   new r.Pointer(r.uint16, BaseCoord, {type: 'parent'})  // May be NULL\n});\n\nlet MinMax = new r.Struct({\n  minCoord:           new r.Pointer(r.uint16, BaseCoord),  // May be NULL\n  maxCoord:           new r.Pointer(r.uint16, BaseCoord),  // May be NULL\n  featMinMaxCount:    r.uint16,                            // May be 0\n  featMinMaxRecords:  new r.Array(FeatMinMaxRecord, 'featMinMaxCount') // In alphabetical order\n});\n\nlet BaseLangSysRecord = new r.Struct({\n  tag:    new r.String(4),  // 4-byte language system identification tag\n  minMax: new r.Pointer(r.uint16, MinMax, {type: 'parent'})\n});\n\nlet BaseScript = new r.Struct({\n  baseValues:         new r.Pointer(r.uint16, BaseValues), // May be NULL\n  defaultMinMax:      new r.Pointer(r.uint16, MinMax),     // May be NULL\n  baseLangSysCount:   r.uint16,                            // May be 0\n  baseLangSysRecords: new r.Array(BaseLangSysRecord, 'baseLangSysCount') // in alphabetical order by BaseLangSysTag\n});\n\nlet BaseScriptRecord = new r.Struct({\n  tag:      new r.String(4),  // 4-byte script identification tag\n  script:   new r.Pointer(r.uint16, BaseScript, {type: 'parent'})\n});\n\nlet BaseScriptList = new r.Array(BaseScriptRecord, r.uint16);\n\n// Array of 4-byte baseline identification tags-must be in alphabetical order\nlet BaseTagList = new r.Array(new r.String(4), r.uint16);\n\nlet Axis = new r.Struct({\n  baseTagList:    new r.Pointer(r.uint16, BaseTagList),  // May be NULL\n  baseScriptList: new r.Pointer(r.uint16, BaseScriptList)\n});\n\nexport default new r.Struct({\n  version:      r.uint32,                        // Version of the BASE table-initially 0x00010000\n  horizAxis:    new r.Pointer(r.uint16, Axis),   // May be NULL\n  vertAxis:     new r.Pointer(r.uint16, Axis)    // May be NULL\n});\n","import r from 'restructure';\nimport { ScriptList, FeatureList, LookupList, Coverage, ClassDef, Device } from './opentype';\n\nlet AttachPoint = new r.Array(r.uint16, r.uint16);\nlet AttachList = new r.Struct({\n  coverage:       new r.Pointer(r.uint16, Coverage),\n  glyphCount:     r.uint16,\n  attachPoints:   new r.Array(new r.Pointer(r.uint16, AttachPoint), 'glyphCount')\n});\n\nlet CaretValue = new r.VersionedStruct(r.uint16, {\n  1: { // Design units only\n    coordinate: r.int16\n  },\n\n  2: { // Contour point\n    caretValuePoint: r.uint16\n  },\n\n  3: { // Design units plus Device table\n    coordinate:     r.int16,\n    deviceTable:    new r.Pointer(r.uint16, Device)\n  }\n});\n\nlet LigGlyph = new r.Array(new r.Pointer(r.uint16, CaretValue), r.uint16);\n\nlet LigCaretList = new r.Struct({\n  coverage:       new r.Pointer(r.uint16, Coverage),\n  ligGlyphCount:  r.uint16,\n  ligGlyphs:      new r.Array(new r.Pointer(r.uint16, LigGlyph), 'ligGlyphCount')\n});\n\nlet MarkGlyphSetsDef = new r.Struct({\n  markSetTableFormat: r.uint16,\n  markSetCount:       r.uint16,\n  coverage:           new r.Array(new r.Pointer(r.uint32, Coverage), 'markSetCount')\n});\n\nexport default new r.VersionedStruct(r.uint32, {\n  0x00010000: {\n    glyphClassDef:      new r.Pointer(r.uint16, ClassDef),       // 1: base glyph, 2: ligature, 3: mark, 4: component\n    attachList:         new r.Pointer(r.uint16, AttachList),\n    ligCaretList:       new r.Pointer(r.uint16, LigCaretList),\n    markAttachClassDef: new r.Pointer(r.uint16, ClassDef)\n  },\n  0x00010002: {\n    glyphClassDef:      new r.Pointer(r.uint16, ClassDef),\n    attachList:         new r.Pointer(r.uint16, AttachList),\n    ligCaretList:       new r.Pointer(r.uint16, LigCaretList),\n    markAttachClassDef: new r.Pointer(r.uint16, ClassDef),\n    markGlyphSetsDef:   new r.Pointer(r.uint16, MarkGlyphSetsDef)\n  }\n});\n","import r from 'restructure';\nimport { ScriptList, FeatureList, LookupList, Coverage, ClassDef, Device, Context, ChainingContext } from './opentype';\n\nlet ValueFormat = new r.Bitfield(r.uint16, [\n  'xPlacement', 'yPlacement',\n  'xAdvance', 'yAdvance',\n  'xPlaDevice', 'yPlaDevice',\n  'xAdvDevice', 'yAdvDevice'\n]);\n\nlet types = {\n  xPlacement: r.int16,\n  yPlacement: r.int16,\n  xAdvance:   r.int16,\n  yAdvance:   r.int16,\n  xPlaDevice: new r.Pointer(r.uint16, Device, { type: 'global', relativeTo: 'rel' }),\n  yPlaDevice: new r.Pointer(r.uint16, Device, { type: 'global', relativeTo: 'rel' }),\n  xAdvDevice: new r.Pointer(r.uint16, Device, { type: 'global', relativeTo: 'rel' }),\n  yAdvDevice: new r.Pointer(r.uint16, Device, { type: 'global', relativeTo: 'rel' })\n};\n\nclass ValueRecord {\n  constructor(key = 'valueFormat') {\n    this.key = key;\n  }\n\n  buildStruct(parent) {\n    let struct = parent;\n    while (!struct[this.key] && struct.parent) {\n      struct = struct.parent;\n    }\n\n    if (!struct[this.key]) return;\n\n    let fields = {};\n    fields.rel = () => struct._startOffset;\n\n    let format = struct[this.key];\n    for (let key in format) {\n      if (format[key]) {\n        fields[key] = types[key];\n      }\n    }\n\n    return new r.Struct(fields);\n  }\n\n  size(val, ctx) {\n    return this.buildStruct(ctx).size(val, ctx);\n  }\n\n  decode(stream, parent) {\n    let res = this.buildStruct(parent).decode(stream, parent);\n    delete res.rel;\n    return res;\n  }\n}\n\nlet PairValueRecord = new r.Struct({\n  secondGlyph:    r.uint16,\n  value1:         new ValueRecord('valueFormat1'),\n  value2:         new ValueRecord('valueFormat2')\n});\n\nlet PairSet = new r.Array(PairValueRecord, r.uint16);\n\nlet Class2Record = new r.Struct({\n  value1: new ValueRecord('valueFormat1'),\n  value2: new ValueRecord('valueFormat2')\n});\n\nlet Anchor = new r.VersionedStruct(r.uint16, {\n  1: { // Design units only\n    xCoordinate:    r.int16,\n    yCoordinate:    r.int16\n  },\n\n  2: { // Design units plus contour point\n    xCoordinate:    r.int16,\n    yCoordinate:    r.int16,\n    anchorPoint:    r.uint16\n  },\n\n  3: { // Design units plus Device tables\n    xCoordinate:    r.int16,\n    yCoordinate:    r.int16,\n    xDeviceTable:   new r.Pointer(r.uint16, Device),\n    yDeviceTable:   new r.Pointer(r.uint16, Device)\n  }\n});\n\nlet EntryExitRecord = new r.Struct({\n  entryAnchor:    new r.Pointer(r.uint16, Anchor, {type: 'parent'}),\n  exitAnchor:     new r.Pointer(r.uint16, Anchor, {type: 'parent'})\n});\n\nlet MarkRecord = new r.Struct({\n  class:      r.uint16,\n  markAnchor: new r.Pointer(r.uint16, Anchor, {type: 'parent'})\n});\n\nlet MarkArray = new r.Array(MarkRecord, r.uint16);\n\nlet BaseRecord  = new r.Array(new r.Pointer(r.uint16, Anchor), t => t.parent.classCount);\nlet BaseArray   = new r.Array(BaseRecord, r.uint16);\n\nlet ComponentRecord = new r.Array(new r.Pointer(r.uint16, Anchor), t => t.parent.parent.classCount);\nlet LigatureAttach  = new r.Array(ComponentRecord, r.uint16);\nlet LigatureArray   = new r.Array(new r.Pointer(r.uint16, LigatureAttach), r.uint16);\n\nlet GPOSLookup = new r.VersionedStruct('lookupType', {\n  1: new r.VersionedStruct(r.uint16, { // Single Adjustment\n    1: { // Single positioning value\n      coverage:       new r.Pointer(r.uint16, Coverage),\n      valueFormat:    ValueFormat,\n      value:          new ValueRecord()\n    },\n    2: {\n      coverage:       new r.Pointer(r.uint16, Coverage),\n      valueFormat:    ValueFormat,\n      valueCount:     r.uint16,\n      values:         new r.LazyArray(new ValueRecord(), 'valueCount')\n    }\n  }),\n\n  2: new r.VersionedStruct(r.uint16, { // Pair Adjustment Positioning\n    1: { // Adjustments for glyph pairs\n      coverage:       new r.Pointer(r.uint16, Coverage),\n      valueFormat1:   ValueFormat,\n      valueFormat2:   ValueFormat,\n      pairSetCount:   r.uint16,\n      pairSets:       new r.LazyArray(new r.Pointer(r.uint16, PairSet), 'pairSetCount')\n    },\n\n    2: { // Class pair adjustment\n      coverage:       new r.Pointer(r.uint16, Coverage),\n      valueFormat1:   ValueFormat,\n      valueFormat2:   ValueFormat,\n      classDef1:      new r.Pointer(r.uint16, ClassDef),\n      classDef2:      new r.Pointer(r.uint16, ClassDef),\n      class1Count:    r.uint16,\n      class2Count:    r.uint16,\n      classRecords:   new r.LazyArray(new r.LazyArray(Class2Record, 'class2Count'), 'class1Count')\n    }\n  }),\n\n  3: { // Cursive Attachment Positioning\n    format:             r.uint16,\n    coverage:           new r.Pointer(r.uint16, Coverage),\n    entryExitCount:     r.uint16,\n    entryExitRecords:   new r.Array(EntryExitRecord, 'entryExitCount')\n  },\n\n  4: { // MarkToBase Attachment Positioning\n    format:             r.uint16,\n    markCoverage:       new r.Pointer(r.uint16, Coverage),\n    baseCoverage:       new r.Pointer(r.uint16, Coverage),\n    classCount:         r.uint16,\n    markArray:          new r.Pointer(r.uint16, MarkArray),\n    baseArray:          new r.Pointer(r.uint16, BaseArray)\n  },\n\n  5: { // MarkToLigature Attachment Positioning\n    format:             r.uint16,\n    markCoverage:       new r.Pointer(r.uint16, Coverage),\n    ligatureCoverage:   new r.Pointer(r.uint16, Coverage),\n    classCount:         r.uint16,\n    markArray:          new r.Pointer(r.uint16, MarkArray),\n    ligatureArray:      new r.Pointer(r.uint16, LigatureArray)\n  },\n\n  6: { // MarkToMark Attachment Positioning\n    format:             r.uint16,\n    mark1Coverage:      new r.Pointer(r.uint16, Coverage),\n    mark2Coverage:      new r.Pointer(r.uint16, Coverage),\n    classCount:         r.uint16,\n    mark1Array:         new r.Pointer(r.uint16, MarkArray),\n    mark2Array:         new r.Pointer(r.uint16, BaseArray)\n  },\n\n  7: Context,          // Contextual positioning\n  8: ChainingContext,  // Chaining contextual positioning\n\n  9: { // Extension Positioning\n    posFormat:   r.uint16,\n    lookupType:  r.uint16,   // cannot also be 9\n    extension:   new r.Pointer(r.uint32, GPOSLookup)\n  }\n});\n\n// Fix circular reference\nGPOSLookup.versions[9].extension.type = GPOSLookup;\n\nexport default new r.Struct({\n  version:        r.int32,\n  scriptList:     new r.Pointer(r.uint16, ScriptList),\n  featureList:    new r.Pointer(r.uint16, FeatureList),\n  lookupList:     new r.Pointer(r.uint16, new LookupList(GPOSLookup))\n});\n\n// export GPOSLookup for JSTF table\nexport { GPOSLookup };\n","import r from 'restructure';\nimport { ScriptList, FeatureList, LookupList, Coverage, ClassDef, Device, Context, ChainingContext } from './opentype';\n\nlet Sequence = new r.Array(r.uint16, r.uint16);\nlet AlternateSet = Sequence;\n\nlet Ligature = new r.Struct({\n  glyph:      r.uint16,\n  compCount:  r.uint16,\n  components: new r.Array(r.uint16, t => t.compCount - 1)\n});\n\nlet LigatureSet = new r.Array(new r.Pointer(r.uint16, Ligature), r.uint16);\n\nlet GSUBLookup = new r.VersionedStruct('lookupType', {\n  1: new r.VersionedStruct(r.uint16, {// Single Substitution\n    1: {\n      coverage:       new r.Pointer(r.uint16, Coverage),\n      deltaGlyphID:   r.int16\n    },\n    2: {\n      coverage:       new r.Pointer(r.uint16, Coverage),\n      glyphCount:     r.uint16,\n      substitute:     new r.LazyArray(r.uint16, 'glyphCount')\n    }\n  }),\n\n  2: { // Multiple Substitution\n    substFormat:    r.uint16,\n    coverage:       new r.Pointer(r.uint16, Coverage),\n    count:          r.uint16,\n    sequences:      new r.LazyArray(new r.Pointer(r.uint16, Sequence), 'count')\n  },\n\n  3: { // Alternate Substitution\n    substFormat:    r.uint16,\n    coverage:       new r.Pointer(r.uint16, Coverage),\n    count:          r.uint16,\n    alternateSet:   new r.LazyArray(new r.Pointer(r.uint16, AlternateSet), 'count')\n  },\n\n  4: { // Ligature Substitution\n    substFormat:    r.uint16,\n    coverage:       new r.Pointer(r.uint16, Coverage),\n    count:          r.uint16,\n    ligatureSets:   new r.LazyArray(new r.Pointer(r.uint16, LigatureSet), 'count')\n  },\n\n  5: Context,         // Contextual Substitution\n  6: ChainingContext, // Chaining Contextual Substitution\n\n  7: { // Extension Substitution\n    substFormat:   r.uint16,\n    lookupType:    r.uint16,   // cannot also be 7\n    extension:     new r.Pointer(r.uint32, GSUBLookup)\n  },\n\n  8: { // Reverse Chaining Contextual Single Substitution\n    substFormat:            r.uint16,\n    coverage:               new r.Pointer(r.uint16, Coverage),\n    backtrackCoverage:      new r.Array(new r.Pointer(r.uint16, Coverage), 'backtrackGlyphCount'),\n    lookaheadGlyphCount:    r.uint16,\n    lookaheadCoverage:      new r.Array(new r.Pointer(r.uint16, Coverage), 'lookaheadGlyphCount'),\n    glyphCount:             r.uint16,\n    substitutes:            new r.Array(r.uint16, 'glyphCount')\n  }\n});\n\n// Fix circular reference\nGSUBLookup.versions[7].extension.type = GSUBLookup;\n\nexport default new r.Struct({\n  version:        r.int32,\n  scriptList:     new r.Pointer(r.uint16, ScriptList),\n  featureList:    new r.Pointer(r.uint16, FeatureList),\n  lookupList:     new r.Pointer(r.uint16, new LookupList(GSUBLookup))\n});\n","import r from 'restructure';\nimport { ScriptList, FeatureList, LookupList, Coverage, ClassDef, Device } from './opentype';\nimport { GPOSLookup } from './GPOS';\n\nlet JstfGSUBModList = new r.Array(r.uint16, r.uint16);\n\nlet JstfPriority = new r.Struct({\n  shrinkageEnableGSUB:    new r.Pointer(r.uint16, JstfGSUBModList),\n  shrinkageDisableGSUB:   new r.Pointer(r.uint16, JstfGSUBModList),\n  shrinkageEnableGPOS:    new r.Pointer(r.uint16, JstfGSUBModList),\n  shrinkageDisableGPOS:   new r.Pointer(r.uint16, JstfGSUBModList),\n  shrinkageJstfMax:       new r.Pointer(r.uint16, new LookupList(GPOSLookup)),\n  extensionEnableGSUB:    new r.Pointer(r.uint16, JstfGSUBModList),\n  extensionDisableGSUB:   new r.Pointer(r.uint16, JstfGSUBModList),\n  extensionEnableGPOS:    new r.Pointer(r.uint16, JstfGSUBModList),\n  extensionDisableGPOS:   new r.Pointer(r.uint16, JstfGSUBModList),\n  extensionJstfMax:       new r.Pointer(r.uint16, new LookupList(GPOSLookup))\n});\n\nlet JstfLangSys = new r.Array(new r.Pointer(r.uint16, JstfPriority), r.uint16);\n\nlet JstfLangSysRecord = new r.Struct({\n  tag:         new r.String(4),\n  jstfLangSys: new r.Pointer(r.uint16, JstfLangSys)\n});\n\nlet JstfScript = new r.Struct({\n  extenderGlyphs: new r.Pointer(r.uint16, new r.Array(r.uint16, r.uint16)), // array of glyphs to extend line length\n  defaultLangSys: new r.Pointer(r.uint16, JstfLangSys),\n  langSysCount:   r.uint16,\n  langSysRecords: new r.Array(JstfLangSysRecord, 'langSysCount')\n});\n\nlet JstfScriptRecord = new r.Struct({\n  tag:    new r.String(4),\n  script: new r.Pointer(r.uint16, JstfScript, {type: 'parent'})\n});\n\nexport default new r.Struct({\n  version:     r.uint32,  // should be 0x00010000\n  scriptCount: r.uint16,\n  scriptList:  new r.Array(JstfScriptRecord, 'scriptCount')\n});\n","import r from 'restructure';\n\nlet Signature = new r.Struct({\n  format: r.uint32,\n  length: r.uint32,\n  offset: r.uint32\n});\n\nlet SignatureBlock = new r.Struct({\n  reserved:       new r.Reserved(r.uint16, 2),\n  cbSignature:    r.uint32,  // Length (in bytes) of the PKCS#7 packet in pbSignature\n  signature:      new r.Buffer('cbSignature')\n});\n\nexport default new r.Struct({\n  ulVersion:       r.uint32,  // Version number of the DSIG table (0x00000001)\n  usNumSigs:       r.uint16,  // Number of signatures in the table\n  usFlag:          r.uint16,  // Permission flags\n  signatures:      new r.Array(Signature, 'usNumSigs'),\n  signatureBlocks: new r.Array(SignatureBlock, 'usNumSigs')\n});\n","import r from 'restructure';\n\nlet GaspRange = new r.Struct({\n  rangeMaxPPEM:       r.uint16,                  // Upper limit of range, in ppem\n  rangeGaspBehavior:  new r.Bitfield(r.uint16, [ // Flags describing desired rasterizer behavior\n    'grayscale', 'gridfit',\n    'symmetricSmoothing', 'symmetricGridfit'     // only in version 1, for ClearType\n  ])\n});\n\nexport default new r.Struct({\n  version:    r.uint16,  // set to 0\n  numRanges:  r.uint16,\n  gaspRanges: new r.Array(GaspRange, 'numRanges') // Sorted by ppem\n});\n","import r from 'restructure';\n\nlet DeviceRecord = new r.Struct({\n  pixelSize:      r.uint8,\n  maximumWidth:   r.uint8,\n  widths:         new r.Array(r.uint8, t => t.parent.parent.maxp.numGlyphs)\n});\n\n// The Horizontal Device Metrics table stores integer advance widths scaled to particular pixel sizes\nexport default new r.Struct({\n  version:            r.uint16,\n  numRecords:         r.int16,\n  sizeDeviceRecord:   r.int32,\n  records:            new r.Array(DeviceRecord, 'numRecords')\n});\n","import r from 'restructure';\n\nlet KernPair = new r.Struct({\n  left:   r.uint16,\n  right:  r.uint16,\n  value:  r.int16\n});\n\nlet ClassTable = new r.Struct({\n  firstGlyph: r.uint16,\n  nGlyphs: r.uint16,\n  offsets: new r.Array(r.uint16, 'nGlyphs'),\n  max: t => t.offsets.length && Math.max.apply(Math, t.offsets)\n});\n\nlet Kern2Array = new r.Struct({\n  off: t => t._startOffset - t.parent.parent._startOffset,\n  len: t => (((t.parent.leftTable.max - t.off) / t.parent.rowWidth) + 1) * (t.parent.rowWidth / 2),\n  values: new r.LazyArray(r.int16, 'len')\n});\n\nlet KernSubtable = new r.VersionedStruct('format', {\n  0: {\n    nPairs:         r.uint16,\n    searchRange:    r.uint16,\n    entrySelector:  r.uint16,\n    rangeShift:     r.uint16,\n    pairs:          new r.Array(KernPair, 'nPairs')\n  },\n\n  2: {\n    rowWidth:   r.uint16,\n    leftTable:  new r.Pointer(r.uint16, ClassTable, {type: 'parent'}),\n    rightTable: new r.Pointer(r.uint16, ClassTable, {type: 'parent'}),\n    array:      new r.Pointer(r.uint16, Kern2Array, {type: 'parent'})\n  },\n\n  3: {\n    glyphCount:       r.uint16,\n    kernValueCount:   r.uint8,\n    leftClassCount:   r.uint8,\n    rightClassCount:  r.uint8,\n    flags:            r.uint8,\n    kernValue:        new r.Array(r.int16, 'kernValueCount'),\n    leftClass:        new r.Array(r.uint8, 'glyphCount'),\n    rightClass:       new r.Array(r.uint8, 'glyphCount'),\n    kernIndex:        new r.Array(r.uint8, t => t.leftClassCount * t.rightClassCount)\n  }\n});\n\nlet KernTable = new r.VersionedStruct('version', {\n  0: { // Microsoft uses this format\n    subVersion: r.uint16,  // Microsoft has an extra sub-table version number\n    length:     r.uint16,  // Length of the subtable, in bytes\n    format:     r.uint8,   // Format of subtable\n    coverage:   new r.Bitfield(r.uint8, [\n      'horizontal',    // 1 if table has horizontal data, 0 if vertical\n      'minimum',       // If set to 1, the table has minimum values. If set to 0, the table has kerning values.\n      'crossStream',   // If set to 1, kerning is perpendicular to the flow of the text\n      'override'      // If set to 1 the value in this table replaces the accumulated value\n    ]),\n    subtable:   KernSubtable,\n    padding: new r.Reserved(r.uint8, t => t.length - t._currentOffset)\n  },\n  1: { // Apple uses this format\n    length:     r.uint32,\n    coverage:   new r.Bitfield(r.uint8, [\n      null, null, null, null, null,\n      'variation',     // Set if table has variation kerning values\n      'crossStream',   // Set if table has cross-stream kerning values\n      'vertical'      // Set if table has vertical kerning values\n    ]),\n    format:     r.uint8,\n    tupleIndex: r.uint16,\n    subtable:   KernSubtable,\n    padding: new r.Reserved(r.uint8, t => t.length - t._currentOffset)\n  }\n});\n\nexport default new r.VersionedStruct(r.uint16, {\n  0: { // Microsoft Version\n    nTables:    r.uint16,\n    tables:     new r.Array(KernTable, 'nTables')\n  },\n\n  1: { // Apple Version\n    reserved:   new r.Reserved(r.uint16), // the other half of the version number\n    nTables:    r.uint32,\n    tables:     new r.Array(KernTable, 'nTables')\n  }\n});\n","import r from 'restructure';\n\n// Linear Threshold table\n// Records the ppem for each glyph at which the scaling becomes linear again,\n// despite instructions effecting the advance width\nexport default new r.Struct({\n  version:    r.uint16,\n  numGlyphs:  r.uint16,\n  yPels:      new r.Array(r.uint8, 'numGlyphs')\n});\n","import r from 'restructure';\n\n// PCL 5 Table\n// NOTE: The PCLT table is strongly discouraged for OpenType fonts with TrueType outlines\nexport default new r.Struct({\n  version:              r.uint16,\n  fontNumber:           r.uint32,\n  pitch:                r.uint16,\n  xHeight:              r.uint16,\n  style:                r.uint16,\n  typeFamily:           r.uint16,\n  capHeight:            r.uint16,\n  symbolSet:            r.uint16,\n  typeface:             new r.String(16),\n  characterComplement:  new r.String(8),\n  fileName:             new r.String(6),\n  strokeWeight:         new r.String(1),\n  widthType:            new r.String(1),\n  serifStyle:           r.uint8,\n  reserved:             new r.Reserved(r.uint8)\n});\n","import r from 'restructure';\n\n// VDMX tables contain ascender/descender overrides for certain (usually small)\n// sizes. This is needed in order to match font metrics on Windows.\n\nlet Ratio = new r.Struct({\n  bCharSet:       r.uint8,                             // Character set\n  xRatio:         r.uint8,                             // Value to use for x-Ratio\n  yStartRatio:    r.uint8,                             // Starting y-Ratio value\n  yEndRatio:      r.uint8                              // Ending y-Ratio value\n});\n\nlet vTable = new r.Struct({\n  yPelHeight:     r.uint16,                            // yPelHeight to which values apply\n  yMax:           r.int16,                             // Maximum value (in pels) for this yPelHeight\n  yMin:           r.int16                              // Minimum value (in pels) for this yPelHeight\n});\n\nlet VdmxGroup = new r.Struct({\n  recs:           r.uint16,                            // Number of height records in this group\n  startsz:        r.uint8,                             // Starting yPelHeight\n  endsz:          r.uint8,                             // Ending yPelHeight\n  entries:        new r.Array(vTable, 'recs')          // The VDMX records\n});\n\nexport default new r.Struct({\n  version:        r.uint16,                            // Version number (0 or 1)\n  numRecs:        r.uint16,                            // Number of VDMX groups present\n  numRatios:      r.uint16,                            // Number of aspect ratio groupings\n  ratioRanges:    new r.Array(Ratio, 'numRatios'),     // Ratio ranges\n  offsets:        new r.Array(r.uint16, 'numRatios'),  // Offset to the VDMX group for this ratio range\n  groups:         new r.Array(VdmxGroup, 'numRecs')    // The actual VDMX groupings\n});\n","import r from 'restructure';\n\n// Vertical Header Table\nexport default new r.Struct({\n  version:                r.uint16,  // Version number of the Vertical Header Table\n  ascent:                 r.int16,   // The vertical typographic ascender for this font\n  descent:                r.int16,   // The vertical typographic descender for this font\n  lineGap:                r.int16,   // The vertical typographic line gap for this font\n  advanceHeightMax:       r.int16,   // The maximum advance height measurement found in the font\n  minTopSideBearing:      r.int16,   // The minimum top side bearing measurement found in the font\n  minBottomSideBearing:   r.int16,   // The minimum bottom side bearing measurement found in the font\n  yMaxExtent:             r.int16,\n  caretSlopeRise:         r.int16,   // Caret slope (rise/run)\n  caretSlopeRun:          r.int16,\n  caretOffset:            r.int16,   // Set value equal to 0 for nonslanted fonts\n  reserved:               new r.Reserved(r.int16, 4),\n  metricDataFormat:       r.int16,   // Set to 0\n  numberOfMetrics:        r.uint16   // Number of advance heights in the Vertical Metrics table\n});\n","import r from 'restructure';\n\nlet VmtxEntry = new r.Struct({\n  advance: r.uint16,  // The advance height of the glyph\n  bearing: r.int16    // The top sidebearing of the glyph\n});\n\n// Vertical Metrics Table\nexport default new r.Struct({\n  metrics:  new r.LazyArray(VmtxEntry, t => t.parent.vhea.numberOfMetrics),\n  bearings: new r.LazyArray(r.int16, t => t.parent.maxp.numGlyphs - t.parent.vhea.numberOfMetrics)\n});\n","import r from 'restructure';\n\nlet shortFrac = new r.Fixed(16, 'BE', 14);\n\nlet Correspondence = new r.Struct({\n  fromCoord: shortFrac,\n  toCoord: shortFrac\n});\n\nlet Segment = new r.Struct({\n  pairCount: r.uint16,\n  correspondence: new r.Array(Correspondence, 'pairCount')\n});\n\nexport default new r.Struct({\n  version: r.fixed32,\n  axisCount: r.uint32,\n  segment: new r.Array(Segment, 'axisCount')\n});\n","import r from 'restructure';\n\nclass UnboundedArrayAccessor {\n  constructor(type, stream, parent) {\n    this.type = type;\n    this.stream = stream;\n    this.parent = parent;\n    this.base = this.stream.pos;\n    this._items = [];\n  }\n\n  getItem(index) {\n    if (this._items[index] == null) {\n      let pos = this.stream.pos;\n      this.stream.pos = this.base + this.type.size(null, this.parent) * index;\n      this._items[index] = this.type.decode(this.stream, this.parent);\n      this.stream.pos = pos;\n    }\n\n    return this._items[index];\n  }\n\n  inspect() {\n    return `[UnboundedArray ${this.type.constructor.name}]`;\n  }\n}\n\nexport class UnboundedArray extends r.Array {\n  constructor(type) {\n    super(type, 0);\n  }\n\n  decode(stream, parent) {\n    return new UnboundedArrayAccessor(this.type, stream, parent);\n  }\n}\n\nexport let LookupTable = function(ValueType = r.uint16) {\n  // Helper class that makes internal structures invisible to pointers\n  class Shadow {\n    constructor(type) {\n      this.type = type;\n    }\n\n    decode(stream, ctx) {\n      ctx = ctx.parent.parent;\n      return this.type.decode(stream, ctx);\n    }\n\n    size(val, ctx) {\n      ctx = ctx.parent.parent;\n      return this.type.size(val, ctx);\n    }\n\n    encode(stream, val, ctx) {\n      ctx = ctx.parent.parent;\n      return this.type.encode(stream, val, ctx);\n    }\n  }\n\n  ValueType = new Shadow(ValueType);\n\n  let BinarySearchHeader = new r.Struct({\n    unitSize: r.uint16,\n    nUnits: r.uint16,\n    searchRange: r.uint16,\n    entrySelector: r.uint16,\n    rangeShift: r.uint16\n  });\n\n  let LookupSegmentSingle = new r.Struct({\n    lastGlyph: r.uint16,\n    firstGlyph: r.uint16,\n    value: ValueType\n  });\n\n  let LookupSegmentArray = new r.Struct({\n    lastGlyph: r.uint16,\n    firstGlyph: r.uint16,\n    values: new r.Pointer(r.uint16, new r.Array(ValueType, t => t.lastGlyph - t.firstGlyph + 1), {type: 'parent'})\n  });\n\n  let LookupSingle = new r.Struct({\n    glyph: r.uint16,\n    value: ValueType\n  });\n\n  return new r.VersionedStruct(r.uint16, {\n    0: {\n      values: new UnboundedArray(ValueType) // length == number of glyphs maybe?\n    },\n    2: {\n      binarySearchHeader: BinarySearchHeader,\n      segments: new r.Array(LookupSegmentSingle, t => t.binarySearchHeader.nUnits)\n    },\n    4: {\n      binarySearchHeader: BinarySearchHeader,\n      segments: new r.Array(LookupSegmentArray, t => t.binarySearchHeader.nUnits)\n    },\n    6: {\n      binarySearchHeader: BinarySearchHeader,\n      segments: new r.Array(LookupSingle, t => t.binarySearchHeader.nUnits)\n    },\n    8: {\n      firstGlyph: r.uint16,\n      count: r.uint16,\n      values: new r.Array(ValueType, 'count')\n    }\n  });\n};\n\nexport function StateTable(entryData = {}, lookupType = r.uint16) {\n  let entry = Object.assign({\n    newState: r.uint16,\n    flags: r.uint16\n  }, entryData);\n\n  let Entry = new r.Struct(entry);\n  let StateArray = new UnboundedArray(new r.Array(r.uint16, t => t.nClasses));\n\n  let StateHeader = new r.Struct({\n    nClasses: r.uint32,\n    classTable: new r.Pointer(r.uint32, new LookupTable(lookupType)),\n    stateArray: new r.Pointer(r.uint32, StateArray),\n    entryTable: new r.Pointer(r.uint32, new UnboundedArray(Entry))\n  });\n\n  return StateHeader;\n}\n\n// This is the old version of the StateTable structure\nexport function StateTable1(entryData = {}, lookupType = r.uint16) {\n  let ClassLookupTable = new r.Struct({\n    version() { return 8; }, // simulate LookupTable\n    firstGlyph: r.uint16,\n    values: new r.Array(r.uint8, r.uint16)\n  });\n\n  let entry = Object.assign({\n    newStateOffset: r.uint16,\n    // convert offset to stateArray index\n    newState: t => (t.newStateOffset - (t.parent.stateArray.base - t.parent._startOffset)) / t.parent.nClasses,\n    flags: r.uint16\n  }, entryData);\n\n  let Entry = new r.Struct(entry);\n  let StateArray = new UnboundedArray(new r.Array(r.uint8, t => t.nClasses));\n\n  let StateHeader1 = new r.Struct({\n    nClasses: r.uint16,\n    classTable: new r.Pointer(r.uint16, ClassLookupTable),\n    stateArray: new r.Pointer(r.uint16, StateArray),\n    entryTable: new r.Pointer(r.uint16, new UnboundedArray(Entry))\n  });\n\n  return StateHeader1;\n}\n","import r from 'restructure';\nimport { LookupTable } from './aat';\n\nlet BslnSubtable = new r.VersionedStruct('format', {\n  0: { // Distance-based, no mapping\n    deltas: new r.Array(r.int16, 32)\n  },\n\n  1: { // Distance-based, with mapping\n    deltas: new r.Array(r.int16, 32),\n    mappingData: new LookupTable(r.uint16)\n  },\n\n  2: { // Control point-based, no mapping\n    standardGlyph: r.uint16,\n    controlPoints: new r.Array(r.uint16, 32)\n  },\n\n  3: { // Control point-based, with mapping\n    standardGlyph: r.uint16,\n    controlPoints: new r.Array(r.uint16, 32),\n    mappingData: new LookupTable(r.uint16)\n  }\n});\n\nexport default new r.Struct({\n  version: r.fixed32,\n  format: r.uint16,\n  defaultBaseline: r.uint16,\n  subtable: BslnSubtable\n});\n","import r from 'restructure';\n\nlet Setting = new r.Struct({\n  setting: r.uint16,\n  nameIndex: r.int16,\n  name() { return this.parent.parent.parent.name.records.fontFeatures.English[this.nameIndex] }\n});\n\nlet FeatureName = new r.Struct({\n  feature: r.uint16,\n  nSettings: r.uint16,\n  settingTable: new r.Pointer(r.uint32, new r.Array(Setting, 'nSettings'), { type: 'parent' }),\n  featureFlags: new r.Bitfield(r.uint8, [\n    null, null, null, null, null, null,\n    'hasDefault', 'exclusive'\n  ]),\n  defaultSetting: r.uint8,\n  nameIndex: r.int16,\n  name() { return this.parent.parent.name.records.fontFeatures.English[this.nameIndex] }\n});\n\nexport default new r.Struct({\n  version: r.fixed32,\n  featureNameCount: r.uint16,\n  reserved1: new r.Reserved(r.uint16),\n  reserved2: new r.Reserved(r.uint32),\n  featureNames: new r.Array(FeatureName, 'featureNameCount')\n});\n","import r from 'restructure';\n\nfunction getName() {\n  let features = this.parent.parent.name.records.fontFeatures;\n  return features && features.English && features.English[this.nameID];\n}\n\nlet Axis = new r.Struct({\n  axisTag: new r.String(4),\n  minValue: r.fixed32,\n  defaultValue: r.fixed32,\n  maxValue: r.fixed32,\n  flags: r.uint16,\n  nameID: r.uint16,\n  name: getName\n});\n\nlet Instance = new r.Struct({\n  nameID: r.uint16,\n  name: getName,\n  flags: r.uint16,\n  coord: new r.Array(r.fixed32, t => t.parent.axisCount)\n});\n\nexport default new r.Struct({\n  version: r.fixed32,\n  offsetToData: r.uint16,\n  countSizePairs: r.uint16,\n  axisCount: r.uint16,\n  axisSize: r.uint16,\n  instanceCount: r.uint16,\n  instanceSize: r.uint16,\n  axis: new r.Array(Axis, 'axisCount'),\n  instance: new r.Array(Instance, 'instanceCount')\n});\n","import r from 'restructure';\n\nlet shortFrac = new r.Fixed(16, 'BE', 14);\nclass Offset {\n  static decode(stream, parent) {\n    // In short format, offsets are multiplied by 2.\n    // This doesn't seem to be documented by Apple, but it\n    // is implemented this way in Freetype.\n    return parent.flags \n      ? stream.readUInt32BE()\n      : stream.readUInt16BE() * 2;\n  }\n}\n\nlet gvar = new r.Struct({\n  version: r.uint16,\n  reserved: new r.Reserved(r.uint16),\n  axisCount: r.uint16,\n  globalCoordCount: r.uint16,\n  globalCoords: new r.Pointer(r.uint32, new r.Array(new r.Array(shortFrac, 'axisCount'), 'globalCoordCount')),\n  glyphCount: r.uint16,\n  flags: r.uint16,\n  offsetToData: r.uint32,\n  offsets: new r.Array(new r.Pointer(Offset, 'void', { relativeTo: 'offsetToData', allowNull: false }), t => t.glyphCount + 1)\n});\n\nexport default gvar;\n","import r from 'restructure';\nimport { LookupTable, StateTable1 } from './aat';\n\nlet ClassTable = new r.Struct({\n  length: r.uint16,\n  coverage: r.uint16,\n  subFeatureFlags: r.uint32,\n  stateTable: new StateTable1\n});\n\nlet WidthDeltaRecord = new r.Struct({\n  justClass: r.uint32,\n  beforeGrowLimit: r.fixed32,\n  beforeShrinkLimit: r.fixed32,\n  afterGrowLimit: r.fixed32,\n  afterShrinkLimit: r.fixed32,\n  growFlags: r.uint16,\n  shrinkFlags: r.uint16\n});\n\nlet WidthDeltaCluster = new r.Array(WidthDeltaRecord, r.uint32);\n\nlet ActionData = new r.VersionedStruct('actionType', {\n  0: { // Decomposition action\n    lowerLimit: r.fixed32,\n    upperLimit: r.fixed32,\n    order: r.uint16,\n    glyphs: new r.Array(r.uint16, r.uint16)\n  },\n\n  1: { // Unconditional add glyph action\n    addGlyph: r.uint16\n  },\n\n  2: { // Conditional add glyph action\n    substThreshold: r.fixed32,\n    addGlyph: r.uint16,\n    substGlyph: r.uint16\n  },\n\n  3: {}, // Stretch glyph action (no data, not supported by CoreText)\n\n  4: { // Ductile glyph action (not supported by CoreText)\n    variationAxis: r.uint32,\n    minimumLimit: r.fixed32,\n    noStretchValue: r.fixed32,\n    maximumLimit: r.fixed32\n  },\n\n  5: { // Repeated add glyph action\n    flags: r.uint16,\n    glyph: r.uint16\n  }\n});\n\nlet Action = new r.Struct({\n  actionClass: r.uint16,\n  actionType: r.uint16,\n  actionLength: r.uint32,\n  actionData: ActionData,\n  padding: new r.Reserved(r.uint8, t => t.actionLength - t._currentOffset)\n});\n\nlet PostcompensationAction = new r.Array(Action, r.uint32);\nlet PostCompensationTable = new r.Struct({\n  lookupTable: new LookupTable(new r.Pointer(r.uint16, PostcompensationAction))\n});\n\nlet JustificationTable = new r.Struct({\n  classTable: new r.Pointer(r.uint16, ClassTable, { type: 'parent' }),\n  wdcOffset: r.uint16,\n  postCompensationTable: new r.Pointer(r.uint16, PostCompensationTable, { type: 'parent' }),\n  widthDeltaClusters: new LookupTable(new r.Pointer(r.uint16, WidthDeltaCluster, { type: 'parent', relativeTo: 'wdcOffset' }))\n});\n\nexport default new r.Struct({\n  version: r.uint32,\n  format: r.uint16,\n  horizontal: new r.Pointer(r.uint16, JustificationTable),\n  vertical: new r.Pointer(r.uint16, JustificationTable)\n});\n","import r from 'restructure';\nimport { UnboundedArray, LookupTable, StateTable } from './aat';\n\nlet LigatureData = {\n  action: r.uint16\n};\n\nlet ContextualData = {\n  markIndex: r.uint16,\n  currentIndex: r.uint16\n};\n\nlet InsertionData = {\n  currentInsertIndex: r.uint16,\n  markedInsertIndex: r.uint16\n};\n\nlet SubstitutionTable = new r.Struct({\n  items: new UnboundedArray(new r.Pointer(r.uint32, new LookupTable))\n});\n\nlet SubtableData = new r.VersionedStruct('type', {\n  0: { // Indic Rearrangement Subtable\n    stateTable: new StateTable\n  },\n\n  1: { // Contextual Glyph Substitution Subtable\n    stateTable: new StateTable(ContextualData),\n    substitutionTable: new r.Pointer(r.uint32, SubstitutionTable)\n  },\n\n  2: { // Ligature subtable\n    stateTable: new StateTable(LigatureData),\n    ligatureActions: new r.Pointer(r.uint32, new UnboundedArray(r.uint32)),\n    components: new r.Pointer(r.uint32, new UnboundedArray(r.uint16)),\n    ligatureList: new r.Pointer(r.uint32, new UnboundedArray(r.uint16))\n  },\n\n  4: { // Non-contextual Glyph Substitution Subtable\n    lookupTable: new LookupTable\n  },\n\n  5: { // Glyph Insertion Subtable\n    stateTable: new StateTable(InsertionData),\n    insertionActions: new r.Pointer(r.uint32, new UnboundedArray(r.uint16))\n  }\n});\n\nlet Subtable = new r.Struct({\n  length: r.uint32,\n  coverage: r.uint24,\n  type: r.uint8,\n  subFeatureFlags: r.uint32,\n  table: SubtableData,\n  padding: new r.Reserved(r.uint8, t => t.length - t._currentOffset)\n});\n\nlet FeatureEntry = new r.Struct({\n  featureType:    r.uint16,\n  featureSetting: r.uint16,\n  enableFlags:    r.uint32,\n  disableFlags:   r.uint32\n});\n\nlet MorxChain = new r.Struct({\n  defaultFlags:     r.uint32,\n  chainLength:      r.uint32,\n  nFeatureEntries:  r.uint32,\n  nSubtables:       r.uint32,\n  features:         new r.Array(FeatureEntry, 'nFeatureEntries'),\n  subtables:        new r.Array(Subtable, 'nSubtables')\n});\n\nexport default new r.Struct({\n  version:  r.uint16,\n  unused:   new r.Reserved(r.uint16),\n  nChains:  r.uint32,\n  chains:   new r.Array(MorxChain, 'nChains')\n});\n","import r from 'restructure';\nimport { LookupTable } from './aat';\n\nlet OpticalBounds = new r.Struct({\n  left: r.int16,\n  top: r.int16,\n  right: r.int16,\n  bottom: r.int16\n});\n\nexport default new r.Struct({\n  version: r.fixed32,\n  format: r.uint16,\n  lookupTable: new LookupTable(OpticalBounds)\n});\n","let tables = {};\nexport default tables;\n\n// Required Tables\nimport cmap from './cmap';\nimport head from './head';\nimport hhea from './hhea';\nimport hmtx from './hmtx';\nimport maxp from './maxp';\nimport name from './name';\nimport OS2 from './OS2';\nimport post from './post';\n\ntables.cmap = cmap;\ntables.head = head;\ntables.hhea = hhea;\ntables.hmtx = hmtx;\ntables.maxp = maxp;\ntables.name = name;\ntables['OS/2'] = OS2;\ntables.post = post;\n\n\n// TrueType Outlines\nimport cvt from './cvt';\nimport fpgm from './fpgm';\nimport loca from './loca';\nimport prep from './prep';\nimport glyf from './glyf';\n\ntables.fpgm = fpgm;\ntables.loca = loca;\ntables.prep = prep;\ntables['cvt '] = cvt;\ntables.glyf = glyf;\n\n\n// PostScript Outlines\nimport CFFFont from '../cff/CFFFont';\nimport VORG from './VORG';\n\ntables['CFF '] = CFFFont;\ntables.VORG = VORG;\n\n\n// Bitmap Glyphs\nimport EBLC from './EBLC';\nimport sbix from './sbix';\nimport COLR from './COLR';\nimport CPAL from './CPAL';\n\ntables.EBLC = EBLC;\ntables.CBLC = tables.EBLC;\ntables.sbix = sbix;\ntables.COLR = COLR;\ntables.CPAL = CPAL;\n\n\n// Advanced OpenType Tables\nimport BASE from './BASE';\nimport GDEF from './GDEF';\nimport GPOS from './GPOS';\nimport GSUB from './GSUB';\nimport JSTF from './JSTF';\n\ntables.BASE = BASE;\ntables.GDEF = GDEF;\ntables.GPOS = GPOS;\ntables.GSUB = GSUB;\ntables.JSTF = JSTF;\n\n\n// Other OpenType Tables\nimport DSIG from './DSIG';\nimport gasp from './gasp';\nimport hdmx from './hdmx';\nimport kern from './kern';\nimport LTSH from './LTSH';\nimport PCLT from './PCLT';\nimport VDMX from './VDMX';\nimport vhea from './vhea';\nimport vmtx from './vmtx';\n\ntables.DSIG = DSIG;\ntables.gasp = gasp;\ntables.hdmx = hdmx;\ntables.kern = kern;\ntables.LTSH = LTSH;\ntables.PCLT = PCLT;\ntables.VDMX = VDMX;\ntables.vhea = vhea;\ntables.vmtx = vmtx;\n\n\n// Apple Advanced Typography Tables\nimport avar from './avar';\nimport bsln from './bsln';\nimport feat from './feat';\nimport fvar from './fvar';\nimport gvar from './gvar';\nimport just from './just';\nimport morx from './morx';\nimport opbd from './opbd';\n\ntables.avar = avar;\ntables.bsln = bsln;\ntables.feat = feat;\ntables.fvar = fvar;\ntables.gvar = gvar;\ntables.just = just;\ntables.morx = morx;\ntables.opbd = opbd;\n","import r from 'restructure';\nimport Tables from './';\n\nlet TableEntry = new r.Struct({\n  tag:        new r.String(4),\n  checkSum:   r.uint32,\n  offset:     new r.Pointer(r.uint32, 'void', { type: 'global' }),\n  length:     r.uint32\n});\n\nlet Directory = new r.Struct({\n  tag:            new r.String(4),\n  numTables:      r.uint16,\n  searchRange:    r.uint16,\n  entrySelector:  r.uint16,\n  rangeShift:     r.uint16,\n  tables:         new r.Array(TableEntry, 'numTables')\n});\n\nDirectory.process = function() {\n  let tables = {};\n  for (let table of this.tables) {\n    tables[table.tag] = table;\n  }\n\n  this.tables = tables;\n};\n\nDirectory.preEncode = function(stream) {\n  let tables = [];\n  for (let tag in this.tables) {\n    let table = this.tables[tag];\n    if (table) {\n      tables.push({\n        tag: tag,\n        checkSum: 0,\n        offset: new r.VoidPointer(Tables[tag], table),\n        length: Tables[tag].size(table)\n      });\n    }\n  }\n\n  this.tag = 'true';\n  this.numTables = tables.length;\n  this.tables = tables;\n\n  this.searchRange = Math.floor(Math.log(this.numTables) / Math.LN2) * 16;\n  this.entrySelector = Math.floor(this.searchRange / Math.LN2);\n  this.rangeShift = this.numTables * 16 - this.searchRange;\n};\n\nexport default Directory;\n","export default class CmapProcessor {\n  constructor(cmapTable) {\n    this._characterSet = null;\n\n    // find the unicode cmap\n    // check for a 32-bit cmap first\n    for (let cmap of cmapTable.tables) {\n      // unicode or windows platform\n      if ((cmap.platformID === 0 && (cmap.encodingID === 4 || cmap.encodingID === 6)) || (cmap.platformID === 3 && cmap.encodingID === 10)) {\n        this.cmap = cmap.table;\n        return;\n      }\n    }\n\n    // try \"old\" 16-bit cmap\n    for (let cmap of cmapTable.tables) {\n      if (cmap.platformID === 0 || (cmap.platformID === 3 && cmap.encodingID === 1)) {\n        this.cmap = cmap.table;\n        return;\n      }\n    }\n\n    throw new Error(\"Could not find a unicode cmap\");\n  }\n\n  lookup(codepoint) {\n    let cmap = this.cmap;\n    switch (cmap.version) {\n      case 0:\n        return cmap.codeMap.get(codepoint) || 0;\n\n      case 4: {\n        let min = 0;\n        let max = cmap.segCount - 1;\n        while (min <= max) {\n          let mid = (min + max) >> 1;\n\n          if (codepoint < cmap.startCode.get(mid)) {\n            max = mid - 1;\n          } else if (codepoint > cmap.endCode.get(mid)) {\n            min = mid + 1;\n          } else {\n            let rangeOffset = cmap.idRangeOffset.get(mid);\n            let gid;\n\n            if (rangeOffset === 0) {\n              gid = codepoint + cmap.idDelta.get(mid);\n            } else {\n              let index = rangeOffset / 2 + (codepoint - cmap.startCode.get(mid)) - (cmap.segCount - mid);\n              gid = cmap.glyphIndexArray.get(index) || 0;\n              if (gid !== 0) {\n                gid += cmap.idDelta.get(mid);\n              }\n            }\n\n            return gid & 0xffff;\n          }\n        }\n\n        return 0;\n      }\n\n      case 8:\n        throw new Error('TODO: cmap format 8');\n\n      case 6:\n      case 10:\n        return cmap.glyphIndices.get(codepoint - cmap.firstCode) || 0;\n\n      case 12:\n      case 13: {\n        let min = 0;\n        let max = cmap.nGroups - 1;\n        while (min <= max) {\n          let mid = (min + max) >> 1;\n          let group = cmap.groups.get(mid);\n\n          if (codepoint < group.startCharCode) {\n            max = mid - 1;\n          } else if (codepoint > group.endCharCode) {\n            min = mid + 1;\n          } else {\n            if (cmap.version === 12) {\n              return group.glyphID + (codepoint - group.startCharCode);\n            } else {\n              return group.glyphID;\n            }\n          }\n        }\n\n        return 0;\n      }\n\n      case 14:\n        throw new Error('TODO: cmap format 14');\n\n      default:\n        throw new Error(`Unknown cmap format ${cmap.version}`);\n    }\n  }\n\n  getCharacterSet() {\n    if (this._characterSet) {\n      return this._characterSet;\n    }\n\n    let cmap = this.cmap;\n    switch (cmap.version) {\n      case 0:\n        return this._characterSet = range(0, cmap.codeMap.length);\n\n      case 4: {\n        let res = [];\n        let endCodes = cmap.endCode.toArray();\n        for (let i = 0; i < endCodes.length; i++) {\n          let tail = endCodes[i] + 1;\n          let start = cmap.startCode.get(i);\n          res.push(...range(start, tail));\n        }\n\n        return this._characterSet = res;\n      }\n\n      case 8:\n        throw new Error('TODO: cmap format 8');\n\n      case 6:\n      case 10:\n        return this._characterSet = range(cmap.firstCode, cmap.firstCode + cmap.glyphIndices.length);\n\n      case 12:\n      case 13: {\n        let res = [];\n        for (let group of cmap.groups.toArray()) {\n          res.push(...range(group.startCharCode, group.endCharCode + 1));\n        }\n\n        return this._characterSet = res;\n      }\n\n      case 14:\n        throw new Error('TODO: cmap format 14');\n\n      default:\n        throw new Error(`Unknown cmap format ${cmap.version}`);\n    }\n  }\n}\n\nfunction range(index, end) {\n  let range = [];\n  while (index < end) {\n    range.push(index++);\n  }\n  return range;\n}\n","export default class KernProcessor {\n  constructor(font) {\n    this.kern = font.kern;\n  }\n\n  process(glyphs, positions) {\n    for (let glyphIndex = 0; glyphIndex < glyphs.length - 1; glyphIndex++) {\n      let left = glyphs[glyphIndex].id;\n      let right = glyphs[glyphIndex + 1].id;\n      positions[glyphIndex].xAdvance += this.getKerning(left, right);\n    }\n  }\n\n  getKerning(left, right) {\n    let res = 0;\n\n    for (let table of this.kern.tables) {\n      if (table.coverage.crossStream) {\n        continue;\n      }\n\n      switch (table.version) {\n        case 0:\n          if (!table.coverage.horizontal) {\n            continue;\n          }\n\n          break;\n        case 1:\n          if (table.coverage.vertical || table.coverage.variation) {\n            continue;\n          }\n\n          break;\n        default:\n          throw new Error(`Unsupported kerning table version ${table.version}`);\n      }\n\n      let val = 0;\n      let s = table.subtable;\n      switch (table.format) {\n        case 0:\n          // TODO: binary search\n          for (let pair of s.pairs) {\n            if (pair.left === left && pair.right === right) {\n              val = pair.value;\n              break;\n            }\n          }\n\n          break;\n\n        case 2:\n          let leftOffset = 0, rightOffset = 0;\n          if (left >= s.leftTable.firstGlyph && left < s.leftTable.firstGlyph + s.leftTable.nGlyphs) {\n            leftOffset = s.leftTable.offsets[left - s.leftTable.firstGlyph];\n          } else {\n            leftOffset = s.array.off;\n          }\n\n          if (right >= s.rightTable.firstGlyph && right < s.rightTable.firstGlyph + s.rightTable.nGlyphs) {\n            rightOffset = s.rightTable.offsets[right - s.rightTable.firstGlyph];\n          }\n\n          let index = (leftOffset + rightOffset - s.array.off) / 2;\n          val = s.array.values.get(index);\n          break;\n\n        case 3:\n          if (left >= s.glyphCount || right >= s.glyphCount) {\n            return 0;\n          }\n\n          val = s.kernValue[s.kernIndex[s.leftClass[left] * s.rightClassCount + s.rightClass[right]]];\n          break;\n\n        default:\n          throw new Error(`Unsupported kerning sub-table format ${table.format}`);\n      }\n\n      // Microsoft supports the override flag, which resets the result\n      // Otherwise, the sum of the results from all subtables is returned\n      if (table.coverage.override) {\n        res = val;\n      } else {\n        res += val;\n      }\n    }\n\n    return res;\n  }\n}\n","import unicode from 'unicode-properties';\n\n/**\n * This class is used when GPOS does not define 'mark' or 'mkmk' features\n * for positioning marks relative to base glyphs. It uses the unicode\n * combining class property to position marks.\n *\n * Based on code from Harfbuzz, thanks!\n * https://github.com/behdad/harfbuzz/blob/master/src/hb-ot-shape-fallback.cc\n */\nexport default class UnicodeLayoutEngine {\n  constructor(font) {\n    this.font = font;\n  }\n\n  positionGlyphs(glyphs, positions) {\n    // find each base + mark cluster, and position the marks relative to the base\n    let clusterStart = 0;\n    let clusterEnd = 0;\n    for (let index = 0; index < glyphs.length; index++) {\n      let glyph = glyphs[index];\n      if (glyph.isMark) { // TODO: handle ligatures\n        clusterEnd = index;\n      } else {\n        if (clusterStart !== clusterEnd) {\n          this.positionCluster(glyphs, positions, clusterStart, clusterEnd);\n        }\n\n        clusterStart = clusterEnd = index;\n      }\n    }\n\n    if (clusterStart !== clusterEnd) {\n      this.positionCluster(glyphs, positions, clusterStart, clusterEnd);\n    }\n\n    return positions;\n  }\n\n  positionCluster(glyphs, positions, clusterStart, clusterEnd) {\n    let base = glyphs[clusterStart];\n    let baseBox = base.cbox.copy();\n\n    // adjust bounding box for ligature glyphs\n    if (base.codePoints.length > 1) {\n      // LTR. TODO: RTL support.\n      baseBox.minX += ((base.codePoints.length - 1) * baseBox.width) / base.codePoints.length;\n    }\n\n    let xOffset = -positions[clusterStart].xAdvance;\n    let yOffset = 0;\n    let yGap = this.font.unitsPerEm / 16;\n\n    // position each of the mark glyphs relative to the base glyph\n    for (let index = clusterStart + 1; index <= clusterEnd; index++) {\n      let mark = glyphs[index];\n      let markBox = mark.cbox;\n      let position = positions[index];\n\n      let combiningClass = this.getCombiningClass(mark.codePoints[0]);\n\n      if (combiningClass !== 'Not_Reordered') {\n        position.xOffset = position.yOffset = 0;\n\n        // x positioning\n        switch (combiningClass) {\n          case 'Double_Above':\n          case 'Double_Below':\n            // LTR. TODO: RTL support.\n            position.xOffset += baseBox.minX - markBox.width / 2 - markBox.minX;\n            break;\n\n          case 'Attached_Below_Left':\n          case 'Below_Left':\n          case 'Above_Left':\n            // left align\n            position.xOffset += baseBox.minX - markBox.minX;\n            break;\n\n          case 'Attached_Above_Right':\n          case 'Below_Right':\n          case 'Above_Right':\n            // right align\n            position.xOffset += baseBox.maxX - markBox.width - markBox.minX;\n            break;\n\n          default: // Attached_Below, Attached_Above, Below, Above, other\n            // center align\n            position.xOffset += baseBox.minX + (baseBox.width - markBox.width) / 2 - markBox.minX;\n        }\n\n        // y positioning\n        switch (combiningClass) {\n          case 'Double_Below':\n          case 'Below_Left':\n          case 'Below':\n          case 'Below_Right':\n          case 'Attached_Below_Left':\n          case 'Attached_Below':\n            // add a small gap between the glyphs if they are not attached\n            if (combiningClass === 'Attached_Below_Left' || combiningClass === 'Attached_Below') {\n              baseBox.minY += yGap;\n            }\n\n            position.yOffset = -baseBox.minY - markBox.maxY;\n            baseBox.minY += markBox.height;\n            break;\n\n          case 'Double_Above':\n          case 'Above_Left':\n          case 'Above':\n          case 'Above_Right':\n          case 'Attached_Above':\n          case 'Attached_Above_Right':\n            // add a small gap between the glyphs if they are not attached\n            if (combiningClass === 'Attached_Above' || combiningClass === 'Attached_Above_Right') {\n              baseBox.maxY += yGap;\n            }\n\n            position.yOffset = baseBox.maxY - markBox.minY;\n            baseBox.maxY += markBox.height;\n            break;\n        }\n\n        position.xAdvance = position.yAdvance = 0;\n        position.xOffset += xOffset;\n        position.yOffset += yOffset;\n\n      } else {\n        xOffset -= position.xAdvance;\n        yOffset -= position.yAdvance;\n      }\n    }\n\n    return;\n  }\n\n  getCombiningClass(codePoint) {\n    let combiningClass = unicode.getCombiningClass(codePoint);\n\n    // Thai / Lao need some per-character work\n    if ((codePoint & ~0xff) === 0x0e00) {\n      if (combiningClass === 'Not_Reordered') {\n        switch (codePoint) {\n          case 0x0e31:\n          case 0x0e34:\n          case 0x0e35:\n          case 0x0e36:\n          case 0x0e37:\n          case 0x0e47:\n          case 0x0e4c:\n          case 0x0e3d:\n          case 0x0e4e:\n            return 'Above_Right';\n\n          case 0x0eb1:\n          case 0x0eb4:\n          case 0x0eb5:\n          case 0x0eb6:\n          case 0x0eb7:\n          case 0x0ebb:\n          case 0x0ecc:\n          case 0x0ecd:\n            return 'Above';\n\n          case 0x0ebc:\n            return 'Below';\n        }\n      } else if (codePoint === 0x0e3a) { // virama\n        return 'Below_Right';\n      }\n    }\n\n    switch (combiningClass) {\n      // Hebrew\n\n      case 'CCC10': // sheva\n      case 'CCC11': // hataf segol\n      case 'CCC12': // hataf patah\n      case 'CCC13': // hataf qamats\n      case 'CCC14': // hiriq\n      case 'CCC15': // tsere\n      case 'CCC16': // segol\n      case 'CCC17': // patah\n      case 'CCC18': // qamats\n      case 'CCC20': // qubuts\n      case 'CCC22': // meteg\n        return 'Below';\n\n      case 'CCC23': // rafe\n        return 'Attached_Above';\n\n      case 'CCC24': // shin dot\n        return 'Above_Right';\n\n      case 'CCC25': // sin dot\n      case 'CCC19': // holam\n        return 'Above_Left';\n\n      case 'CCC26': // point varika\n        return 'Above';\n\n      case 'CCC21': // dagesh\n        break;\n\n      // Arabic and Syriac\n\n      case 'CCC27': // fathatan\n      case 'CCC28': // dammatan\n      case 'CCC30': // fatha\n      case 'CCC31': // damma\n      case 'CCC33': // shadda\n      case 'CCC34': // sukun\n      case 'CCC35': // superscript alef\n      case 'CCC36': // superscript alaph\n        return 'Above';\n\n      case 'CCC29': // kasratan\n      case 'CCC32': // kasra\n        return 'Below';\n\n      // Thai\n\n      case 'CCC103': // sara u / sara uu\n        return 'Below_Right';\n\n      case 'CCC107': // mai\n        return 'Above_Right';\n\n      // Lao\n\n      case 'CCC118': // sign u / sign uu\n        return 'Below';\n\n      case 'CCC122': // mai\n        return 'Above';\n\n      // Tibetan\n\n      case 'CCC129': // sign aa\n      case 'CCC132': // sign u\n        return 'Below';\n\n      case 'CCC130': // sign i\n        return 'Above';\n    }\n\n    return combiningClass;\n  }\n}\n","/**\n * Represents a glyph bounding box\n */\nexport default class BBox {\n  constructor(minX = Infinity, minY = Infinity, maxX = -Infinity, maxY = -Infinity) {\n    /**\n     * The minimum X position in the bounding box\n     * @type {number}\n     */\n    this.minX = minX;\n\n    /**\n     * The minimum Y position in the bounding box\n     * @type {number}\n     */\n    this.minY = minY;\n\n    /**\n     * The maxmimum X position in the bounding box\n     * @type {number}\n     */\n    this.maxX = maxX;\n\n    /**\n     * The maxmimum Y position in the bounding box\n     * @type {number}\n     */\n    this.maxY = maxY;\n  }\n\n  /**\n   * The width of the bounding box\n   * @type {number}\n   */\n  get width() {\n    return this.maxX - this.minX;\n  }\n\n  /**\n   * The height of the bounding box\n   * @type {number}\n   */\n  get height() {\n    return this.maxY - this.minY;\n  }\n\n  addPoint(x, y) {\n    if (x < this.minX) {\n      this.minX = x;\n    }\n\n    if (y < this.minY) {\n      this.minY = y;\n    }\n\n    if (x > this.maxX) {\n      this.maxX = x;\n    }\n\n    if (y > this.maxY) {\n      this.maxY = y;\n    }\n  }\n\n  copy() {\n    return new BBox(this.minX, this.minY, this.maxX, this.maxY);\n  }\n}\n","import BBox from '../glyph/BBox';\n\n/**\n * Represents a run of Glyph and GlyphPosition objects.\n * Returned by the font layout method.\n */\nexport default class GlyphRun {\n  constructor(glyphs, positions) {\n    /**\n     * An array of Glyph objects in the run\n     * @type {Glyph[]}\n     */\n    this.glyphs = glyphs;\n\n    /**\n     * An array of GlyphPosition objects for each glyph in the run\n     * @type {GlyphPosition[]}\n     */\n    this.positions = positions;\n  }\n\n  /**\n   * The total advance width of the run.\n   * @type {number}\n   */\n  get advanceWidth() {\n    let width = 0;\n    for (let position of this.positions) {\n      width += position.xAdvance;\n    }\n\n    return width;\n  }\n\n /**\n  * The total advance height of the run.\n  * @type {number}\n  */\n  get advanceHeight() {\n    let height = 0;\n    for (let position of this.positions) {\n      height += position.yAdvance;\n    }\n\n    return height;\n  }\n\n /**\n  * The bounding box containing all glyphs in the run.\n  * @type {BBox}\n  */\n  get bbox() {\n    let bbox = new BBox;\n\n    let x = 0;\n    let y = 0;\n    for (let index = 0; index < this.glyphs.length; index++) {\n      let glyph = this.glyphs[index];\n      let p = this.positions[index];\n      let b = glyph.bbox;\n\n      bbox.addPoint(b.minX + x + p.xOffset, b.minY + y + p.yOffset);\n      bbox.addPoint(b.maxX + x + p.xOffset, b.maxY + y + p.yOffset);\n\n      x += p.xAdvance;\n      y += p.yAdvance;\n    }\n\n    return bbox;\n  }\n}\n","/**\n * Represents positioning information for a glyph in a GlyphRun.\n */\nexport default class GlyphPosition {\n  constructor(xAdvance = 0, yAdvance = 0, xOffset = 0, yOffset = 0) {\n    /**\n     * The amount to move the virtual pen in the X direction after rendering this glyph.\n     * @type {number}\n     */\n    this.xAdvance = xAdvance;\n\n    /**\n     * The amount to move the virtual pen in the Y direction after rendering this glyph.\n     * @type {number}\n     */\n    this.yAdvance = yAdvance;\n\n    /**\n     * The offset from the pen position in the X direction at which to render this glyph.\n     * @type {number}\n     */\n    this.xOffset = xOffset;\n\n    /**\n     * The offset from the pen position in the Y direction at which to render this glyph.\n     * @type {number}\n     */\n    this.yOffset = yOffset;\n  }\n}\n","import unicode from 'unicode-properties';\n\n// This maps the Unicode Script property to an OpenType script tag\n// Data from http://www.microsoft.com/typography/otspec/scripttags.htm\n// and http://www.unicode.org/Public/UNIDATA/PropertyValueAliases.txt.\nconst UNICODE_SCRIPTS = {\n  Caucasian_Albanian: 'aghb',\n  Arabic: 'arab',\n  Imperial_Aramaic: 'armi',\n  Armenian: 'armn',\n  Avestan: 'avst',\n  Balinese: 'bali',\n  Bamum: 'bamu',\n  Bassa_Vah: 'bass',\n  Batak: 'batk',\n  Bengali: ['bng2', 'beng'],\n  Bopomofo: 'bopo',\n  Brahmi: 'brah',\n  Braille: 'brai',\n  Buginese: 'bugi',\n  Buhid: 'buhd',\n  Chakma: 'cakm',\n  Canadian_Aboriginal: 'cans',\n  Carian: 'cari',\n  Cham: 'cham',\n  Cherokee: 'cher',\n  Coptic: 'copt',\n  Cypriot: 'cprt',\n  Cyrillic: 'cyrl',\n  Devanagari: ['dev2', 'deva'],\n  Deseret: 'dsrt',\n  Duployan: 'dupl',\n  Egyptian_Hieroglyphs: 'egyp',\n  Elbasan: 'elba',\n  Ethiopic: 'ethi',\n  Georgian: 'geor',\n  Glagolitic: 'glag',\n  Gothic: 'goth',\n  Grantha: 'gran',\n  Greek: 'grek',\n  Gujarati: ['gjr2', 'gujr'],\n  Gurmukhi: ['gur2', 'guru'],\n  Hangul: 'hang',\n  Han: 'hani',\n  Hanunoo: 'hano',\n  Hebrew: 'hebr',\n  Hiragana: 'hira',\n  Pahawh_Hmong: 'hmng',\n  Katakana_Or_Hiragana: 'hrkt',\n  Old_Italic: 'ital',\n  Javanese: 'java',\n  Kayah_Li: 'kali',\n  Katakana: 'kana',\n  Kharoshthi: 'khar',\n  Khmer: 'khmr',\n  Khojki: 'khoj',\n  Kannada: ['knd2', 'knda'],\n  Kaithi: 'kthi',\n  Tai_Tham: 'lana',\n  Lao: 'lao ',\n  Latin: 'latn',\n  Lepcha: 'lepc',\n  Limbu: 'limb',\n  Linear_A: 'lina',\n  Linear_B: 'linb',\n  Lisu: 'lisu',\n  Lycian: 'lyci',\n  Lydian: 'lydi',\n  Mahajani: 'mahj',\n  Mandaic: 'mand',\n  Manichaean: 'mani',\n  Mende_Kikakui: 'mend',\n  Meroitic_Cursive: 'merc',\n  Meroitic_Hieroglyphs: 'mero',\n  Malayalam: ['mlm2', 'mlym'],\n  Modi: 'modi',\n  Mongolian: 'mong',\n  Mro: 'mroo',\n  Meetei_Mayek: 'mtei',\n  Myanmar: ['mym2', 'mymr'],\n  Old_North_Arabian: 'narb',\n  Nabataean: 'nbat',\n  Nko: 'nko ',\n  Ogham: 'ogam',\n  Ol_Chiki: 'olck',\n  Old_Turkic: 'orkh',\n  Oriya: 'orya',\n  Osmanya: 'osma',\n  Palmyrene: 'palm',\n  Pau_Cin_Hau: 'pauc',\n  Old_Permic: 'perm',\n  Phags_Pa: 'phag',\n  Inscriptional_Pahlavi: 'phli',\n  Psalter_Pahlavi: 'phlp',\n  Phoenician: 'phnx',\n  Miao: 'plrd',\n  Inscriptional_Parthian: 'prti',\n  Rejang: 'rjng',\n  Runic: 'runr',\n  Samaritan: 'samr',\n  Old_South_Arabian: 'sarb',\n  Saurashtra: 'saur',\n  Shavian: 'shaw',\n  Sharada: 'shrd',\n  Siddham: 'sidd',\n  Khudawadi: 'sind',\n  Sinhala: 'sinh',\n  Sora_Sompeng: 'sora',\n  Sundanese: 'sund',\n  Syloti_Nagri: 'sylo',\n  Syriac: 'syrc',\n  Tagbanwa: 'tagb',\n  Takri: 'takr',\n  Tai_Le: 'tale',\n  New_Tai_Lue: 'talu',\n  Tamil: 'taml',\n  Tai_Viet: 'tavt',\n  Telugu: ['tel2', 'telu'],\n  Tifinagh: 'tfng',\n  Tagalog: 'tglg',\n  Thaana: 'thaa',\n  Thai: 'thai',\n  Tibetan: 'tibt',\n  Tirhuta: 'tirh',\n  Ugaritic: 'ugar',\n  Vai: 'vai ',\n  Warang_Citi: 'wara',\n  Old_Persian: 'xpeo',\n  Cuneiform: 'xsux',\n  Yi: 'yi  ',\n  Inherited: 'zinh',\n  Common: 'zyyy',\n  Unknown: 'zzzz'\n};\n\nexport function fromUnicode(script) {\n  return UNICODE_SCRIPTS[script];\n}\n\nexport function forString(string) {\n  let len = string.length;\n  let idx = 0;\n  while (idx < len) {\n    let code = string.charCodeAt(idx++);\n\n    // Check if this is a high surrogate\n    if (0xd800 <= code && code <= 0xdbff && idx < len) {\n      let next = string.charCodeAt(idx);\n\n      // Check if this is a low surrogate\n      if (0xdc00 <= next && next <= 0xdfff) {\n        idx++;\n        code = ((code & 0x3FF) << 10) + (next & 0x3FF) + 0x10000;\n      }\n    }\n\n    let script = unicode.getScript(code);\n    if (script !== 'Common' && script !== 'Inherited' && script !== 'Unknown') {\n      return UNICODE_SCRIPTS[script];\n    }\n  }\n\n  return UNICODE_SCRIPTS.Unknown;\n}\n\nexport function forCodePoints(codePoints) {\n  for (let i = 0; i < codePoints.length; i++) {\n    let codePoint = codePoints[i];\n    let script = unicode.getScript(codePoint);\n    if (script !== 'Common' && script !== 'Inherited' && script !== 'Unknown') {\n      return UNICODE_SCRIPTS[script];\n    }\n  }\n\n  return UNICODE_SCRIPTS.Unknown;\n}\n\n// The scripts in this map are written from right to left\nconst RTL = {\n  arab: true,   // Arabic\n  hebr: true,   // Hebrew\n  syrc: true,   // Syriac\n  thaa: true,   // Thaana\n  cprt: true,   // Cypriot Syllabary\n  khar: true,   // Kharosthi\n  phnx: true,   // Phoenician\n  'nko ': true, // N'Ko\n  lydi: true,   // Lydian\n  avst: true,   // Avestan\n  armi: true,   // Imperial Aramaic\n  phli: true,   // Inscriptional Pahlavi\n  prti: true,   // Inscriptional Parthian\n  sarb: true,   // Old South Arabian\n  orkh: true,   // Old Turkic, Orkhon Runic\n  samr: true,   // Samaritan\n  mand: true,   // Mandaic, Mandaean\n  merc: true,   // Meroitic Cursive\n  mero: true,   // Meroitic Hieroglyphs\n\n  // Unicode 7.0 (not listed on http://www.microsoft.com/typography/otspec/scripttags.htm)\n  mani: true,   // Manichaean\n  mend: true,   // Mende Kikakui\n  nbat: true,   // Nabataean\n  narb: true,   // Old North Arabian\n  palm: true,   // Palmyrene\n  phlp: true    // Psalter Pahlavi\n};\n\nexport function direction(script) {\n  if (RTL[script]) {\n    return 'rtl';\n  }\n\n  return 'ltr';\n}\n","// see https://developer.apple.com/fonts/TrueType-Reference-Manual/RM09/AppendixF.html\n// and /System/Library/Frameworks/CoreText.framework/Versions/A/Headers/SFNTLayoutTypes.h on a Mac\nconst features = {\n  allTypographicFeatures: {\n    code: 0,\n    exclusive: false,\n    allTypeFeatures: 0\n  },\n  ligatures: {\n    code: 1,\n    exclusive: false,\n    requiredLigatures: 0,\n    commonLigatures: 2,\n    rareLigatures: 4,\n    // logos: 6\n    rebusPictures: 8,\n    diphthongLigatures: 10,\n    squaredLigatures: 12,\n    abbrevSquaredLigatures: 14,\n    symbolLigatures: 16,\n    contextualLigatures: 18,\n    historicalLigatures: 20\n  },\n  cursiveConnection: {\n    code: 2,\n    exclusive: true,\n    unconnected: 0,\n    partiallyConnected: 1,\n    cursive: 2\n  },\n  letterCase: {\n    code: 3,\n    exclusive: true\n  },\n    // upperAndLowerCase: 0          # deprecated\n    // allCaps: 1                    # deprecated\n    // allLowerCase: 2               # deprecated\n    // smallCaps: 3                  # deprecated\n    // initialCaps: 4                # deprecated\n    // initialCapsAndSmallCaps: 5    # deprecated\n  verticalSubstitution: {\n    code: 4,\n    exclusive: false,\n    substituteVerticalForms: 0\n  },\n  linguisticRearrangement: {\n    code: 5,\n    exclusive: false,\n    linguisticRearrangement: 0\n  },\n  numberSpacing: {\n    code: 6,\n    exclusive: true,\n    monospacedNumbers: 0,\n    proportionalNumbers: 1,\n    thirdWidthNumbers: 2,\n    quarterWidthNumbers: 3\n  },\n  smartSwash: {\n    code: 8,\n    exclusive: false,\n    wordInitialSwashes: 0,\n    wordFinalSwashes: 2,\n    // lineInitialSwashes: 4\n    // lineFinalSwashes: 6\n    nonFinalSwashes: 8\n  },\n  diacritics: {\n    code: 9,\n    exclusive: true,\n    showDiacritics: 0,\n    hideDiacritics: 1,\n    decomposeDiacritics: 2\n  },\n  verticalPosition: {\n    code: 10,\n    exclusive: true,\n    normalPosition: 0,\n    superiors: 1,\n    inferiors: 2,\n    ordinals: 3,\n    scientificInferiors: 4\n  },\n  fractions: {\n    code: 11,\n    exclusive: true,\n    noFractions: 0,\n    verticalFractions: 1,\n    diagonalFractions: 2\n  },\n  overlappingCharacters: {\n    code: 13,\n    exclusive: false,\n    preventOverlap: 0\n  },\n  typographicExtras: {\n    code: 14,\n    exclusive: false,\n    // hyphensToEmDash: 0\n    // hyphenToEnDash: 2\n    slashedZero: 4\n  },\n    // formInterrobang: 6\n    // smartQuotes: 8\n    // periodsToEllipsis: 10\n  mathematicalExtras: {\n    code: 15,\n    exclusive: false,\n    // hyphenToMinus: 0\n    // asteristoMultiply: 2\n    // slashToDivide: 4\n    // inequalityLigatures: 6\n    // exponents: 8\n    mathematicalGreek: 10\n  },\n  ornamentSets: {\n    code: 16,\n    exclusive: true,\n    noOrnaments: 0,\n    dingbats: 1,\n    piCharacters: 2,\n    fleurons: 3,\n    decorativeBorders: 4,\n    internationalSymbols: 5,\n    mathSymbols: 6\n  },\n  characterAlternatives: {\n    code: 17,\n    exclusive: true,\n    noAlternates: 0\n  },\n    // user defined options\n  designComplexity: {\n    code: 18,\n    exclusive: true,\n    designLevel1: 0,\n    designLevel2: 1,\n    designLevel3: 2,\n    designLevel4: 3,\n    designLevel5: 4\n  },\n  styleOptions: {\n    code: 19,\n    exclusive: true,\n    noStyleOptions: 0,\n    displayText: 1,\n    engravedText: 2,\n    illuminatedCaps: 3,\n    titlingCaps: 4,\n    tallCaps: 5\n  },\n  characterShape: {\n    code: 20,\n    exclusive: true,\n    traditionalCharacters: 0,\n    simplifiedCharacters: 1,\n    JIS1978Characters: 2,\n    JIS1983Characters: 3,\n    JIS1990Characters: 4,\n    traditionalAltOne: 5,\n    traditionalAltTwo: 6,\n    traditionalAltThree: 7,\n    traditionalAltFour: 8,\n    traditionalAltFive: 9,\n    expertCharacters: 10,\n    JIS2004Characters: 11,\n    hojoCharacters: 12,\n    NLCCharacters: 13,\n    traditionalNamesCharacters: 14\n  },\n  numberCase: {\n    code: 21,\n    exclusive: true,\n    lowerCaseNumbers: 0,\n    upperCaseNumbers: 1\n  },\n  textSpacing: {\n    code: 22,\n    exclusive: true,\n    proportionalText: 0,\n    monospacedText: 1,\n    halfWidthText: 2,\n    thirdWidthText: 3,\n    quarterWidthText: 4,\n    altProportionalText: 5,\n    altHalfWidthText: 6\n  },\n  transliteration: {\n    code: 23,\n    exclusive: true,\n    noTransliteration: 0\n  },\n    // hanjaToHangul: 1\n    // hiraganaToKatakana: 2\n    // katakanaToHiragana: 3\n    // kanaToRomanization: 4\n    // romanizationToHiragana: 5\n    // romanizationToKatakana: 6\n    // hanjaToHangulAltOne: 7\n    // hanjaToHangulAltTwo: 8\n    // hanjaToHangulAltThree: 9\n  annotation: {\n    code: 24,\n    exclusive: true,\n    noAnnotation: 0,\n    boxAnnotation: 1,\n    roundedBoxAnnotation: 2,\n    circleAnnotation: 3,\n    invertedCircleAnnotation: 4,\n    parenthesisAnnotation: 5,\n    periodAnnotation: 6,\n    romanNumeralAnnotation: 7,\n    diamondAnnotation: 8,\n    invertedBoxAnnotation: 9,\n    invertedRoundedBoxAnnotation: 10\n  },\n  kanaSpacing: {\n    code: 25,\n    exclusive: true,\n    fullWidthKana: 0,\n    proportionalKana: 1\n  },\n  ideographicSpacing: {\n    code: 26,\n    exclusive: true,\n    fullWidthIdeographs: 0,\n    proportionalIdeographs: 1,\n    halfWidthIdeographs: 2\n  },\n  unicodeDecomposition: {\n    code: 27,\n    exclusive: false,\n    canonicalComposition: 0,\n    compatibilityComposition: 2,\n    transcodingComposition: 4\n  },\n  rubyKana: {\n    code: 28,\n    exclusive: false,\n    // noRubyKana: 0     # deprecated - use rubyKanaOff instead\n    // rubyKana: 1     # deprecated - use rubyKanaOn instead\n    rubyKana: 2\n  },\n  CJKSymbolAlternatives: {\n    code: 29,\n    exclusive: true,\n    noCJKSymbolAlternatives: 0,\n    CJKSymbolAltOne: 1,\n    CJKSymbolAltTwo: 2,\n    CJKSymbolAltThree: 3,\n    CJKSymbolAltFour: 4,\n    CJKSymbolAltFive: 5\n  },\n  ideographicAlternatives: {\n    code: 30,\n    exclusive: true,\n    noIdeographicAlternatives: 0,\n    ideographicAltOne: 1,\n    ideographicAltTwo: 2,\n    ideographicAltThree: 3,\n    ideographicAltFour: 4,\n    ideographicAltFive: 5\n  },\n  CJKVerticalRomanPlacement: {\n    code: 31,\n    exclusive: true,\n    CJKVerticalRomanCentered: 0,\n    CJKVerticalRomanHBaseline: 1\n  },\n  italicCJKRoman: {\n    code: 32,\n    exclusive: false,\n    // noCJKItalicRoman: 0     # deprecated - use CJKItalicRomanOff instead\n    // CJKItalicRoman: 1     # deprecated - use CJKItalicRomanOn instead\n    CJKItalicRoman: 2\n  },\n  caseSensitiveLayout: {\n    code: 33,\n    exclusive: false,\n    caseSensitiveLayout: 0,\n    caseSensitiveSpacing: 2\n  },\n  alternateKana: {\n    code: 34,\n    exclusive: false,\n    alternateHorizKana: 0,\n    alternateVertKana: 2\n  },\n  stylisticAlternatives: {\n    code: 35,\n    exclusive: false,\n    noStylisticAlternates: 0,\n    stylisticAltOne: 2,\n    stylisticAltTwo: 4,\n    stylisticAltThree: 6,\n    stylisticAltFour: 8,\n    stylisticAltFive: 10,\n    stylisticAltSix: 12,\n    stylisticAltSeven: 14,\n    stylisticAltEight: 16,\n    stylisticAltNine: 18,\n    stylisticAltTen: 20,\n    stylisticAltEleven: 22,\n    stylisticAltTwelve: 24,\n    stylisticAltThirteen: 26,\n    stylisticAltFourteen: 28,\n    stylisticAltFifteen: 30,\n    stylisticAltSixteen: 32,\n    stylisticAltSeventeen: 34,\n    stylisticAltEighteen: 36,\n    stylisticAltNineteen: 38,\n    stylisticAltTwenty: 40\n  },\n  contextualAlternates: {\n    code: 36,\n    exclusive: false,\n    contextualAlternates: 0,\n    swashAlternates: 2,\n    contextualSwashAlternates: 4\n  },\n  lowerCase: {\n    code: 37,\n    exclusive: true,\n    defaultLowerCase: 0,\n    lowerCaseSmallCaps: 1,\n    lowerCasePetiteCaps: 2\n  },\n  upperCase: {\n    code: 38,\n    exclusive: true,\n    defaultUpperCase: 0,\n    upperCaseSmallCaps: 1,\n    upperCasePetiteCaps: 2\n  },\n  languageTag: { // indices into ltag table\n    code: 39,\n    exclusive: true\n  },\n  CJKRomanSpacing: {\n    code: 103,\n    exclusive: true,\n    halfWidthCJKRoman: 0,\n    proportionalCJKRoman: 1,\n    defaultCJKRoman: 2,\n    fullWidthCJKRoman: 3\n  }\n};\n\nconst feature = (name, selector) => [features[name].code, features[name][selector]];\n\nconst OTMapping = {\n  rlig: feature('ligatures', 'requiredLigatures'),\n  clig: feature('ligatures', 'contextualLigatures'),\n  dlig: feature('ligatures', 'rareLigatures'),\n  hlig: feature('ligatures', 'historicalLigatures'),\n  liga: feature('ligatures', 'commonLigatures'),\n  hist: feature('ligatures', 'historicalLigatures'), // ??\n\n  smcp: feature('lowerCase', 'lowerCaseSmallCaps'),\n  pcap: feature('lowerCase', 'lowerCasePetiteCaps'),\n\n  frac: feature('fractions', 'diagonalFractions'),\n  dnom: feature('fractions', 'diagonalFractions'), // ??\n  numr: feature('fractions', 'diagonalFractions'), // ??\n  afrc: feature('fractions', 'verticalFractions'),\n  // aalt\n  // abvf, abvm, abvs, akhn, blwf, blwm, blws, cfar, cjct, cpsp, falt, isol, jalt, ljmo, mset?\n  // ltra, ltrm, nukt, pref, pres, pstf, psts, rand, rkrf, rphf, rtla, rtlm, size, tjmo, tnum?\n  // unic, vatu, vhal, vjmo, vpal, vrt2\n  // dist -> trak table?\n  // kern, vkrn -> kern table\n  // lfbd + opbd + rtbd -> opbd table?\n  // mark, mkmk -> acnt table?\n  // locl -> languageTag + ltag table\n\n  case: feature('caseSensitiveLayout', 'caseSensitiveLayout'), // also caseSensitiveSpacing\n  ccmp: feature('unicodeDecomposition', 'canonicalComposition'), // compatibilityComposition?\n  cpct: feature('CJKVerticalRomanPlacement', 'CJKVerticalRomanCentered'), // guess..., probably not given below\n  valt: feature('CJKVerticalRomanPlacement', 'CJKVerticalRomanCentered'),\n  swsh: feature('contextualAlternates', 'swashAlternates'),\n  cswh: feature('contextualAlternates', 'contextualSwashAlternates'),\n  curs: feature('cursiveConnection', 'cursive'), // ??\n  c2pc: feature('upperCase', 'upperCasePetiteCaps'),\n  c2sc: feature('upperCase', 'upperCaseSmallCaps'),\n\n  init: feature('smartSwash', 'wordInitialSwashes'), // ??\n  fin2: feature('smartSwash', 'wordFinalSwashes'), // ??\n  medi: feature('smartSwash', 'nonFinalSwashes'), // ??\n  med2: feature('smartSwash', 'nonFinalSwashes'), // ??\n  fin3: feature('smartSwash', 'wordFinalSwashes'), // ??\n  fina: feature('smartSwash', 'wordFinalSwashes'), // ??\n\n  pkna: feature('kanaSpacing', 'proportionalKana'),\n  half: feature('textSpacing', 'halfWidthText'), // also HalfWidthCJKRoman, HalfWidthIdeographs?\n  halt: feature('textSpacing', 'altHalfWidthText'),\n\n  hkna: feature('alternateKana', 'alternateHorizKana'),\n  vkna: feature('alternateKana', 'alternateVertKana'),\n  // hngl: feature 'transliteration', 'hanjaToHangulSelector' # deprecated\n\n  ital: feature('italicCJKRoman', 'CJKItalicRoman'),\n  lnum: feature('numberCase', 'upperCaseNumbers'),\n  onum: feature('numberCase', 'lowerCaseNumbers'),\n  mgrk: feature('mathematicalExtras', 'mathematicalGreek'),\n\n  // nalt: not enough info. what type of annotation?\n  // ornm: ditto, which ornament style?\n\n  calt: feature('contextualAlternates', 'contextualAlternates'), // or more?\n  vrt2: feature('verticalSubstitution', 'substituteVerticalForms'), // oh... below?\n  vert: feature('verticalSubstitution', 'substituteVerticalForms'),\n  tnum: feature('numberSpacing', 'monospacedNumbers'),\n  pnum: feature('numberSpacing', 'proportionalNumbers'),\n  sups: feature('verticalPosition', 'superiors'),\n  subs: feature('verticalPosition', 'inferiors'),\n  ordn: feature('verticalPosition', 'ordinals'),\n  pwid: feature('textSpacing', 'proportionalText'),\n  hwid: feature('textSpacing', 'halfWidthText'),\n  qwid: feature('textSpacing', 'quarterWidthText'), // also QuarterWidthNumbers?\n  twid: feature('textSpacing', 'thirdWidthText'), // also ThirdWidthNumbers?\n  fwid: feature('textSpacing', 'proportionalText'), //??\n  palt: feature('textSpacing', 'altProportionalText'),\n  trad: feature('characterShape', 'traditionalCharacters'),\n  smpl: feature('characterShape', 'simplifiedCharacters'),\n  jp78: feature('characterShape', 'JIS1978Characters'),\n  jp83: feature('characterShape', 'JIS1983Characters'),\n  jp90: feature('characterShape', 'JIS1990Characters'),\n  jp04: feature('characterShape', 'JIS2004Characters'),\n  expt: feature('characterShape', 'expertCharacters'),\n  hojo: feature('characterShape', 'hojoCharacters'),\n  nlck: feature('characterShape', 'NLCCharacters'),\n  tnam: feature('characterShape', 'traditionalNamesCharacters'),\n  ruby: feature('rubyKana', 'rubyKana'),\n  titl: feature('styleOptions', 'titlingCaps'),\n  zero: feature('typographicExtras', 'slashedZero'),\n\n  ss01: feature('stylisticAlternatives', 'stylisticAltOne'),\n  ss02: feature('stylisticAlternatives', 'stylisticAltTwo'),\n  ss03: feature('stylisticAlternatives', 'stylisticAltThree'),\n  ss04: feature('stylisticAlternatives', 'stylisticAltFour'),\n  ss05: feature('stylisticAlternatives', 'stylisticAltFive'),\n  ss06: feature('stylisticAlternatives', 'stylisticAltSix'),\n  ss07: feature('stylisticAlternatives', 'stylisticAltSeven'),\n  ss08: feature('stylisticAlternatives', 'stylisticAltEight'),\n  ss09: feature('stylisticAlternatives', 'stylisticAltNine'),\n  ss10: feature('stylisticAlternatives', 'stylisticAltTen'),\n  ss11: feature('stylisticAlternatives', 'stylisticAltEleven'),\n  ss12: feature('stylisticAlternatives', 'stylisticAltTwelve'),\n  ss13: feature('stylisticAlternatives', 'stylisticAltThirteen'),\n  ss14: feature('stylisticAlternatives', 'stylisticAltFourteen'),\n  ss15: feature('stylisticAlternatives', 'stylisticAltFifteen'),\n  ss16: feature('stylisticAlternatives', 'stylisticAltSixteen'),\n  ss17: feature('stylisticAlternatives', 'stylisticAltSeventeen'),\n  ss18: feature('stylisticAlternatives', 'stylisticAltEighteen'),\n  ss19: feature('stylisticAlternatives', 'stylisticAltNineteen'),\n  ss20: feature('stylisticAlternatives', 'stylisticAltTwenty')\n};\n\n  // salt: feature 'stylisticAlternatives', 'stylisticAltOne' # hmm, which one to choose\n\n// Add cv01-cv99 features\nfor (let i = 1; i <= 99; i++) {\n  OTMapping[`cv${`00${i}`.slice(-2)}`] = [features.characterAlternatives.code, i];\n}\n\n// create inverse mapping\nlet AATMapping = {};\nfor (let ot in OTMapping) {\n  let aat = OTMapping[ot];\n  if (AATMapping[aat[0]] == null) {\n    AATMapping[aat[0]] = {};\n  }\n\n  AATMapping[aat[0]][aat[1]] = ot;\n}\n\n// Maps an array of OpenType features to AAT features\n// in the form of {featureType:{featureSetting:true}}\nexport function mapOTToAAT(features) {\n  let res = {};\n  for (let k = 0; k < features.length; k++) {\n    let r;\n    if (r = OTMapping[features[k]]) {\n      if (res[r[0]] == null) {\n        res[r[0]] = {};\n      }\n\n      res[r[0]][r[1]] = true;\n    }\n  }\n\n  return res;\n}\n\n// Maps strings in a [featureType, featureSetting]\n// to their equivalent number codes\nfunction mapFeatureStrings(f) {\n  let [type, setting] = f;\n  if (isNaN(type)) {\n    var typeCode = features[type] && features[type].code;\n  } else {\n    var typeCode = type;\n  }\n\n  if (isNaN(setting)) {\n    var settingCode = features[type] && features[type][setting];\n  } else {\n    var settingCode = setting;\n  }\n\n  return [typeCode, settingCode];\n}\n\n// Maps AAT features to an array of OpenType features\n// Supports both arrays in the form of [[featureType, featureSetting]]\n// and objects in the form of {featureType:{featureSetting:true}}\n// featureTypes and featureSettings can be either strings or number codes\nexport function mapAATToOT(features) {\n  let res = {};\n  if (Array.isArray(features)) {\n    for (let k = 0; k < features.length; k++) {\n      let r;\n      let f = mapFeatureStrings(features[k]);\n      if (r = AATMapping[f[0]] && AATMapping[f[0]][f[1]]) {\n        res[r] = true;\n      }\n    }\n\n  } else if (typeof features === 'object') {\n    for (let type in features) {\n      let feature = features[type];\n      for (let setting in feature) {\n        let r;\n        let f = mapFeatureStrings([type, setting]);\n        if (feature[setting] && (r = AATMapping[f[0]] && AATMapping[f[0]][f[1]])) {\n          res[r] = true;\n        }\n      }\n    }\n  }\n\n  return Object.keys(res);\n}\n","export default class AATLookupTable {\n  constructor(table) {\n    this.table = table;\n  }\n\n  lookup(glyph) {\n    switch (this.table.version) {\n      case 0: // simple array format\n        return this.table.values.getItem(glyph);\n\n      case 2: // segment format\n      case 4: {\n        let min = 0;\n        let max = this.table.binarySearchHeader.nUnits - 1;\n\n        while (min <= max) {\n          var mid = (min + max) >> 1;\n          var seg = this.table.segments[mid];\n\n          // special end of search value\n          if (seg.firstGlyph === 0xffff) {\n            return null;\n          }\n\n          if (glyph < seg.firstGlyph) {\n            max = mid - 1;\n          } else if (glyph > seg.lastGlyph) {\n            min = mid + 1;\n          } else {\n            if (this.table.version === 2) {\n              return seg.value;\n            } else {\n              return seg.values[glyph - seg.firstGlyph];\n            }\n          }\n        }\n\n        return null;\n      }\n\n      case 6: { // lookup single\n        let min = 0;\n        let max = this.table.binarySearchHeader.nUnits - 1;\n\n        while (min <= max) {\n          var mid = (min + max) >> 1;\n          var seg = this.table.segments[mid];\n\n          // special end of search value\n          if (seg.glyph === 0xffff) {\n            return null;\n          }\n\n          if (glyph < seg.glyph) {\n            max = mid - 1;\n          } else if (glyph > seg.glyph) {\n            min = mid + 1;\n          } else {\n            return seg.value;\n          }\n        }\n\n        return null;\n      }\n\n      case 8: // lookup trimmed\n        return this.table.values[glyph - this.table.firstGlyph];\n\n      default:\n        throw new Error(`Unknown lookup table format: ${this.table.version}`);\n    }\n  }\n}\n","import AATLookupTable from './AATLookupTable';\n\nconst START_OF_TEXT_STATE = 0;\nconst START_OF_LINE_STATE = 1;\n\nconst END_OF_TEXT_CLASS = 0;\nconst OUT_OF_BOUNDS_CLASS = 1;\nconst DELETED_GLYPH_CLASS = 2;\nconst END_OF_LINE_CLASS = 3;\n\nconst DONT_ADVANCE = 0x4000;\n\nexport default class AATStateMachine {\n  constructor(stateTable) {\n    this.stateTable = stateTable;\n    this.lookupTable = new AATLookupTable(stateTable.classTable);\n  }\n\n  process(glyphs, reverse, processEntry) {\n    let currentState = START_OF_TEXT_STATE; // START_OF_LINE_STATE is used for kashida glyph insertions sometimes I think?\n    let index = reverse ? glyphs.length - 1 : 0;\n    let dir = reverse ? -1 : 1;\n\n    while ((dir === 1 && index <= glyphs.length) || (dir === -1 && index >= -1)) {\n      let glyph = null;\n      let classCode = OUT_OF_BOUNDS_CLASS;\n      let shouldAdvance = true;\n\n      if (index === glyphs.length || index === -1) {\n        classCode = END_OF_TEXT_CLASS;\n      } else {\n        glyph = glyphs[index];\n        if (glyph.id === 0xffff) { // deleted glyph\n          classCode = DELETED_GLYPH_CLASS;\n        } else {\n          classCode = this.lookupTable.lookup(glyph.id);\n          if (classCode == null) {\n            classCode = OUT_OF_BOUNDS_CLASS;\n          }\n        }\n      }\n\n      let row = this.stateTable.stateArray.getItem(currentState);\n      let entryIndex = row[classCode];\n      let entry = this.stateTable.entryTable.getItem(entryIndex);\n\n      if (classCode !== END_OF_TEXT_CLASS && classCode !==  DELETED_GLYPH_CLASS) {\n        processEntry(glyph, entry, index);\n        shouldAdvance = !(entry.flags & DONT_ADVANCE);\n      }\n\n      currentState = entry.newState;\n      if (shouldAdvance) {\n        index += dir;\n      }\n    }\n\n    return glyphs;\n  }\n}\n","import AATStateMachine from './AATStateMachine';\nimport AATLookupTable from './AATLookupTable';\n\n// indic replacement flags\nconst MARK_FIRST = 0x8000;\nconst MARK_LAST  = 0x2000;\nconst VERB       = 0x000F;\n\n// contextual substitution and glyph insertion flag\nconst SET_MARK = 0x8000;\n\n// ligature entry flags\nconst SET_COMPONENT  = 0x8000;\nconst PERFORM_ACTION = 0x2000;\n\n// ligature action masks\nconst LAST_MASK   = 0x80000000;\nconst STORE_MASK  = 0x40000000;\nconst OFFSET_MASK = 0x3FFFFFFF;\n\nconst VERTICAL_ONLY           = 0x800000;\nconst REVERSE_DIRECTION       = 0x400000;\nconst HORIZONTAL_AND_VERTICAL = 0x200000;\n\n// glyph insertion flags\nconst CURRENT_IS_KASHIDA_LIKE = 0x2000;\nconst MARKED_IS_KASHIDA_LIKE  = 0x1000;\nconst CURRENT_INSERT_BEFORE   = 0x0800;\nconst MARKED_INSERT_BEFORE    = 0x0400;\nconst CURRENT_INSERT_COUNT    = 0x03E0;\nconst MARKED_INSERT_COUNT     = 0x001F;\n\nexport default class AATMorxProcessor {\n  constructor(font) {\n    this.processIndicRearragement = this.processIndicRearragement.bind(this);\n    this.processContextualSubstitution = this.processContextualSubstitution.bind(this);\n    this.processLigature = this.processLigature.bind(this);\n    this.processNoncontextualSubstitutions = this.processNoncontextualSubstitutions.bind(this);\n    this.processGlyphInsertion = this.processGlyphInsertion.bind(this);\n    this.font = font;\n    this.morx = font.morx;\n  }\n\n  // Processes an array of glyphs and applies the specified features\n  // Features should be in the form of {featureType:{featureSetting:true}}\n  process(glyphs, features = {}) {\n    for (let chain of this.morx.chains) {\n      let flags = chain.defaultFlags;\n\n      // enable/disable the requested features\n      for (let feature of chain.features) {\n        let f;\n        if ((f = features[feature.featureType]) && f[feature.featureSetting]) {\n          flags &= feature.disableFlags;\n          flags |= feature.enableFlags;\n        }\n      }\n\n      for (let subtable of chain.subtables) {\n        if (subtable.subFeatureFlags & flags) {\n          this.processSubtable(subtable, glyphs);\n        }\n      }\n    }\n\n    // remove deleted glyphs\n    let index = glyphs.length - 1;\n    while (index >= 0) {\n      if (glyphs[index].id === 0xffff) {\n        glyphs.splice(index, 1);\n      }\n\n      index--;\n    }\n\n    return glyphs;\n  }\n\n  processSubtable(subtable, glyphs) {\n    this.subtable = subtable;\n    this.glyphs = glyphs;\n    if (this.subtable.type === 4) {\n      this.processNoncontextualSubstitutions(this.subtable, this.glyphs);\n      return;\n    }\n\n    this.ligatureStack = [];\n    this.markedGlyph = null;\n    this.firstGlyph = null;\n    this.lastGlyph = null;\n    this.markedIndex = null;\n\n    let stateMachine = new AATStateMachine(this.subtable.table.stateTable);\n    let process = this.getProcessor();\n\n    let reverse = !!(this.subtable.coverage & REVERSE_DIRECTION);\n    return stateMachine.process(this.glyphs, reverse, process);\n  }\n\n  getProcessor() {\n    switch (this.subtable.type) {\n      case 0:\n        return this.processIndicRearragement;\n      case 1:\n        return this.processContextualSubstitution;\n      case 2:\n        return this.processLigature;\n      case 4:\n        return this.processNoncontextualSubstitutions;\n      case 5:\n        return this.processGlyphInsertion;\n      default:\n        throw new Error(`Invalid morx subtable type: ${this.subtable.type}`);\n    }\n  }\n\n  processIndicRearragement(glyph, entry, index) {\n    if (entry.flags & MARK_FIRST) {\n      this.firstGlyph = index;\n    }\n\n    if (entry.flags & MARK_LAST) {\n      this.lastGlyph = index;\n    }\n\n    reorderGlyphs(this.glyphs, entry.flags & VERB, this.firstGlyph, this.lastGlyph);\n  }\n\n  processContextualSubstitution(glyph, entry, index) {\n    let subsitutions = this.subtable.table.substitutionTable.items;\n    if (entry.markIndex !== 0xffff) {\n      let lookup = subsitutions.getItem(entry.markIndex);\n      let lookupTable = new AATLookupTable(lookup);\n      glyph = this.glyphs[this.markedGlyph];\n      var gid = lookupTable.lookup(glyph.id);\n      if (gid) {\n        this.glyphs[this.markedGlyph] = this.font.getGlyph(gid, glyph.codePoints);\n      }\n    }\n\n    if (entry.currentIndex !== 0xffff) {\n      let lookup = subsitutions.getItem(entry.currentIndex);\n      let lookupTable = new AATLookupTable(lookup);\n      glyph = this.glyphs[index];\n      var gid = lookupTable.lookup(glyph.id);\n      if (gid) {\n        this.glyphs[index] = this.font.getGlyph(gid, glyph.codePoints);\n      }\n    }\n\n    if (entry.flags & SET_MARK) {\n      this.markedGlyph = index;\n    }\n  }\n\n  processLigature(glyph, entry, index) {\n    if (entry.flags & SET_COMPONENT) {\n      this.ligatureStack.push(index);\n    }\n\n    if (entry.flags & PERFORM_ACTION) {\n      let actions = this.subtable.table.ligatureActions;\n      let components = this.subtable.table.components;\n      let ligatureList = this.subtable.table.ligatureList;\n\n      let actionIndex = entry.action;\n      let last = false;\n      let ligatureIndex = 0;\n      let codePoints = [];\n      let ligatureGlyphs = [];\n\n      while (!last) {\n        let componentGlyph = this.ligatureStack.pop();\n        codePoints.unshift(...this.glyphs[componentGlyph].codePoints);\n\n        let action = actions.getItem(actionIndex++);\n        last = !!(action & LAST_MASK);\n        let store = !!(action & STORE_MASK);\n        let offset = (action & OFFSET_MASK) << 2 >> 2; // sign extend 30 to 32 bits\n        offset += this.glyphs[componentGlyph].id;\n\n        let component = components.getItem(offset);\n        ligatureIndex += component;\n\n        if (last || store) {\n          let ligatureEntry = ligatureList.getItem(ligatureIndex);\n          this.glyphs[componentGlyph] = this.font.getGlyph(ligatureEntry, codePoints);\n          ligatureGlyphs.push(componentGlyph);\n          ligatureIndex = 0;\n          codePoints = [];\n        } else {\n          this.glyphs[componentGlyph] = this.font.getGlyph(0xffff);\n        }\n      }\n\n      // Put ligature glyph indexes back on the stack\n      this.ligatureStack.push(...ligatureGlyphs);\n    }\n  }\n\n  processNoncontextualSubstitutions(subtable, glyphs, index) {\n    let lookupTable = new AATLookupTable(subtable.table.lookupTable);\n\n    for (index = 0; index < glyphs.length; index++) {\n      let glyph = glyphs[index];\n      if (glyph.id !== 0xffff) {\n        let gid = lookupTable.lookup(glyph.id);\n        if (gid) { // 0 means do nothing\n          glyphs[index] = this.font.getGlyph(gid, glyph.codePoints);\n        }\n      }\n    }\n  }\n\n  _insertGlyphs(glyphIndex, insertionActionIndex, count, isBefore) {\n    let insertions = [];\n    while (count--) {\n      let gid = this.subtable.table.insertionActions.getItem(insertionActionIndex++);\n      insertions.push(this.font.getGlyph(gid));\n    }\n\n    if (!isBefore) {\n      glyphIndex++;\n    }\n\n    this.glyphs.splice(glyphIndex, 0, ...insertions);\n  }\n\n  processGlyphInsertion(glyph, entry, index) {\n    if (entry.flags & SET_MARK) {\n      this.markedIndex = index;\n    }\n\n    if (entry.markedInsertIndex !== 0xffff) {\n      let count = (entry.flags & MARKED_INSERT_COUNT) >>> 5;\n      let isBefore = !!(entry.flags & MARKED_INSERT_BEFORE);\n      this._insertGlyphs(this.markedIndex, entry.markedInsertIndex, count, isBefore);\n    }\n\n    if (entry.currentInsertIndex !== 0xffff) {\n      let count = (entry.flags & CURRENT_INSERT_COUNT) >>> 5;\n      let isBefore = !!(entry.flags & CURRENT_INSERT_BEFORE);\n      this._insertGlyphs(index, entry.currentInsertIndex, count, isBefore);\n    }\n  }\n\n  getSupportedFeatures() {\n    let features = [];\n    for (let chain of this.morx.chains) {\n      for (let feature of chain.features) {\n        features.push([feature.featureType, feature.featureSetting]);\n      }\n    }\n\n    return features;\n  }\n}\n\n// swaps the glyphs in rangeA with those in rangeB\n// reverse the glyphs inside those ranges if specified\n// ranges are in [offset, length] format\nfunction swap(glyphs, rangeA, rangeB, reverseA = false, reverseB = false) {\n  let end = glyphs.splice(rangeB[0] - (rangeB[1] - 1), rangeB[1]);\n  if (reverseB) {\n    end.reverse();\n  }\n\n  let start = glyphs.splice(rangeA[0], rangeA[1], ...end);\n  if (reverseA) {\n    start.reverse();\n  }\n\n  glyphs.splice(rangeB[0] - (rangeA[1] - 1), 0, ...start);\n  return glyphs;\n}\n\nfunction reorderGlyphs(glyphs, verb, firstGlyph, lastGlyph) {\n  let length = lastGlyph - firstGlyph + 1;\n  switch (verb) {\n    case 0: // no change\n      return glyphs;\n\n    case 1: // Ax => xA\n      return swap(glyphs, [firstGlyph, 1], [lastGlyph, 0]);\n\n    case 2: // xD => Dx\n      return swap(glyphs, [firstGlyph, 0], [lastGlyph, 1]);\n\n    case 3: // AxD => DxA\n      return swap(glyphs, [firstGlyph, 1], [lastGlyph, 1]);\n\n    case 4: // ABx => xAB\n      return swap(glyphs, [firstGlyph, 2], [lastGlyph, 0]);\n\n    case 5: // ABx => xBA\n      return swap(glyphs, [firstGlyph, 2], [lastGlyph, 0], true, false);\n\n    case 6: // xCD => CDx\n      return swap(glyphs, [firstGlyph, 0], [lastGlyph, 2]);\n\n    case 7: // xCD => DCx\n      return swap(glyphs, [firstGlyph, 0], [lastGlyph, 2], false, true);\n\n    case 8: // AxCD => CDxA\n      return swap(glyphs, [firstGlyph, 1], [lastGlyph, 2]);\n\n    case 9: // AxCD => DCxA\n      return swap(glyphs, [firstGlyph, 1], [lastGlyph, 2], false, true);\n\n    case 10: // ABxD => DxAB\n      return swap(glyphs, [firstGlyph, 2], [lastGlyph, 1]);\n\n    case 11: // ABxD => DxBA\n      return swap(glyphs, [firstGlyph, 2], [lastGlyph, 1], true, false);\n\n    case 12: // ABxCD => CDxAB\n      return swap(glyphs, [firstGlyph, 2], [lastGlyph, 2]);\n\n    case 13: // ABxCD => CDxBA\n      return swap(glyphs, [firstGlyph, 2], [lastGlyph, 2], true, false);\n\n    case 14: // ABxCD => DCxAB\n      return swap(glyphs, [firstGlyph, 2], [lastGlyph, 2], false, true);\n\n    case 15: // ABxCD => DCxBA\n      return swap(glyphs, [firstGlyph, 2], [lastGlyph, 2], true, true);\n\n    default:\n      throw new Error(`Unknown verb: ${verb}`);\n  }\n}\n","import * as AATFeatureMap from './AATFeatureMap';\nimport * as Script from '../layout/Script';\nimport AATMorxProcessor from './AATMorxProcessor';\n\nexport default class AATLayoutEngine {\n  constructor(font) {\n    this.morxProcessor = new AATMorxProcessor(font);\n  }\n\n  substitute(glyphs, features, script, language) {\n    // AAT expects the glyphs to be in visual order prior to morx processing,\n    // so reverse the glyphs if the script is right-to-left.\n    let isRTL = Script.direction(script) === 'rtl';\n    if (isRTL) {\n      glyphs.reverse();\n    }\n\n    this.morxProcessor.process(glyphs, AATFeatureMap.mapOTToAAT(features));\n    return glyphs;\n  }\n\n  getAvailableFeatures(script, language) {\n    return AATFeatureMap.mapAATToOT(this.morxProcessor.getSupportedFeatures());\n  }\n}\n","import * as Script from '../layout/Script';\n\n/**\n * ShapingPlans are used by the OpenType shapers to store which\n * features should by applied, and in what order to apply them.\n * The features are applied in groups called stages. A feature\n * can be applied globally to all glyphs, or locally to only\n * specific glyphs.\n *\n * @private\n */\nexport default class ShapingPlan {\n  constructor(font, script, language) {\n    this.font = font;\n    this.script = script;\n    this.language = language;\n    this.direction = Script.direction(script);\n    this.stages = [];\n    this.globalFeatures = {};\n    this.allFeatures = {};\n  }\n\n  /**\n   * Adds the given features to the last stage.\n   * Ignores features that have already been applied.\n   */\n  _addFeatures(features) {\n    let stage = this.stages[this.stages.length - 1];\n    for (let feature of features) {\n      if (!this.allFeatures[feature]) {\n        stage.push(feature);\n        this.allFeatures[feature] = true;\n      }\n    }\n  }\n\n  /**\n   * Adds the given features to the global list\n   */\n  _addGlobal(features) {\n    for (let feature of features) {\n      this.globalFeatures[feature] = true;\n    }\n  }\n\n  /**\n   * Add features to the last stage\n   */\n  add(arg, global = true) {\n    if (this.stages.length === 0) {\n      this.stages.push([]);\n    }\n\n    if (typeof arg === 'string') {\n      arg = [arg];\n    }\n\n    if (Array.isArray(arg)) {\n      this._addFeatures(arg);\n      if (global) {\n        this._addGlobal(arg);\n      }\n    } else if (typeof arg === 'object') {\n      let features = (arg.global || []).concat(arg.local || []);\n      this._addFeatures(features);\n      if (arg.global) {\n        this._addGlobal(arg.global);\n      }\n    } else {\n      throw new Error(\"Unsupported argument to ShapingPlan#add\");\n    }\n  }\n\n  /**\n   * Add a new stage\n   */\n  addStage(arg, global) {\n    if (typeof arg === 'function') {\n      this.stages.push(arg, []);\n    } else {\n      this.stages.push([]);\n      this.add(arg, global);\n    }\n  }\n\n  /**\n   * Assigns the global features to the given glyphs\n   */\n  assignGlobalFeatures(glyphs) {\n    for (let glyph of glyphs) {\n      for (let feature in this.globalFeatures) {\n        glyph.features[feature] = true;\n      }\n    }\n  }\n\n  /**\n   * Executes the planned stages using the given OTProcessor\n   */\n  process(processor, glyphs, positions) {\n    processor.selectScript(this.script, this.language);\n\n    for (let stage of this.stages) {\n      if (typeof stage === 'function') {\n        stage(glyphs, positions);\n\n      } else if (stage.length > 0) {\n        processor.applyFeatures(stage, glyphs, positions);\n      }\n    }\n  }\n}\n","import unicode from 'unicode-properties';\n\nconst COMMON_FEATURES = ['ccmp', 'locl', 'rlig', 'mark', 'mkmk'];\nconst FRACTIONAL_FEATURES = ['frac', 'numr', 'dnom'];\nconst HORIZONTAL_FEATURES = ['calt', 'clig', 'liga', 'rclt', 'curs', 'kern'];\nconst VERTICAL_FEATURES = ['vert'];\nconst DIRECTIONAL_FEATURES = {\n  ltr: ['ltra', 'ltrm'],\n  rtl: ['rtla', 'rtlm']\n};\n\nexport default class DefaultShaper {\n  static plan(plan, glyphs, features) {\n    // Plan the features we want to apply\n    this.planPreprocessing(plan);\n    this.planFeatures(plan);\n    this.planPostprocessing(plan, features);\n\n    // Assign the global features to all the glyphs\n    plan.assignGlobalFeatures(glyphs);\n\n    // Assign local features to glyphs\n    this.assignFeatures(plan, glyphs);\n  }\n\n  static planPreprocessing(plan) {\n    plan.add({\n      global: DIRECTIONAL_FEATURES[plan.direction],\n      local: FRACTIONAL_FEATURES\n    });\n  }\n\n  static planFeatures(plan) {\n    // Do nothing by default. Let subclasses override this.\n  }\n\n  static planPostprocessing(plan, userFeatures) {\n    plan.add([...COMMON_FEATURES, ...HORIZONTAL_FEATURES, ...userFeatures]);\n  }\n\n  static assignFeatures(plan, glyphs) {\n    // Enable contextual fractions\n    let i = 0;\n    while (i < glyphs.length) {\n      let glyph = glyphs[i];\n      if (glyph.codePoints[0] === 0x2044) { // fraction slash\n        let start = i - 1;\n        let end = i + 1;\n\n        // Apply numerator\n        while (start >= 0 && unicode.isDigit(glyphs[start].codePoints[0])) {\n          glyphs[start].features.numr = true;\n          glyphs[start].features.frac = true;\n          start--;\n        }\n\n        // Apply denominator\n        while (end < glyphs.length && unicode.isDigit(glyphs[end].codePoints[0])) {\n          glyphs[end].features.dnom = true;\n          glyphs[end].features.frac = true;\n          end++;\n        }\n\n        // Apply fraction slash\n        glyph.features.frac = true;\n        i = end - 1;\n\n      } else {\n        i++;\n      }\n    }\n  }\n}\n","import DefaultShaper from './DefaultShaper';\nimport unicode from 'unicode-properties';\nimport UnicodeTrie from 'unicode-trie';\n\nconst trie = new UnicodeTrie(require('fs').readFileSync(__dirname + '/data.trie'));\nconst FEATURES = ['isol', 'fina', 'fin2', 'fin3', 'medi', 'med2', 'init'];\n\nconst ShapingClasses = {\n  Non_Joining: 0,\n  Left_Joining: 1,\n  Right_Joining: 2,\n  Dual_Joining: 3,\n  Join_Causing: 3,\n  ALAPH: 4,\n  'DALATH RISH': 5,\n  Transparent: 6\n};\n\nconst ISOL = 'isol';\nconst FINA = 'fina';\nconst FIN2 = 'fin2';\nconst FIN3 = 'fin3';\nconst MEDI = 'medi';\nconst MED2 = 'med2';\nconst INIT = 'init';\nconst NONE = null;\n\n// Each entry is [prevAction, curAction, nextState]\nconst STATE_TABLE = [\n  //   Non_Joining,        Left_Joining,       Right_Joining,     Dual_Joining,           ALAPH,            DALATH RISH\n  // State 0: prev was U,  not willing to join.\n  [ [ NONE, NONE, 0 ],  [ NONE, ISOL, 2 ],  [ NONE, ISOL, 1 ],  [ NONE, ISOL, 2 ],  [ NONE, ISOL, 1 ],  [ NONE, ISOL, 6 ] ],\n\n  // State 1: prev was R or ISOL/ALAPH,  not willing to join.\n  [ [ NONE, NONE, 0 ],  [ NONE, ISOL, 2 ],  [ NONE, ISOL, 1 ],  [ NONE, ISOL, 2 ],  [ NONE, FIN2, 5 ],  [ NONE, ISOL, 6 ] ],\n\n  // State 2: prev was D/L in ISOL form,  willing to join.\n  [ [ NONE, NONE, 0 ],  [ NONE, ISOL, 2 ],  [ INIT, FINA, 1 ],  [ INIT, FINA, 3 ],  [ INIT, FINA, 4 ],  [ INIT, FINA, 6 ] ],\n\n  // State 3: prev was D in FINA form,  willing to join.\n  [ [ NONE, NONE, 0 ],  [ NONE, ISOL, 2 ],  [ MEDI, FINA, 1 ],  [ MEDI, FINA, 3 ],  [ MEDI, FINA, 4 ],  [ MEDI, FINA, 6 ] ],\n\n  // State 4: prev was FINA ALAPH,  not willing to join.\n  [ [ NONE, NONE, 0 ],  [ NONE, ISOL, 2 ],  [ MED2, ISOL, 1 ],  [ MED2, ISOL, 2 ],  [ MED2, FIN2, 5 ],  [ MED2, ISOL, 6 ] ],\n\n  // State 5: prev was FIN2/FIN3 ALAPH,  not willing to join.\n  [ [ NONE, NONE, 0 ],  [ NONE, ISOL, 2 ],  [ ISOL, ISOL, 1 ],  [ ISOL, ISOL, 2 ],  [ ISOL, FIN2, 5 ],  [ ISOL, ISOL, 6 ] ],\n\n  // State 6: prev was DALATH/RISH,  not willing to join.\n  [ [ NONE, NONE, 0 ],  [ NONE, ISOL, 2 ],  [ NONE, ISOL, 1 ],  [ NONE, ISOL, 2 ],  [ NONE, FIN3, 5 ],  [ NONE, ISOL, 6 ] ]\n];\n\n/**\n * This is a shaper for Arabic, and other cursive scripts.\n * It uses data from ArabicShaping.txt in the Unicode database,\n * compiled to a UnicodeTrie by generate-data.coffee.\n *\n * The shaping state machine was ported from Harfbuzz.\n * https://github.com/behdad/harfbuzz/blob/master/src/hb-ot-shape-complex-arabic.cc\n */\nexport default class ArabicShaper extends DefaultShaper {\n  static planFeatures(plan) {\n    plan.add(['ccmp', 'locl']);\n    for (let i = 0; i < FEATURES.length; i++) {\n      let feature = FEATURES[i];\n      plan.addStage(feature, false);\n    }\n\n    plan.addStage('mset');\n  }\n\n  static assignFeatures(plan, glyphs) {\n    super.assignFeatures(plan, glyphs);\n\n    let prev = -1;\n    let state = 0;\n    let actions = [];\n\n    // Apply the state machine to map glyphs to features\n    for (let i = 0; i < glyphs.length; i++) {\n      let curAction, prevAction;\n      var glyph = glyphs[i];\n      let type = getShapingClass(glyph.codePoints[0]);\n      if (type === ShapingClasses.Transparent) {\n        actions[i] = NONE;\n        continue;\n      }\n\n      [prevAction, curAction, state] = STATE_TABLE[state][type];\n\n      if (prevAction !== NONE && prev !== -1) {\n        actions[prev] = prevAction;\n      }\n\n      actions[i] = curAction;\n      prev = i;\n    }\n\n    // Apply the chosen features to their respective glyphs\n    for (let index = 0; index < glyphs.length; index++) {\n      let feature;\n      var glyph = glyphs[index];\n      if (feature = actions[index]) {\n        glyph.features[feature] = true;\n      }\n    }\n  }\n}\n\nfunction getShapingClass(codePoint) {\n  let res = trie.get(codePoint);\n  if (res) {\n    return res - 1;\n  }\n\n  let category = unicode.getCategory(codePoint);\n  if (category === 'Mn' || category === 'Me' || category === 'Cf') {\n    return ShapingClasses.Transparent;\n  }\n\n  return ShapingClasses.Non_Joining;\n}\n","import unicode from 'unicode-properties';\n\nexport default class GlyphInfo {\n  constructor(id, codePoints = [], features = []) {\n    this.id = id;\n    this.codePoints = codePoints;\n\n    // TODO: get this info from GDEF if available\n    this.isMark = this.codePoints.every(unicode.isMark);\n    this.isLigature = this.codePoints.length > 1;\n\n    this.features = {};\n    if (Array.isArray(features)) {\n      for (let i = 0; i < features.length; i++) {\n        let feature = features[i];\n        this.features[feature] = true;\n      }\n    } else if (typeof features === 'object') {\n      Object.assign(this.features, features);\n    }\n\n    this.ligatureID = null;\n    this.ligatureComponent = null;\n    this.cursiveAttachment = null;\n    this.markAttachment = null;\n  }\n}\n","import DefaultShaper from './DefaultShaper';\nimport GlyphInfo from '../GlyphInfo';\n\n/**\n * This is a shaper for the Hangul script, used by the Korean language.\n * It does the following:\n *   - decompose if unsupported by the font:\n *     <LV>   -> <L,V>\n *     <LVT>  -> <L,V,T>\n *     <LV,T> -> <L,V,T>\n *\n *   - compose if supported by the font:\n *     <L,V>   -> <LV>\n *     <L,V,T> -> <LVT>\n *     <LV,T>  -> <LVT>\n *\n *   - reorder tone marks (S is any valid syllable):\n *     <S, M> -> <M, S>\n *\n *   - apply ljmo, vjmo, and tjmo OpenType features to decomposed Jamo sequences.\n *\n * This logic is based on the following documents:\n *   - http://www.microsoft.com/typography/OpenTypeDev/hangul/intro.htm\n *   - http://ktug.org/~nomos/harfbuzz-hangul/hangulshaper.pdf\n */\nexport default class HangulShaper extends DefaultShaper {\n  static planFeatures(plan) {\n    plan.add(['ljmo', 'vjmo', 'tjmo'], false);\n  }\n\n  static assignFeatures(plan, glyphs) {\n    let state = 0;\n    let i = 0;\n    while (i < glyphs.length) {\n      let action;\n      let glyph = glyphs[i];\n      let code = glyph.codePoints[0];\n      let type = getType(code);\n\n      [ action, state ] = STATE_TABLE[state][type];\n\n      switch (action) {\n        case DECOMPOSE:\n          // Decompose the composed syllable if it is not supported by the font.\n          if (!plan.font.hasGlyphForCodePoint(code)) {\n            i = decompose(glyphs, i, plan.font);\n          }\n          break;\n\n        case COMPOSE:\n          // Found a decomposed syllable. Try to compose if supported by the font.\n          i = compose(glyphs, i, plan.font);\n          break;\n\n        case TONE_MARK:\n          // Got a valid syllable, followed by a tone mark. Move the tone mark to the beginning of the syllable.\n          reorderToneMark(glyphs, i, plan.font);\n          break;\n\n        case INVALID:\n          // Tone mark has no valid syllable to attach to, so insert a dotted circle\n          i = insertDottedCircle(glyphs, i, plan.font);\n          break;\n      }\n\n      i++;\n    }\n  }\n}\n\nconst HANGUL_BASE  = 0xac00;\nconst HANGUL_END   = 0xd7a4;\nconst HANGUL_COUNT = HANGUL_END - HANGUL_BASE + 1;\nconst L_BASE  = 0x1100; // lead\nconst V_BASE  = 0x1161; // vowel\nconst T_BASE  = 0x11a7; // trail\nconst L_COUNT = 19;\nconst V_COUNT = 21;\nconst T_COUNT = 28;\nconst L_END   = L_BASE + L_COUNT - 1;\nconst V_END   = V_BASE + V_COUNT - 1;\nconst T_END   = T_BASE + T_COUNT - 1;\nconst DOTTED_CIRCLE = 0x25cc;\n\nconst isL    = code => 0x1100 <= code && code <= 0x115f || 0xa960 <= code && code <= 0xa97c;\nconst isV    = code => 0x1160 <= code && code <= 0x11a7 || 0xd7b0 <= code && code <= 0xd7c6;\nconst isT    = code => 0x11a8 <= code && code <= 0x11ff || 0xd7cb <= code && code <= 0xd7fb;\nconst isTone = code => 0x302e <= code && code <= 0x302f;\nconst isLVT  = code => HANGUL_BASE <= code && code <= HANGUL_END;\nconst isLV   = code => (code - HANGUL_BASE) < HANGUL_COUNT && (code - HANGUL_BASE) % T_COUNT === 0;\nconst isCombiningL = code => L_BASE <= code && code <= L_END;\nconst isCombiningV = code => V_BASE <= code && code <= V_END;\nconst isCombiningT = code => T_BASE + 1 && 1 <= code && code <= T_END;\n\n// Character categories\nconst X   = 0; // Other character\nconst L   = 1; // Leading consonant\nconst V   = 2; // Medial vowel\nconst T   = 3; // Trailing consonant\nconst LV  = 4; // Composed <LV> syllable\nconst LVT = 5; // Composed <LVT> syllable\nconst M   = 6; // Tone mark\n\n// This function classifies a character using the above categories.\nfunction getType(code) {\n  if (isL(code))    { return L; }\n  if (isV(code))    { return V; }\n  if (isT(code))    { return T; }\n  if (isLV(code))   { return LV; }\n  if (isLVT(code))  { return LVT; }\n  if (isTone(code)) { return M; }\n  return X;\n}\n\n// State machine actions\nconst NO_ACTION = 0;\nconst DECOMPOSE = 1;\nconst COMPOSE   = 2;\nconst TONE_MARK = 4;\nconst INVALID   = 5;\n\n// Build a state machine that accepts valid syllables, and applies actions along the way.\n// The logic this is implementing is documented at the top of the file.\nconst STATE_TABLE = [\n  //       X                 L                 V                T                  LV                LVT               M\n  // State 0: start state\n  [ [ NO_ACTION, 0 ], [ NO_ACTION, 1 ], [ NO_ACTION, 0 ], [ NO_ACTION, 0 ], [ DECOMPOSE, 2 ], [ DECOMPOSE, 3 ], [  INVALID, 0  ] ],\n\n  // State 1: <L>\n  [ [ NO_ACTION, 0 ], [ NO_ACTION, 1 ], [  COMPOSE, 2  ], [ NO_ACTION, 0 ], [ DECOMPOSE, 2 ], [ DECOMPOSE, 3 ], [  INVALID, 0  ] ],\n\n  // State 2: <L,V> or <LV>\n  [ [ NO_ACTION, 0 ], [ NO_ACTION, 1 ], [ NO_ACTION, 0 ], [  COMPOSE, 3  ], [ DECOMPOSE, 2 ], [ DECOMPOSE, 3 ], [ TONE_MARK, 0 ] ],\n\n  // State 3: <L,V,T> or <LVT>\n  [ [ NO_ACTION, 0 ], [ NO_ACTION, 1 ], [ NO_ACTION, 0 ], [ NO_ACTION, 0 ], [ DECOMPOSE, 2 ], [ DECOMPOSE, 3 ], [ TONE_MARK, 0 ] ]\n];\n\nfunction getGlyph(font, code, features) {\n  return new GlyphInfo(font.glyphForCodePoint(code).id, [code], Object.keys(features));\n}\n\nfunction decompose(glyphs, i, font) {\n  let glyph = glyphs[i];\n  let code = glyph.codePoints[0];\n\n  let s = code - HANGUL_BASE;\n  let t = T_BASE + s % T_COUNT;\n  s = s / T_COUNT | 0;\n  let l = L_BASE + s / V_COUNT | 0;\n  let v = V_BASE + s % V_COUNT;\n\n  // Don't decompose if all of the components are not available\n  if (!font.hasGlyphForCodePoint(l) ||\n      !font.hasGlyphForCodePoint(v) ||\n      (t !== T_BASE && !font.hasGlyphForCodePoint(t))) {\n    return i;\n  }\n\n  // Replace the current glyph with decomposed L, V, and T glyphs,\n  // and apply the proper OpenType features to each component.\n  let ljmo = getGlyph(font, l, glyph.features);\n  ljmo.features.ljmo = true;\n\n  let vjmo = getGlyph(font, v, glyph.features);\n  vjmo.features.vjmo = true;\n\n  let insert = [ ljmo, vjmo ];\n\n  if (t > T_BASE) {\n    let tjmo = getGlyph(font, t, glyph.features);\n    tjmo.features.tjmo = true;\n    insert.push(tjmo);\n  }\n\n  glyphs.splice(i, 1, ...insert);\n  return i + insert.length - 1;\n}\n\nfunction compose(glyphs, i, font) {\n  let glyph = glyphs[i];\n  let code = glyphs[i].codePoints[0];\n  let type = getType(code);\n\n  let prev = glyphs[i - 1].codePoints[0];\n  let prevType = getType(prev);\n\n  // Figure out what type of syllable we're dealing with\n  let lv, ljmo, vjmo, tjmo;\n  if (prevType === LV && type === T) {\n    // <LV,T>\n    lv = prev;\n    tjmo = glyph;\n  } else {\n    if (type === V) {\n      // <L,V>\n      ljmo = glyphs[i - 1];\n      vjmo = glyph;\n    } else {\n      // <L,V,T>\n      ljmo = glyphs[i - 2];\n      vjmo = glyphs[i - 1];\n      tjmo = glyph;\n    }\n\n    let l = ljmo.codePoints[0];\n    let v = vjmo.codePoints[0];\n\n    // Make sure L and V are combining characters\n    if (isCombiningL(l) && isCombiningV(v)) {\n      lv = HANGUL_BASE + ((l - L_BASE) * V_COUNT + (v - V_BASE)) * T_COUNT;\n    }\n  }\n\n  let t = (tjmo && tjmo.codePoints[0]) || T_BASE;\n  if ((lv != null) && (t === T_BASE || isCombiningT(t))) {\n    let s = lv + (t - T_BASE);\n\n    // Replace with a composed glyph if supported by the font,\n    // otherwise apply the proper OpenType features to each component.\n    if (font.hasGlyphForCodePoint(s)) {\n      let del = prevType === V ? 3 : 2;\n      glyphs.splice(i - del + 1, del, getGlyph(font, s, glyph.features));\n      return i - del + 1;\n    }\n  }\n\n  // Didn't compose (either a non-combining component or unsupported by font).\n  if (ljmo) { ljmo.features.ljmo = true; }\n  if (vjmo) { vjmo.features.vjmo = true; }\n  if (tjmo) { tjmo.features.tjmo = true; }\n\n  if (prevType === LV) {\n    // Sequence was originally <L,V>, which got combined earlier.\n    // Either the T was non-combining, or the LVT glyph wasn't supported.\n    // Decompose the glyph again and apply OT features.\n    decompose(glyphs, i - 1, font);\n    return i + 1;\n  }\n\n  return i;\n}\n\nfunction getLength(code) {\n  switch (getType(code)) {\n    case LV:\n    case LVT:\n      return 1;\n    case V:\n      return 2;\n    case T:\n      return 3;\n  }\n}\n\nfunction reorderToneMark(glyphs, i, font) {\n  let glyph = glyphs[i];\n  let code = glyphs[i].codePoints[0];\n\n  // Move tone mark to the beginning of the previous syllable, unless it is zero width\n  if (font.glyphForCodePoint(code).advanceWidth === 0) { return; }\n\n  let prev = glyphs[i - 1].codePoints[0];\n  let len = getLength(prev);\n\n  glyphs.splice(i, 1);\n  return glyphs.splice(i - len, 0, glyph);\n}\n\nfunction insertDottedCircle(glyphs, i, font) {\n  let glyph = glyphs[i];\n  let code = glyphs[i].codePoints[0];\n\n  if (font.hasGlyphForCodePoint(DOTTED_CIRCLE)) {\n    let dottedCircle = getGlyph(font, DOTTED_CIRCLE, glyph.features);\n\n    // If the tone mark is zero width, insert the dotted circle before, otherwise after\n    let idx = font.glyphForCodePoint(code).advanceWidth === 0 ? i : i + 1;\n    glyphs.splice(idx, 0, dottedCircle);\n    i++;\n  }\n\n  return i;\n}\n","import DefaultShaper from './DefaultShaper';\nimport ArabicShaper from './ArabicShaper';\nimport HangulShaper from './HangulShaper';\n\nconst SHAPERS = {\n  arab: ArabicShaper,    // Arabic\n  mong: ArabicShaper,    // Mongolian\n  syrc: ArabicShaper,    // Syriac\n  'nko ': ArabicShaper,  // N'Ko\n  phag: ArabicShaper,    // Phags Pa\n  mand: ArabicShaper,    // Mandaic\n  mani: ArabicShaper,    // Manichaean\n  phlp: ArabicShaper,    // Psalter Pahlavi\n\n  hang: HangulShaper,    // Hangul\n\n  latn: DefaultShaper,   // Latin\n  DFLT: DefaultShaper   // Default\n};\n\nexport function choose(script) {\n  let shaper = SHAPERS[script];\n  if (shaper) { return shaper; }\n\n  return DefaultShaper;\n}\n","export default class GlyphIterator {\n  constructor(glyphs, flags) {\n    this.glyphs = glyphs;\n    this.reset(flags);\n  }\n\n  reset(flags = {}) {\n    this.flags = flags;\n    this.index = 0;\n  }\n\n  get cur() {\n    return this.glyphs[this.index] || null;\n  }\n\n  shouldIgnore(glyph, flags) {\n    return ((flags.ignoreMarks && glyph.isMark) ||\n           (flags.ignoreBaseGlyphs && !glyph.isMark) ||\n           (flags.ignoreLigatures && glyph.isLigature));}\n\n  move(dir) {\n    this.index += dir;\n    while (0 <= this.index && this.index < this.glyphs.length && this.shouldIgnore(this.glyphs[this.index], this.flags)) {\n      this.index += dir;\n    }\n\n    if (0 > this.index || this.index >= this.glyphs.length) {\n      return null;\n    }\n\n    return this.glyphs[this.index];\n  }\n\n  next() {\n    return this.move(+1);\n  }\n\n  prev() {\n    return this.move(-1);\n  }\n\n  peek(count = 1) {\n    let idx = this.index;\n    let res = this.increment(count);\n    this.index = idx;\n    return res;\n  }\n\n  peekIndex(count = 1) {\n    let idx = this.index;\n    this.increment(count);\n    let res = this.index;\n    this.index = idx;\n    return res;\n  }\n\n  increment(count = 1) {\n    let dir = count < 0 ? -1 : 1;\n    count = Math.abs(count);\n    while (count--) {\n      this.move(dir);\n    }\n\n    return this.glyphs[this.index];\n  }\n}\n","import GlyphIterator from './GlyphIterator';\nimport * as Script from '../layout/Script';\n\nconst DEFAULT_SCRIPTS = ['DFLT', 'dflt', 'latn'];\n\nexport default class OTProcessor {\n  constructor(font, table) {\n    this.font = font;\n    this.table = table;\n\n    this.script = null;\n    this.scriptTag = null;\n\n    this.language = null;\n    this.languageTag = null;\n\n    this.features = {};\n    this.lookups = {};\n\n    // initialize to default script + language\n    this.selectScript();\n\n    // current context (set by applyFeatures)\n    this.glyphs = [];\n    this.positions = []; // only used by GPOS\n    this.ligatureID = 1;\n  }\n\n  findScript(script) {\n    if (this.table.scriptList == null) {\n      return null;\n    }\n\n    if (!Array.isArray(script)) {\n      script = [ script ];\n    }\n\n    for (let entry of this.table.scriptList) {\n      for (let s of script) {\n        if (entry.tag === s) {\n          return entry;\n        }\n      }\n    }\n\n    return null;\n  }\n\n  selectScript(script, language) {\n    let changed = false;\n    let entry;\n    if (!this.script || script !== this.scriptTag) {\n      entry = this.findScript(script);\n      if (script) {\n        entry = this.findScript(script);\n      }\n\n      if (!entry) {\n        entry = this.findScript(DEFAULT_SCRIPTS);\n      }\n\n      if (!entry) {\n        return;\n      }\n\n      this.scriptTag = entry.tag;\n      this.script = entry.script;\n      this.direction = Script.direction(script);\n      this.language = null;\n      changed = true;\n    }\n\n    if (!language && language !== this.langugeTag) {\n      for (let lang of this.script.langSysRecords) {\n        if (lang.tag === language) {\n          this.language = lang.langSys;\n          this.langugeTag = lang.tag;\n          changed = true;\n          break;\n        }\n      }\n    }\n\n    if (!this.language) {\n      this.language = this.script.defaultLangSys;\n    }\n\n    // Build a feature lookup table\n    if (changed) {\n      this.features = {};\n      if (this.language) {\n        for (let featureIndex of this.language.featureIndexes) {\n          let record = this.table.featureList[featureIndex];\n          this.features[record.tag] = record.feature;\n        }\n      }\n    }\n  }\n\n  lookupsForFeatures(userFeatures = [], exclude) {\n    let lookups = [];\n    for (let tag of userFeatures) {\n      let feature = this.features[tag];\n      if (!feature) {\n        continue;\n      }\n\n      for (let lookupIndex of feature.lookupListIndexes) {\n        if (exclude && exclude.indexOf(lookupIndex) !== -1) {\n          continue;\n        }\n\n        lookups.push({\n          feature: tag,\n          index: lookupIndex,\n          lookup: this.table.lookupList.get(lookupIndex)\n        });\n      }\n    }\n\n    lookups.sort((a, b) => a.index - b.index);\n    return lookups;\n  }\n\n  applyFeatures(userFeatures, glyphs, advances) {\n    let lookups = this.lookupsForFeatures(userFeatures);\n    this.applyLookups(lookups, glyphs, advances);\n  }\n\n  applyLookups(lookups, glyphs, positions) {\n    this.glyphs = glyphs;\n    this.positions = positions;\n    this.glyphIterator = new GlyphIterator(glyphs);\n\n    for (let {feature, lookup} of lookups) {\n      this.glyphIterator.reset(lookup.flags);\n\n      while (this.glyphIterator.index < glyphs.length) {\n        if (!(feature in this.glyphIterator.cur.features)) {\n          this.glyphIterator.index++;\n          continue;\n        }\n\n        for (let table of lookup.subTables) {\n          let res = this.applyLookup(lookup.lookupType, table);\n          if (res) {\n            break;\n          }\n        }\n\n        this.glyphIterator.index++;\n      }\n    }\n  }\n\n  applyLookup(lookup, table) {\n    throw new Error(\"applyLookup must be implemented by subclasses\");\n  }\n\n  applyLookupList(lookupRecords) {\n    let glyphIndex = this.glyphIterator.index;\n\n    for (let lookupRecord of lookupRecords) {\n      this.glyphIterator.index = glyphIndex + lookupRecord.sequenceIndex;\n\n      let lookup = this.table.lookupList.get(lookupRecord.lookupListIndex);\n      for (let table of lookup.subTables) {\n        this.applyLookup(lookup.lookupType, table);\n      }\n    }\n\n    this.glyphIterator.index = glyphIndex;\n  }\n\n  coverageIndex(coverage, glyph) {\n    if (glyph == null) {\n      glyph = this.glyphIterator.cur.id;\n    }\n\n    switch (coverage.version) {\n      case 1:\n        return coverage.glyphs.indexOf(glyph);\n\n      case 2:\n        for (let range of coverage.rangeRecords) {\n          if (range.start <= glyph && glyph <= range.end) {\n            return range.startCoverageIndex + glyph - range.start;\n          }\n        }\n\n        break;\n    }\n\n    return -1;\n  }\n\n  match(sequenceIndex, sequence, fn, matched) {\n    let pos = this.glyphIterator.index;\n    let glyph = this.glyphIterator.increment(sequenceIndex);\n    let idx = 0;\n\n    while (idx < sequence.length && glyph && fn(sequence[idx], glyph.id)) {\n      if (matched) {\n        matched.push(this.glyphIterator.index);\n      }\n\n      idx++;\n      glyph = this.glyphIterator.next();\n    }\n\n    this.glyphIterator.index = pos;\n    if (idx < sequence.length) {\n      return false;\n    }\n\n    return matched || true;\n  }\n\n  sequenceMatches(sequenceIndex, sequence) {\n    return this.match(sequenceIndex, sequence, (component, glyph) => component === glyph);\n  }\n\n  sequenceMatchIndices(sequenceIndex, sequence) {\n    return this.match(sequenceIndex, sequence, (component, glyph) => component === glyph, []);\n  }\n\n  coverageSequenceMatches(sequenceIndex, sequence) {\n    return this.match(sequenceIndex, sequence, (coverage, glyph) =>\n      this.coverageIndex(coverage, glyph) >= 0\n    );\n  }\n\n  getClassID(glyph, classDef) {\n    switch (classDef.version) {\n      case 1: // Class array\n        let glyphID = classDef.startGlyph;\n        for (let classID of classDef.classValueArray) {\n          if (glyph === glyphID++) {\n            return classID;\n          }\n        }\n\n        break;\n\n      case 2:\n        for (let range of classDef.classRangeRecord) {\n          if (range.start <= glyph && glyph <= range.end) {\n            return range.class;\n          }\n        }\n\n        break;\n    }\n\n    return -1;\n  }\n\n  classSequenceMatches(sequenceIndex, sequence, classDef) {\n    return this.match(sequenceIndex, sequence, (classID, glyph) =>\n      classID === this.getClassID(glyph, classDef)\n    );\n  }\n\n  applyContext(table) {\n    switch (table.version) {\n      case 1:\n        let index = this.coverageIndex(table.coverage);\n        if (index === -1) {\n          return;\n        }\n\n        let set = table.ruleSets[index];\n        for (let rule of set) {\n          if (this.sequenceMatches(1, rule.input)) {\n            return this.applyLookupList(rule.lookupRecords);\n          }\n        }\n\n        break;\n\n      case 2:\n        if (this.coverageIndex(table.coverage) === -1) {\n          return;\n        }\n\n        index = this.getClassID(this.glyphIterator.cur.id, table.classDef);\n        if (index === -1) {\n          return;\n        }\n\n        set = table.classSet[index];\n        for (let rule of set) {\n          if (this.classSequenceMatches(1, rule.classes, table.classDef)) {\n            return this.applyLookupList(rule.lookupRecords);\n          }\n        }\n\n        break;\n\n      case 3:\n        if (this.coverageSequenceMatches(0, table.coverages)) {\n          return this.applyLookupList(table.lookupRecords);\n        }\n\n        break;\n    }\n  }\n\n  applyChainingContext(table) {\n    switch (table.version) {\n      case 1:\n        let index = this.coverageIndex(table.coverage);\n        if (index === -1) {\n          return;\n        }\n\n        let set = table.chainRuleSets[index];\n        for (let rule of set) {\n          if (this.sequenceMatches(-rule.backtrack.length, rule.backtrack)\n              && this.sequenceMatches(1, rule.input)\n              && this.sequenceMatches(1 + rule.input.length, rule.lookahead)) {\n            return this.applyLookupList(rule.lookupRecords);\n          }\n        }\n\n        break;\n\n      case 2:\n        if (this.coverageIndex(table.coverage) === -1) {\n          return;\n        }\n\n        index = this.getClassID(this.glyphIterator.cur.id, table.inputClassDef);\n        if (index === -1) {\n          return;\n        }\n\n        let rules = table.chainClassSet[index];\n        for (let rule of rules) {\n          if (this.classSequenceMatches(-rule.backtrack.length, rule.backtrack, table.backtrackClassDef) &&\n              this.classSequenceMatches(1, rule.input, table.inputClassDef) &&\n              this.classSequenceMatches(1 + rule.input.length, rule.lookahead, table.lookaheadClassDef)) {\n            return this.applyLookupList(rule.lookupRecords);\n          }\n        }\n\n        break;\n\n      case 3:\n        if (this.coverageSequenceMatches(-table.backtrackGlyphCount, table.backtrackCoverage) &&\n            this.coverageSequenceMatches(0, table.inputCoverage) &&\n            this.coverageSequenceMatches(table.inputGlyphCount, table.lookaheadCoverage)) {\n          return this.applyLookupList(table.lookupRecords);\n        }\n\n        break;\n    }\n  }\n}\n","import OTProcessor from './OTProcessor';\nimport GlyphInfo from './GlyphInfo';\n\nexport default class GSUBProcessor extends OTProcessor {\n  applyLookup(lookupType, table) {\n    switch (lookupType) {\n      case 1: { // Single Substitution\n        let index = this.coverageIndex(table.coverage);\n        if (index === -1) {\n          return false;\n        }\n\n        let glyph = this.glyphIterator.cur;\n        switch (table.version) {\n          case 1:\n            glyph.id = (glyph.id + table.deltaGlyphID) & 0xffff;\n            break;\n\n          case 2:\n            glyph.id = table.substitute.get(index);\n            break;\n        }\n\n        return true;\n      }\n\n      case 2: { // Multiple Substitution\n        let index = this.coverageIndex(table.coverage);\n        if (index !== -1) {\n          let sequence = table.sequences.get(index);\n          this.glyphIterator.cur.id = sequence[0];\n\n          let features = this.glyphIterator.cur.features;\n          let replacement = sequence.slice(1).map(gid => new GlyphInfo(gid, undefined, features));\n\n          this.glyphs.splice(this.glyphIterator.index + 1, 0, ...replacement);\n          return true;\n        }\n\n        return false;\n      }\n\n      case 3: { // Alternate Substitution\n        let index = this.coverageIndex(table.coverage);\n        if (index !== -1) {\n          let USER_INDEX = 0; // TODO\n          this.glyphIterator.cur.id = table.alternateSet.get(index)[USER_INDEX];\n          return true;\n        }\n\n        return false;\n      }\n\n      case 4: { // Ligature Substitution\n        let index = this.coverageIndex(table.coverage);\n        if (index === -1) {\n          return false;\n        }\n\n        for (let ligature of table.ligatureSets.get(index)) {\n          let matched = this.sequenceMatchIndices(1, ligature.components);\n          if (!matched) {\n            continue;\n          }\n\n          let curGlyph = this.glyphIterator.cur;\n\n          // Concatenate all of the characters the new ligature will represent\n          let characters = curGlyph.codePoints.slice();\n          for (let index of matched) {\n            characters.push(...this.glyphs[index].codePoints);\n          }\n\n          // Create the replacement ligature glyph\n          let ligatureGlyph = new GlyphInfo(ligature.glyph, characters);\n          ligatureGlyph.features = curGlyph.features;\n\n          // From Harfbuzz:\n          // - If it *is* a mark ligature, we don't allocate a new ligature id, and leave\n          //   the ligature to keep its old ligature id.  This will allow it to attach to\n          //   a base ligature in GPOS.  Eg. if the sequence is: LAM,LAM,SHADDA,FATHA,HEH,\n          //   and LAM,LAM,HEH for a ligature, they will leave SHADDA and FATHA with a\n          //   ligature id and component value of 2.  Then if SHADDA,FATHA form a ligature\n          //   later, we don't want them to lose their ligature id/component, otherwise\n          //   GPOS will fail to correctly position the mark ligature on top of the\n          //   LAM,LAM,HEH ligature. See https://bugzilla.gnome.org/show_bug.cgi?id=676343\n          //\n          // - If a ligature is formed of components that some of which are also ligatures\n          //   themselves, and those ligature components had marks attached to *their*\n          //   components, we have to attach the marks to the new ligature component\n          //   positions!  Now *that*'s tricky!  And these marks may be following the\n          //   last component of the whole sequence, so we should loop forward looking\n          //   for them and update them.\n          //\n          //   Eg. the sequence is LAM,LAM,SHADDA,FATHA,HEH, and the font first forms a\n          //   'calt' ligature of LAM,HEH, leaving the SHADDA and FATHA with a ligature\n          //   id and component == 1.  Now, during 'liga', the LAM and the LAM-HEH ligature\n          //   form a LAM-LAM-HEH ligature.  We need to reassign the SHADDA and FATHA to\n          //   the new ligature with a component value of 2.\n          //\n          //   This in fact happened to a font...  See https://bugzilla.gnome.org/show_bug.cgi?id=437633\n          ligatureGlyph.ligatureID = ligatureGlyph.isMark ? 0 : this.ligatureID++;\n\n          let lastLigID = curGlyph.ligatureID;\n          let lastNumComps = curGlyph.codePoints.length;\n          let curComps = lastNumComps;\n          let idx = this.glyphIterator.index + 1;\n\n          // Set ligatureID and ligatureComponent on glyphs that were skipped in the matched sequence.\n          // This allows GPOS to attach marks to the correct ligature components.\n          for (let matchIndex of matched) {\n            // Don't assign new ligature components for mark ligatures (see above)\n            if (ligatureGlyph.isMark) {\n              idx = matchIndex;\n            } else {\n              while (idx < matchIndex) {\n                var ligatureComponent = curComps - lastNumComps + Math.min(this.glyphs[idx].ligatureComponent || 1, lastNumComps);\n                this.glyphs[idx].ligatureID = ligatureGlyph.ligatureID;\n                this.glyphs[idx].ligatureComponent = ligatureComponent;\n                idx++;\n              }\n            }\n\n            lastLigID = this.glyphs[idx].ligatureID;\n            lastNumComps = this.glyphs[idx].codePoints.length;\n            curComps += lastNumComps;\n            idx++; // skip base glyph\n          }\n\n          // Adjust ligature components for any marks following\n          if (lastLigID && !ligatureGlyph.isMark) {\n            for (let i = idx; i < this.glyphs.length; i++) {\n              if (this.glyphs[i].ligatureID === lastLigID) {\n                var ligatureComponent = curComps - lastNumComps + Math.min(this.glyphs[i].ligatureComponent || 1, lastNumComps);\n                this.glyphs[i].ligatureComponent = ligatureComponent;\n              } else {\n                break;\n              }\n            }\n          }\n\n          // Delete the matched glyphs, and replace the current glyph with the ligature glyph\n          for (let i = matched.length - 1; i >= 0; i--) {\n            this.glyphs.splice(matched[i], 1);\n          }\n\n          this.glyphs[this.glyphIterator.index] = ligatureGlyph;\n          return true;\n        }\n\n        return false;\n      }\n\n      case 5: // Contextual Substitution\n        this.applyContext(table);\n        return false;\n\n      case 6: // Chaining Contextual Substitution\n        this.applyChainingContext(table);\n        return false;\n\n      case 7: // Extension Substitution\n        this.applyLookup(table.lookupType, table.extension);\n        return false;\n\n      default:\n        throw new Error(`GSUB lookupType ${lookupType} is not supported`);\n    }\n  }\n}\n","import OTProcessor from './OTProcessor';\n\nexport default class GPOSProcessor extends OTProcessor {\n  applyPositionValue(sequenceIndex, value) {\n    let position = this.positions[this.glyphIterator.peekIndex(sequenceIndex)];\n    if (value.xAdvance != null) {\n      position.xAdvance += value.xAdvance;\n    }\n\n    if (value.yAdvance != null) {\n      position.yAdvance += value.yAdvance;\n    }\n\n    if (value.xPlacement != null) {\n      position.xOffset += value.xPlacement;\n    }\n\n    if (value.yPlacement != null) {\n      position.yOffset += value.yPlacement;\n    }\n\n    // TODO: device tables\n  }\n\n  applyLookup(lookupType, table) {\n    switch (lookupType) {\n      case 1: { // Single positioning value\n        let index = this.coverageIndex(table.coverage);\n        if (index === -1) {\n          return false;\n        }\n\n        switch (table.version) {\n          case 1:\n            this.applyPositionValue(0, table.value);\n            break;\n\n          case 2:\n            this.applyPositionValue(0, table.values.get(index));\n            break;\n        }\n\n        return true;\n      }\n\n      case 2: { // Pair Adjustment Positioning\n        let nextGlyph = this.glyphIterator.peek();\n        if (!nextGlyph) {\n          return false;\n        }\n\n        let index = this.coverageIndex(table.coverage);\n        if (index === -1) {\n          return false;\n        }\n\n        switch (table.version) {\n          case 1: // Adjustments for glyph pairs\n            let set = table.pairSets.get(index);\n\n            for (let pair of set) {\n              if (pair.secondGlyph === nextGlyph.id) {\n                this.applyPositionValue(0, pair.value1);\n                this.applyPositionValue(1, pair.value2);\n                return true;\n              }\n            }\n\n            return false;\n\n          case 2: // Class pair adjustment\n            let class1 = this.getClassID(this.glyphIterator.cur.id, table.classDef1);\n            let class2 = this.getClassID(nextGlyph.id, table.classDef2);\n            if (class1 === -1 || class2 === -1) {\n              return false;\n            }\n\n            var pair = table.classRecords.get(class1).get(class2);\n            this.applyPositionValue(0, pair.value1);\n            this.applyPositionValue(1, pair.value2);\n            return true;\n        }\n      }\n\n      case 3: { // Cursive Attachment Positioning\n        let nextIndex = this.glyphIterator.peekIndex();\n        let nextGlyph = this.glyphs[nextIndex];\n        if (!nextGlyph) {\n          return false;\n        }\n\n        let curRecord = table.entryExitRecords[this.coverageIndex(table.coverage)];\n        if (!curRecord || !curRecord.exitAnchor) {\n          return false;\n        }\n\n        let nextRecord = table.entryExitRecords[this.coverageIndex(table.coverage, nextGlyph.id)];\n        if (!nextRecord || !nextRecord.entryAnchor) {\n          return false;\n        }\n\n        let entry = this.getAnchor(nextRecord.entryAnchor);\n        let exit = this.getAnchor(curRecord.exitAnchor);\n\n        let cur = this.positions[this.glyphIterator.index];\n        let next = this.positions[nextIndex];\n\n        switch (this.direction) {\n          case 'ltr':\n            cur.xAdvance = exit.x + cur.xOffset;\n\n            let d = entry.x + next.xOffset;\n            next.xAdvance -= d;\n            next.xOffset -= d;\n            break;\n\n          case 'rtl':\n            d = exit.x + cur.xOffset;\n            cur.xAdvance -= d;\n            cur.xOffset -= d;\n            next.xAdvance = entry.x + next.xOffset;\n            break;\n        }\n\n        if (this.glyphIterator.flags.rightToLeft) {\n          this.glyphIterator.cur.cursiveAttachment = nextIndex;\n          cur.yOffset = entry.y - exit.y;\n        } else {\n          nextGlyph.cursiveAttachment = this.glyphIterator.index;\n          cur.yOffset = exit.y - entry.y;\n        }\n\n        return true;\n      }\n\n      case 4: { // Mark to base positioning\n        let markIndex = this.coverageIndex(table.markCoverage);\n        if (markIndex === -1) {\n          return false;\n        }\n\n        // search backward for a base glyph\n        let baseGlyphIndex = this.glyphIterator.index;\n        while (--baseGlyphIndex >= 0 && this.glyphs[baseGlyphIndex].isMark);\n\n        if (baseGlyphIndex < 0) {\n          return false;\n        }\n\n        let baseIndex = this.coverageIndex(table.baseCoverage, this.glyphs[baseGlyphIndex].id);\n        if (baseIndex === -1) {\n          return false;\n        }\n\n        let markRecord = table.markArray[markIndex];\n        let baseAnchor = table.baseArray[baseIndex][markRecord.class];\n        this.applyAnchor(markRecord, baseAnchor, baseGlyphIndex);\n        return true;\n      }\n\n      case 5: { // Mark to ligature positioning\n        let markIndex = this.coverageIndex(table.markCoverage);\n        if (markIndex === -1) {\n          return false;\n        }\n\n        // search backward for a base glyph\n        let baseGlyphIndex = this.glyphIterator.index;\n        while (--baseGlyphIndex >= 0 && this.glyphs[baseGlyphIndex].isMark);\n\n        if (baseGlyphIndex < 0) {\n          return false;\n        }\n\n        let ligIndex = this.coverageIndex(table.ligatureCoverage, this.glyphs[baseGlyphIndex].id);\n        if (ligIndex === -1) {\n          return false;\n        }\n\n        let ligAttach = table.ligatureArray[ligIndex];\n        let markGlyph = this.glyphIterator.cur;\n        let ligGlyph = this.glyphs[baseGlyphIndex];\n        let compIndex = ligGlyph.ligatureID && ligGlyph.ligatureID === markGlyph.ligatureID && (markGlyph.ligatureComponent != null)\n          ? Math.min(markGlyph.ligatureComponent, ligGlyph.codePoints.length) - 1\n          : ligGlyph.codePoints.length - 1;\n\n        let markRecord = table.markArray[markIndex];\n        let baseAnchor = ligAttach[compIndex][markRecord.class];\n        this.applyAnchor(markRecord, baseAnchor, baseGlyphIndex);\n        return true;\n      }\n\n      case 6: { // Mark to mark positioning\n        let mark1Index = this.coverageIndex(table.mark1Coverage);\n        if (mark1Index === -1) {\n          return false;\n        }\n\n        // get the previous mark to attach to\n        let prevIndex = this.glyphIterator.peekIndex(-1);\n        let prev = this.glyphs[prevIndex];\n        if (!prev || !prev.isMark) {\n          return false;\n        }\n\n        let cur = this.glyphIterator.cur;\n\n        // The following logic was borrowed from Harfbuzz\n        let good = false;\n        if (cur.ligatureID === prev.ligatureID) {\n          if (!cur.ligatureID) { // Marks belonging to the same base\n            good = true;\n          } else if (cur.ligatureComponent === prev.ligatureComponent) { // Marks belonging to the same ligature component\n            good = true;\n          }\n        } else {\n          // If ligature ids don't match, it may be the case that one of the marks\n          // itself is a ligature, in which case match.\n          if ((cur.ligatureID && !cur.ligatureComponent) || (prev.ligatureID && !prev.ligatureComponent)) {\n            good = true;\n          }\n        }\n\n        if (!good) {\n          return false;\n        }\n\n        let mark2Index = this.coverageIndex(table.mark2Coverage, prev.id);\n        if (mark2Index === -1) {\n          return false;\n        }\n\n        let markRecord = table.mark1Array[mark1Index];\n        let baseAnchor = table.mark2Array[mark2Index][markRecord.class];\n        this.applyAnchor(markRecord, baseAnchor, prevIndex);\n        return true;\n      }\n\n      case 7: // Contextual positioning\n        this.applyContext(table);\n        return false;\n\n      case 8: // Chaining contextual positioning\n        this.applyChainingContext(table);\n        return false;\n\n      case 9: // Extension positioning\n        this.applyLookup(table.lookupType, table.extension);\n        return false;\n\n      default:\n        throw new Error(`Unsupported GPOS table: ${lookupType}`);\n    }\n  }\n\n  applyAnchor(markRecord, baseAnchor, baseGlyphIndex) {\n    let baseCoords = this.getAnchor(baseAnchor);\n    let markCoords = this.getAnchor(markRecord.markAnchor);\n\n    let basePos = this.positions[baseGlyphIndex];\n    let markPos = this.positions[this.glyphIterator.index];\n\n    markPos.xOffset = baseCoords.x - markCoords.x;\n    markPos.yOffset = baseCoords.y - markCoords.y;\n    return this.glyphIterator.cur.markAttachment = baseGlyphIndex;\n  }\n\n  getAnchor(anchor) {\n    // TODO: contour point, device tables\n    return {\n      x: anchor.xCoordinate,\n      y: anchor.yCoordinate\n    };\n  }\n\n  applyFeatures(userFeatures, glyphs, advances) {\n    super.applyFeatures(userFeatures, glyphs, advances);\n\n    for (var i = 0; i < this.glyphs.length; i++) {\n      this.fixCursiveAttachment(i);\n    }\n\n    this.fixMarkAttachment(i);\n  }\n\n  fixCursiveAttachment(i) {\n    let glyph = this.glyphs[i];\n    if (glyph.cursiveAttachment != null) {\n      let j = glyph.cursiveAttachment;\n\n      glyph.cursiveAttachment = null;\n      this.fixCursiveAttachment(j);\n\n      this.positions[i].yOffset += this.positions[j].yOffset;\n    }\n  }\n\n  fixMarkAttachment() {\n    for (let i = 0; i < this.glyphs.length; i++) {\n      let glyph = this.glyphs[i];\n      if (glyph.markAttachment) {\n        let j = glyph.markAttachment;\n\n        this.positions[i].xOffset += this.positions[j].xOffset;\n        this.positions[i].yOffset += this.positions[j].yOffset;\n\n        if (this.direction === 'ltr') {\n          for (let k = j; k < i; k++) {\n            this.positions[i].xOffset -= this.positions[k].xAdvance;\n            this.positions[i].yOffset -= this.positions[k].yAdvance;\n          }\n        }\n      }\n    }\n  }\n}\n","import ShapingPlan from './ShapingPlan';\nimport * as Shapers from './shapers';\nimport GlyphInfo from './GlyphInfo';\nimport GSUBProcessor from './GSUBProcessor';\nimport GPOSProcessor from './GPOSProcessor';\n\nexport default class OTLayoutEngine {\n  constructor(font) {\n    this.font = font;\n    this.glyphInfos = null;\n    this.plan = null;\n    this.GSUBProcessor = null;\n    this.GPOSProcessor = null;\n\n    if (font.GSUB) {\n      this.GSUBProcessor = new GSUBProcessor(font, font.GSUB);\n    }\n\n    if (font.GPOS) {\n      this.GPOSProcessor = new GPOSProcessor(font, font.GPOS);\n    }\n  }\n\n  setup(glyphs, features, script, language) {\n    // Map glyphs to GlyphInfo objects so data can be passed between\n    // GSUB and GPOS without mutating the real (shared) Glyph objects.\n    this.glyphInfos = glyphs.map(glyph => new GlyphInfo(glyph.id, [...glyph.codePoints]));\n\n    // Choose a shaper based on the script, and setup a shaping plan.\n    // This determines which features to apply to which glyphs.\n    let shaper = Shapers.choose(script);\n    this.plan = new ShapingPlan(this.font, script, language);\n    return shaper.plan(this.plan, this.glyphInfos, features);\n  }\n\n  substitute(glyphs) {\n    if (this.GSUBProcessor) {\n      this.plan.process(this.GSUBProcessor, this.glyphInfos);\n\n      // Map glyph infos back to normal Glyph objects\n      glyphs = this.glyphInfos.map(glyphInfo => this.font.getGlyph(glyphInfo.id, glyphInfo.codePoints));\n    }\n\n    return glyphs;\n  }\n\n  position(glyphs, positions) {\n    if (this.GPOSProcessor) {\n      this.plan.process(this.GPOSProcessor, this.glyphInfos, positions);\n    }\n\n    // Reverse the glyphs and positions if the script is right-to-left\n    if (this.plan.direction === 'rtl') {\n      glyphs.reverse();\n      positions.reverse();\n    }\n\n    return this.GPOSProcessor && this.GPOSProcessor.features;\n  }\n\n  cleanup() {\n    this.glyphInfos = null;\n    this.plan = null;\n  }\n\n  getAvailableFeatures(script, language) {\n    let features = [];\n\n    if (this.GSUBProcessor) {\n      this.GSUBProcessor.selectScript(script, language);\n      features.push(...Object.keys(this.GSUBProcessor.features));\n    }\n\n    if (this.GPOSProcessor) {\n      this.GPOSProcessor.selectScript(script, language);\n      features.push(...Object.keys(this.GPOSProcessor.features));\n    }\n\n    return features;\n  }\n}\n","import KernProcessor from './KernProcessor';\nimport UnicodeLayoutEngine from './UnicodeLayoutEngine';\nimport GlyphRun from './GlyphRun';\nimport GlyphPosition from './GlyphPosition';\nimport * as Script from './Script';\nimport unicode from 'unicode-properties';\nimport AATLayoutEngine from '../aat/AATLayoutEngine';\nimport OTLayoutEngine from '../opentype/OTLayoutEngine';\n\nexport default class LayoutEngine {\n  constructor(font) {\n    this.font = font;\n    this.unicodeLayoutEngine = null;\n    this.kernProcessor = null;\n\n    // Choose an advanced layout engine. We try the AAT morx table first since more\n    // scripts are currently supported because the shaping logic is built into the font.\n    if (this.font.morx) {\n      this.engine = new AATLayoutEngine(this.font);\n\n    } else if (this.font.GSUB || this.font.GPOS) {\n      this.engine = new OTLayoutEngine(this.font);\n    }\n  }\n\n  layout(string, features = [], script, language) {\n    // Make the features parameter optional\n    if (typeof features === 'string') {\n      script = features;\n      language = script;\n      features = [];\n    }\n\n    // Map string to glyphs if needed\n    if (typeof string === 'string') {\n      // Attempt to detect the script from the string if not provided.\n      if (script == null) {\n        script = Script.forString(string);\n      }\n\n      var glyphs = this.font.glyphsForString(string);\n    } else {\n      // Attempt to detect the script from the glyph code points if not provided.\n      if (script == null) {\n        let codePoints = [];\n        for (let glyph of string) {\n          codePoints.push(...glyph.codePoints);\n        }\n\n        script = Script.forCodePoints(codePoints);\n      }\n\n      var glyphs = string;\n    }\n\n    // Return early if there are no glyphs\n    if (glyphs.length === 0) {\n      return new GlyphRun(glyphs, []);\n    }\n\n    // Setup the advanced layout engine\n    if (this.engine && this.engine.setup) {\n      this.engine.setup(glyphs, features, script, language);\n    }\n\n    // Substitute and position the glyphs\n    glyphs = this.substitute(glyphs, features, script, language);\n    let positions = this.position(glyphs, features, script, language);\n\n    // Let the layout engine clean up any state it might have\n    if (this.engine && this.engine.cleanup) {\n      this.engine.cleanup();\n    }\n\n    return new GlyphRun(glyphs, positions);\n  }\n\n  substitute(glyphs, features, script, language) {\n    // Call the advanced layout engine to make substitutions\n    if (this.engine && this.engine.substitute) {\n      glyphs = this.engine.substitute(glyphs, features, script, language);\n    }\n\n    return glyphs;\n  }\n\n  position(glyphs, features, script, language) {\n    // Get initial glyph positions\n    let positions = glyphs.map(glyph => new GlyphPosition(glyph.advanceWidth));\n    let positioned = null;\n\n    // Call the advanced layout engine. Returns the features applied.\n    if (this.engine && this.engine.position) {\n      positioned = this.engine.position(glyphs, positions, features, script, language);\n    }\n\n    // if there is no GPOS table, use unicode properties to position marks.\n    if (!positioned) {\n      if (!this.unicodeLayoutEngine) {\n        this.unicodeLayoutEngine = new UnicodeLayoutEngine(this.font);\n      }\n\n      this.unicodeLayoutEngine.positionGlyphs(glyphs, positions);\n    }\n\n    // if kerning is not supported by GPOS, do kerning with the TrueType/AAT kern table\n    if ((!positioned || !positioned.kern) && this.font.kern) {\n      if (!this.kernProcessor) {\n        this.kernProcessor = new KernProcessor(this.font);\n      }\n\n      this.kernProcessor.process(glyphs, positions);\n    }\n\n    return positions;\n  }\n\n  getAvailableFeatures(script, language) {\n    let features = [];\n\n    if (this.engine) {\n      features.push(...this.engine.getAvailableFeatures(script, language));\n    }\n\n    if (this.font.kern && features.indexOf('kern') === -1) {\n      features.push('kern');\n    }\n\n    return features;\n  }\n}\n","import BBox from './BBox';\n\nconst SVG_COMMANDS = {\n  moveTo: 'M',\n  lineTo: 'L',\n  quadraticCurveTo: 'Q',\n  bezierCurveTo: 'C',\n  closePath: 'Z'\n};\n\n/**\n * Path objects are returned by glyphs and represent the actual\n * vector outlines for each glyph in the font. Paths can be converted\n * to SVG path data strings, or to functions that can be applied to\n * render the path to a graphics context.\n */\nexport default class Path {\n  constructor() {\n    this.commands = [];\n    this._bbox = null;\n    this._cbox = null;\n  }\n\n  /**\n   * Compiles the path to a JavaScript function that can be applied with\n   * a graphics context in order to render the path.\n   * @return {string}\n   */\n  toFunction() {\n    let cmds = this.commands.map(c => `  ctx.${c.command}(${c.args.join(', ')});`);\n    return new Function('ctx', cmds.join('\\n'));\n  }\n\n  /**\n   * Converts the path to an SVG path data string\n   * @return {string}\n   */\n  toSVG() {\n    let cmds = this.commands.map(c => {\n      let args = c.args.map(arg => Math.round(arg * 100) / 100);\n      return `${SVG_COMMANDS[c.command]}${args.join(' ')}`;\n    });\n\n    return cmds.join('');\n  }\n\n  /**\n   * Gets the \"control box\" of a path.\n   * This is like the bounding box, but it includes all points including\n   * control points of bezier segments and is much faster to compute than\n   * the real bounding box.\n   * @type {BBox}\n   */\n  get cbox() {\n    if (!this._cbox) {\n      let cbox = new BBox;\n      for (let command of this.commands) {\n        for (let i = 0; i < command.args.length; i += 2) {\n          cbox.addPoint(command.args[i], command.args[i + 1]);\n        }\n      }\n\n      this._cbox = Object.freeze(cbox);\n    }\n\n    return this._cbox;\n  }\n\n  /**\n   * Gets the exact bounding box of the path by evaluating curve segments.\n   * Slower to compute than the control box, but more accurate.\n   * @type {BBox}\n   */\n  get bbox() {\n    if (this._bbox) {\n      return this._bbox;\n    }\n\n    let bbox = new BBox;\n    let cx = 0, cy = 0;\n\n    let f = t => (\n      Math.pow(1 - t, 3) * p0[i]\n        + 3 * Math.pow(1 - t, 2) * t * p1[i]\n        + 3 * (1 - t) * Math.pow(t, 2) * p2[i]\n        + Math.pow(t, 3) * p3[i]\n    );\n\n    for (let c of this.commands) {\n      switch (c.command) {\n        case 'moveTo':\n        case 'lineTo':\n          let [x, y] = c.args;\n          bbox.addPoint(x, y);\n          cx = x;\n          cy = y;\n          break;\n\n        case 'quadraticCurveTo':\n        case 'bezierCurveTo':\n          if (c.command === 'quadraticCurveTo') {\n            // http://fontforge.org/bezier.html\n            var [qp1x, qp1y, p3x, p3y] = c.args;\n            var cp1x = cx + 2 / 3 * (qp1x - cx);    // CP1 = QP0 + 2/3 * (QP1-QP0)\n            var cp1y = cy + 2 / 3 * (qp1y - cy);\n            var cp2x = p3x + 2 / 3 * (qp1x - p3x);  // CP2 = QP2 + 2/3 * (QP1-QP2)\n            var cp2y = p3y + 2 / 3 * (qp1y - p3y);\n          } else {\n            var [cp1x, cp1y, cp2x, cp2y, p3x, p3y] = c.args;\n          }\n\n          // http://blog.hackers-cafe.net/2009/06/how-to-calculate-bezier-curves-bounding.html\n          bbox.addPoint(p3x, p3y);\n\n          var p0 = [cx, cy];\n          var p1 = [cp1x, cp1y];\n          var p2 = [cp2x, cp2y];\n          var p3 = [p3x, p3y];\n\n          for (let i = 0; i <= 1; i++) {\n            let b = 6 * p0[i] - 12 * p1[i] + 6 * p2[i];\n            let a = -3 * p0[i] + 9 * p1[i] - 9 * p2[i] + 3 * p3[i];\n            c = 3 * p1[i] - 3 * p0[i];\n\n            if (a === 0) {\n              if (b === 0) {\n                continue;\n              }\n\n              let t = -c / b;\n              if (0 < t && t < 1) {\n                if (i === 0) {\n                  bbox.addPoint(f(t), bbox.maxY);\n                } else if (i === 1) {\n                  bbox.addPoint(bbox.maxX, f(t));\n                }\n              }\n\n              continue;\n            }\n\n            let b2ac = Math.pow(b, 2) - 4 * c * a;\n            if (b2ac < 0) {\n              continue;\n            }\n\n            let t1 = (-b + Math.sqrt(b2ac)) / (2 * a);\n            if (0 < t1 && t1 < 1) {\n              if (i === 0) {\n                bbox.addPoint(f(t1), bbox.maxY);\n              } else if (i === 1) {\n                bbox.addPoint(bbox.maxX, f(t1));\n              }\n            }\n\n            let t2 = (-b - Math.sqrt(b2ac)) / (2 * a);\n            if (0 < t2 && t2 < 1) {\n              if (i === 0) {\n                bbox.addPoint(f(t2), bbox.maxY);\n              } else if (i === 1) {\n                bbox.addPoint(bbox.maxX, f(t2));\n              }\n            }\n          }\n\n          cx = p3x;\n          cy = p3y;\n          break;\n      }\n    }\n\n    return this._bbox = Object.freeze(bbox);\n  }\n}\n\nfor (let command of ['moveTo', 'lineTo', 'quadraticCurveTo', 'bezierCurveTo', 'closePath']) {\n  Path.prototype[command] = function(...args) {\n    this._bbox = this._cbox = null;\n    this.commands.push({\n      command,\n      args\n    });\n\n    return this;\n  };\n}\n","export default [\n  '.notdef', '.null', 'nonmarkingreturn', 'space', 'exclam', 'quotedbl', 'numbersign', 'dollar', 'percent',\n  'ampersand', 'quotesingle', 'parenleft', 'parenright', 'asterisk', 'plus', 'comma', 'hyphen', 'period', 'slash',\n  'zero', 'one', 'two', 'three', 'four', 'five', 'six', 'seven', 'eight', 'nine', 'colon', 'semicolon', 'less',\n  'equal', 'greater', 'question', 'at', 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O',\n  'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z', 'bracketleft', 'backslash', 'bracketright',\n  'asciicircum', 'underscore', 'grave', 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o',\n  'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z', 'braceleft', 'bar', 'braceright', 'asciitilde',\n  'Adieresis', 'Aring', 'Ccedilla', 'Eacute', 'Ntilde', 'Odieresis', 'Udieresis', 'aacute', 'agrave',\n  'acircumflex', 'adieresis', 'atilde', 'aring', 'ccedilla', 'eacute', 'egrave', 'ecircumflex', 'edieresis',\n  'iacute', 'igrave', 'icircumflex', 'idieresis', 'ntilde', 'oacute', 'ograve', 'ocircumflex', 'odieresis',\n  'otilde', 'uacute', 'ugrave', 'ucircumflex', 'udieresis', 'dagger', 'degree', 'cent', 'sterling', 'section',\n  'bullet', 'paragraph', 'germandbls', 'registered', 'copyright', 'trademark', 'acute', 'dieresis', 'notequal',\n  'AE', 'Oslash', 'infinity', 'plusminus', 'lessequal', 'greaterequal', 'yen', 'mu', 'partialdiff', 'summation',\n  'product', 'pi', 'integral', 'ordfeminine', 'ordmasculine', 'Omega', 'ae', 'oslash', 'questiondown',\n  'exclamdown', 'logicalnot', 'radical', 'florin', 'approxequal', 'Delta', 'guillemotleft', 'guillemotright',\n  'ellipsis', 'nonbreakingspace', 'Agrave', 'Atilde', 'Otilde', 'OE', 'oe', 'endash', 'emdash', 'quotedblleft',\n  'quotedblright', 'quoteleft', 'quoteright', 'divide', 'lozenge', 'ydieresis', 'Ydieresis', 'fraction',\n  'currency', 'guilsinglleft', 'guilsinglright', 'fi', 'fl', 'daggerdbl', 'periodcentered', 'quotesinglbase',\n  'quotedblbase', 'perthousand', 'Acircumflex', 'Ecircumflex', 'Aacute', 'Edieresis', 'Egrave', 'Iacute',\n  'Icircumflex', 'Idieresis', 'Igrave', 'Oacute', 'Ocircumflex', 'apple', 'Ograve', 'Uacute', 'Ucircumflex',\n  'Ugrave', 'dotlessi', 'circumflex', 'tilde', 'macron', 'breve', 'dotaccent', 'ring', 'cedilla', 'hungarumlaut',\n  'ogonek', 'caron', 'Lslash', 'lslash', 'Scaron', 'scaron', 'Zcaron', 'zcaron', 'brokenbar', 'Eth', 'eth',\n  'Yacute', 'yacute', 'Thorn', 'thorn', 'minus', 'multiply', 'onesuperior', 'twosuperior', 'threesuperior',\n  'onehalf', 'onequarter', 'threequarters', 'franc', 'Gbreve', 'gbreve', 'Idotaccent', 'Scedilla', 'scedilla',\n  'Cacute', 'cacute', 'Ccaron', 'ccaron', 'dcroat'\n];\n","import { cache } from '../decorators';\nimport Path from './Path';\nimport unicode from 'unicode-properties';\nimport StandardNames from './StandardNames';\n\n/**\n * Glyph objects represent a glyph in the font. They have various properties for accessing metrics and\n * the actual vector path the glyph represents, and methods for rendering the glyph to a graphics context.\n *\n * You do not create glyph objects directly. They are created by various methods on the font object.\n * There are several subclasses of the base Glyph class internally that may be returned depending\n * on the font format, but they all inherit from this class.\n */\nexport default class Glyph {\n  constructor(id, codePoints, font) {\n    /**\n     * The glyph id in the font\n     * @type {number}\n     */\n    this.id = id;\n\n    /**\n     * An array of unicode code points that are represented by this glyph.\n     * There can be multiple code points in the case of ligatures and other glyphs\n     * that represent multiple visual characters.\n     * @type {number[]}\n     */\n    this.codePoints = codePoints;\n    this._font = font;\n\n    // TODO: get this info from GDEF if available\n    this.isMark = this.codePoints.every(unicode.isMark);\n    this.isLigature = this.codePoints.length > 1;\n  }\n\n  _getPath() {\n    return new Path();\n  }\n\n  _getCBox() {\n    return this.path.cbox;\n  }\n\n  _getBBox() {\n    return this.path.bbox;\n  }\n\n  _getTableMetrics(table) {\n    if (this.id < table.metrics.length) {\n      return table.metrics.get(this.id);\n    }\n\n    let metric = table.metrics.get(table.metrics.length - 1);\n    let res = {\n      advance: metric ? metric.advance : 0,\n      bearing: table.bearings.get(this.id - table.metrics.length) || 0\n    };\n\n    return res;\n  }\n\n  _getMetrics(cbox) {\n    if (this._metrics) { return this._metrics; }\n\n    let {advance:advanceWidth, bearing:leftBearing} = this._getTableMetrics(this._font.hmtx);\n\n    // For vertical metrics, use vmtx if available, or fall back to global data from OS/2 or hhea\n    if (this._font.vmtx) {\n      var {advance:advanceHeight, bearing:topBearing} = this._getTableMetrics(this._font.vmtx);\n\n    } else {\n      let os2;\n      if (typeof cbox === 'undefined' || cbox === null) { ({ cbox } = this); }\n\n      if ((os2 = this._font['OS/2']) && os2.version > 0) {\n        var advanceHeight = Math.abs(os2.typoAscender - os2.typoDescender);\n        var topBearing = os2.typoAscender - cbox.maxY;\n\n      } else {\n        let { hhea } = this._font;\n        var advanceHeight = Math.abs(hhea.ascent - hhea.descent);\n        var topBearing = hhea.ascent - cbox.maxY;\n      }\n    }\n\n    return this._metrics = { advanceWidth, advanceHeight, leftBearing, topBearing };\n  }\n\n  /**\n   * The glyph’s control box.\n   * This is often the same as the bounding box, but is faster to compute.\n   * Because of the way bezier curves are defined, some of the control points\n   * can be outside of the bounding box. Where `bbox` takes this into account,\n   * `cbox` does not. Thus, cbox is less accurate, but faster to compute.\n   * See [here](http://www.freetype.org/freetype2/docs/glyphs/glyphs-6.html#section-2)\n   * for a more detailed description.\n   *\n   * @type {BBox}\n   */\n  @cache\n  get cbox() {\n    return this._getCBox();\n  }\n\n  /**\n   * The glyph’s bounding box, i.e. the rectangle that encloses the\n   * glyph outline as tightly as possible.\n   * @type {BBox}\n   */\n  @cache\n  get bbox() {\n    return this._getBBox();\n  }\n\n  /**\n   * A vector Path object representing the glyph outline.\n   * @type {Path}\n   */\n  @cache\n  get path() {\n    // Cache the path so we only decode it once\n    // Decoding is actually performed by subclasses\n    return this._getPath();\n  }\n\n  /**\n   * The glyph's advance width.\n   * @type {number}\n   */\n  @cache\n  get advanceWidth() {\n    return this._getMetrics().advanceWidth;\n  }\n\n  /**\n   * The glyph's advance height.\n   * @type {number}\n   */\n  @cache\n  get advanceHeight() {\n    return this._getMetrics().advanceHeight;\n  }\n\n  get ligatureCaretPositions() {}\n\n  _getName() {\n    let { post } = this._font;\n    if (!post) {\n      return null;\n    }\n\n    switch (post.version) {\n      case 1:\n        return StandardNames[this.id];\n\n      case 2:\n        let id = post.glyphNameIndex[this.id];\n        if (id < StandardNames.length) {\n          return StandardNames[id];\n        }\n\n        return post.names[id - StandardNames.length];\n\n      case 2.5:\n        return StandardNames[this.id + post.offsets[this.id]];\n\n      case 4:\n        return String.fromCharCode(post.map[this.id]);\n    }\n  }\n\n  /**\n   * The glyph's name\n   * @type {string}\n   */\n  @cache\n  get name() {\n    return this._getName();\n  }\n\n  /**\n   * Renders the glyph to the given graphics context, at the specified font size.\n   * @param {CanvasRenderingContext2d} ctx\n   * @param {number} size\n   */\n  render(ctx, size) {\n    ctx.save();\n\n    let scale = 1 / this._font.head.unitsPerEm * size;\n    ctx.scale(scale, scale);\n\n    let fn = this.path.toFunction();\n    fn(ctx);\n    ctx.fill();\n\n    ctx.restore();\n  }\n}\n","import Glyph from './Glyph';\nimport Path from './Path';\nimport BBox from './BBox';\nimport r from 'restructure';\n\n// The header for both simple and composite glyphs\nlet GlyfHeader = new r.Struct({\n  numberOfContours: r.int16, // if negative, this is a composite glyph\n  xMin:             r.int16,\n  yMin:             r.int16,\n  xMax:             r.int16,\n  yMax:             r.int16\n});\n\n// Flags for simple glyphs\nconst ON_CURVE        = 1 << 0;\nconst X_SHORT_VECTOR  = 1 << 1;\nconst Y_SHORT_VECTOR  = 1 << 2;\nconst REPEAT          = 1 << 3;\nconst SAME_X          = 1 << 4;\nconst SAME_Y          = 1 << 5;\n\n// Flags for composite glyphs\nconst ARG_1_AND_2_ARE_WORDS     = 1 << 0;\nconst ARGS_ARE_XY_VALUES        = 1 << 1;\nconst ROUND_XY_TO_GRID          = 1 << 2;\nconst WE_HAVE_A_SCALE           = 1 << 3;\nconst MORE_COMPONENTS           = 1 << 5;\nconst WE_HAVE_AN_X_AND_Y_SCALE  = 1 << 6;\nconst WE_HAVE_A_TWO_BY_TWO      = 1 << 7;\nconst WE_HAVE_INSTRUCTIONS      = 1 << 8;\nconst USE_MY_METRICS            = 1 << 9;\nconst OVERLAP_COMPOUND          = 1 << 10;\nconst SCALED_COMPONENT_OFFSET   = 1 << 11;\nconst UNSCALED_COMPONENT_OFFSET = 1 << 12;\n\n// Represents a point in a simple glyph\nexport class Point {\n  constructor(onCurve, endContour, x = 0, y = 0) {\n    this.onCurve = onCurve;\n    this.endContour = endContour;\n    this.x = x;\n    this.y = y;\n  }\n\n  copy() {\n    return new Point(this.onCurve, this.endContour, this.x, this.y);\n  }\n}\n\n// Represents a component in a composite glyph\nclass Component {\n  constructor(glyphID, dx, dy) {\n    this.glyphID = glyphID;\n    this.dx = dx;\n    this.dy = dy;\n    this.pos = 0;\n    this.scale = this.xScale = this.yScale = this.scale01 = this.scale10 = null;\n  }\n}\n\n/**\n * Represents a TrueType glyph.\n */\nexport default class TTFGlyph extends Glyph {\n  // Parses just the glyph header and returns the bounding box\n  _getCBox(internal) {\n    // We need to decode the glyph if variation processing is requested,\n    // so it's easier just to recompute the path's cbox after decoding.\n    if (this._font._variationProcessor && !internal) {\n      return this.path.cbox;\n    }\n\n    let stream = this._font._getTableStream('glyf');\n    stream.pos += this._font.loca.offsets[this.id];\n    let glyph = GlyfHeader.decode(stream);\n\n    let cbox = new BBox(glyph.xMin, glyph.yMin, glyph.xMax, glyph.yMax);\n    return Object.freeze(cbox);\n  }\n\n  // Parses a single glyph coordinate\n  _parseGlyphCoord(stream, prev, short, same) {\n    if (short) {\n      var val = stream.readUInt8();\n      if (!same) {\n        val = -val;\n      }\n\n      val += prev;\n    } else {\n      if (same) {\n        var val = prev;\n      } else {\n        var val = prev + stream.readInt16BE();\n      }\n    }\n\n    return val;\n  }\n\n  // Decodes the glyph data into points for simple glyphs,\n  // or components for composite glyphs\n  _decode() {\n    let glyfPos = this._font.loca.offsets[this.id];\n    let nextPos = this._font.loca.offsets[this.id + 1];\n\n    // Nothing to do if there is no data for this glyph\n    if (glyfPos === nextPos) { return null; }\n\n    let stream = this._font._getTableStream('glyf');\n    stream.pos += glyfPos;\n    let startPos = stream.pos;\n\n    let glyph = GlyfHeader.decode(stream);\n\n    if (glyph.numberOfContours > 0) {\n      this._decodeSimple(glyph, stream);\n\n    } else if (glyph.numberOfContours < 0) {\n      this._decodeComposite(glyph, stream, startPos);\n    }\n\n    return glyph;\n  }\n\n  _decodeSimple(glyph, stream) {\n    // this is a simple glyph\n    glyph.points = [];\n\n    let endPtsOfContours = new r.Array(r.uint16, glyph.numberOfContours).decode(stream);\n    let instructions = new r.Array(r.uint8, r.uint16).decode(stream);\n\n    let flags = [];\n    let numCoords = endPtsOfContours[endPtsOfContours.length - 1] + 1;\n\n    while (flags.length < numCoords) {\n      var flag = stream.readUInt8();\n      flags.push(flag);\n\n      // check for repeat flag\n      if (flag & REPEAT) {\n        let count = stream.readUInt8();\n        for (let j = 0; j < count; j++) {\n          flags.push(flag);\n        }\n      }\n    }\n\n    for (var i = 0; i < flags.length; i++) {\n      var flag = flags[i];\n      let point = new Point(!!(flag & ON_CURVE), endPtsOfContours.indexOf(i) >= 0, 0, 0);\n      glyph.points.push(point);\n    }\n\n    let px = 0;\n    for (var i = 0; i < flags.length; i++) {\n      var flag = flags[i];\n      glyph.points[i].x = px = this._parseGlyphCoord(stream, px, flag & X_SHORT_VECTOR, flag & SAME_X);\n    }\n\n    let py = 0;\n    for (var i = 0; i < flags.length; i++) {\n      var flag = flags[i];\n      glyph.points[i].y = py = this._parseGlyphCoord(stream, py, flag & Y_SHORT_VECTOR, flag & SAME_Y);\n    }\n\n    if (this._font._variationProcessor) {\n      let points = glyph.points.slice();\n      points.push(...this._getPhantomPoints(glyph));\n\n      this._font._variationProcessor.transformPoints(this.id, points);\n      glyph.phantomPoints = points.slice(-4);\n    }\n\n    return;\n  }\n\n  _decodeComposite(glyph, stream, offset = 0) {\n    // this is a composite glyph\n    glyph.components = [];\n    let haveInstructions = false;\n    let flags = MORE_COMPONENTS;\n\n    while (flags & MORE_COMPONENTS) {\n      flags = stream.readUInt16BE();\n      let gPos = stream.pos - offset;\n      let glyphID = stream.readUInt16BE();\n      if (!haveInstructions) {\n        haveInstructions = (flags & WE_HAVE_INSTRUCTIONS) !== 0;\n      }\n\n      if (flags & ARG_1_AND_2_ARE_WORDS) {\n        var dx = stream.readInt16BE();\n        var dy = stream.readInt16BE();\n      } else {\n        var dx = stream.readInt8();\n        var dy = stream.readInt8();\n      }\n\n      var component = new Component(glyphID, dx, dy);\n      component.pos = gPos;\n      component.scaleX = component.scaleY = 1;\n      component.scale01 = component.scale10 = 0;\n\n      if (flags & WE_HAVE_A_SCALE) {\n        // fixed number with 14 bits of fraction\n        component.scaleX =\n        component.scaleY = ((stream.readUInt8() << 24) | (stream.readUInt8() << 16)) / 1073741824;\n\n      } else if (flags & WE_HAVE_AN_X_AND_Y_SCALE) {\n        component.scaleX = ((stream.readUInt8() << 24) | (stream.readUInt8() << 16)) / 1073741824;\n        component.scaleY = ((stream.readUInt8() << 24) | (stream.readUInt8() << 16)) / 1073741824;\n\n      } else if (flags & WE_HAVE_A_TWO_BY_TWO) {\n        component.scaleX  = ((stream.readUInt8() << 24) | (stream.readUInt8() << 16)) / 1073741824;\n        component.scale01 = ((stream.readUInt8() << 24) | (stream.readUInt8() << 16)) / 1073741824;\n        component.scale10 = ((stream.readUInt8() << 24) | (stream.readUInt8() << 16)) / 1073741824;\n        component.scaleY  = ((stream.readUInt8() << 24) | (stream.readUInt8() << 16)) / 1073741824;\n      }\n\n      glyph.components.push(component);\n    }\n\n    if (this._font._variationProcessor) {\n      let points = [];\n      for (let j = 0; j < glyph.components.length; j++) {\n        var component = glyph.components[j];\n        points.push(new Point(true, true, component.dx, component.dy));\n      }\n\n      points.push(...this._getPhantomPoints(glyph));\n\n      this._font._variationProcessor.transformPoints(this.id, points);\n      glyph.phantomPoints = points.splice(-4, 4);\n\n      for (let i = 0; i < points.length; i++) {\n        let point = points[i];\n        glyph.components[i].dx = point.x;\n        glyph.components[i].dy = point.y;\n      }\n    }\n\n    return haveInstructions;\n  }\n\n  _getPhantomPoints(glyph) {\n    let cbox = this._getCBox(true);\n    if (this._metrics == null) {\n      this._metrics = Glyph.prototype._getMetrics.call(this, cbox);\n    }\n\n    let { advanceWidth, advanceHeight, leftBearing, topBearing } = this._metrics;\n\n    return [\n      new Point(false, true, glyph.xMin - leftBearing, 0),\n      new Point(false, true, glyph.xMin - leftBearing + advanceWidth, 0),\n      new Point(false, true, 0, glyph.yMax + topBearing),\n      new Point(false, true, 0, glyph.yMax + topBearing + advanceHeight)\n    ];\n  }\n\n  // Decodes font data, resolves composite glyphs, and returns an array of contours\n  _getContours() {\n    let glyph = this._decode();\n    if (!glyph) { return []; }\n\n    if (glyph.numberOfContours < 0) {\n      // resolve composite glyphs\n      var points = [];\n      for (let component of glyph.components) {\n        glyph = this._font.getGlyph(component.glyphID)._decode();\n        // TODO transform\n        for (let point of glyph.points) {\n          points.push(new Point(point.onCurve, point.endContour, point.x + component.dx, point.y + component.dy));\n        }\n      }\n    } else {\n      var { points } = glyph;\n    }\n\n    // Recompute and cache metrics if we performed variation processing\n    if (glyph.phantomPoints) {\n      this._metrics.advanceWidth  = glyph.phantomPoints[1].x - glyph.phantomPoints[0].x;\n      this._metrics.advanceHeight = glyph.phantomPoints[3].y - glyph.phantomPoints[2].y;\n      this._metrics.leftBearing   = glyph.xMin - glyph.phantomPoints[0].x;\n      this._metrics.topBearing    = glyph.phantomPoints[2].y - glyph.yMax;\n    }\n\n    let contours = [];\n    let cur = [];\n    for (let k = 0; k < points.length; k++) {\n      var point = points[k];\n      cur.push(point);\n      if (point.endContour) {\n        contours.push(cur);\n        cur = [];\n      }\n    }\n\n    return contours;\n  }\n\n  _getMetrics() {\n    if (this._metrics) {\n      return this._metrics;\n    }\n\n    let cbox = this._getCBox(true);\n    super._getMetrics(cbox);\n\n    if (this._font._variationProcessor) {\n      // Decode the font data (and cache for later).\n      // This triggers recomputation of metrics\n      this.path;\n    }\n\n    return this._metrics;\n  }\n\n  // Converts contours to a Path object that can be rendered\n  _getPath() {\n    let contours = this._getContours();\n    let path = new Path;\n\n    for (let i = 0; i < contours.length; i++) {\n      let contour = contours[i];\n      let firstPt = contour[0];\n      let lastPt = contour[contour.length - 1];\n      let start = 0;\n\n      if (firstPt.onCurve) {\n        // The first point will be consumed by the moveTo command, so skip in the loop\n        var curvePt = null;\n        start = 1;\n      } else {\n        if (lastPt.onCurve) {\n          // Start at the last point if the first point is off curve and the last point is on curve\n          firstPt = lastPt;\n        } else {\n          // Start at the middle if both the first and last points are off curve\n          firstPt = new Point(false, false, (firstPt.x + lastPt.x) / 2, (firstPt.y + lastPt.y) / 2);\n        }\n\n        var curvePt = firstPt;\n      }\n\n      path.moveTo(firstPt.x, firstPt.y);\n\n      for (let j = start; j < contour.length; j++) {\n        let pt = contour[j];\n        let prevPt = j === 0 ? firstPt : contour[j - 1];\n\n        if (prevPt.onCurve && pt.onCurve) {\n          path.lineTo(pt.x, pt.y);\n\n        } else if (prevPt.onCurve && !pt.onCurve) {\n          var curvePt = pt;\n\n        } else if (!prevPt.onCurve && !pt.onCurve) {\n          let midX = (prevPt.x + pt.x) / 2;\n          let midY = (prevPt.y + pt.y) / 2;\n          path.quadraticCurveTo(prevPt.x, prevPt.y, midX, midY);\n          var curvePt = pt;\n\n        } else if (!prevPt.onCurve && pt.onCurve) {\n          path.quadraticCurveTo(curvePt.x, curvePt.y, pt.x, pt.y);\n          var curvePt = null;\n\n        } else {\n          throw new Error(\"Unknown TTF path state\");\n        }\n      }\n\n      // Connect the first and last points\n      if (curvePt) {\n        path.quadraticCurveTo(curvePt.x, curvePt.y, firstPt.x, firstPt.y);\n      }\n      \n      path.closePath();\n    }\n\n    return path;\n  }\n}\n","import Glyph from './Glyph';\nimport Path from './Path';\n\n/**\n * Represents an OpenType PostScript glyph, in the Compact Font Format.\n */\nexport default class CFFGlyph extends Glyph {\n  _getName() {\n    return this._font['CFF '].getGlyphName(this.id);\n  }\n\n  bias(s) {\n    if (s.length < 1240) {\n      return 107;\n    } else if (s.length < 33900) {\n      return 1131;\n    } else {\n      return 32768;\n    }\n  }\n\n  _getPath() {\n    let { stream } = this._font;\n    let { pos } = stream;\n\n    let cff = this._font['CFF '];\n    let str = cff.topDict.CharStrings[this.id];\n    let end = str.offset + str.length;\n    stream.pos = str.offset;\n\n    let path = new Path;\n    let stack = [];\n    let trans = [];\n\n    let width = null;\n    let nStems = 0;\n    let x = 0, y = 0;\n    let usedGsubrs;\n    let usedSubrs;\n\n    this._usedGsubrs = usedGsubrs = {};\n    this._usedSubrs = usedSubrs = {};\n\n    let gsubrs = cff.globalSubrIndex || [];\n    let gsubrsBias = this.bias(gsubrs);\n\n    let privateDict = cff.privateDictForGlyph(this.id);\n    let subrs = privateDict.Subrs || [];\n    let subrsBias = this.bias(subrs);\n\n    let parseStems = function() {\n      if (stack.length % 2 !== 0) {\n        if (width === null) {\n          width = stack.shift() + privateDict.nominalWidthX;\n        }\n      }\n\n      nStems += stack.length >> 1;\n      return stack.length = 0;\n    };\n\n    let parse = function() {\n      while (stream.pos < end) {\n        let op = stream.readUInt8();\n        if (op < 32) {\n          switch (op) {\n            case 1: case 3: case 18: case 23: // hstem, vstem, hstemhm, vstemhm\n              parseStems();\n              break;\n\n            case 4: // vmoveto\n              if (stack.length > 1) {\n                if (typeof width === 'undefined' || width === null) { width = stack.shift() + privateDict.nominalWidthX; }\n              }\n\n              y += stack.shift();\n              path.moveTo(x, y);\n              break;\n\n            case 5: // rlineto\n              while (stack.length >= 2) {\n                x += stack.shift();\n                y += stack.shift();\n                path.lineTo(x, y);\n              }\n              break;\n\n            case 6: case 7: // hlineto, vlineto\n              let phase = op === 6;\n              while (stack.length >= 1) {\n                if (phase) {\n                  x += stack.shift();\n                } else {\n                  y += stack.shift();\n                }\n\n                path.lineTo(x, y);\n                phase = !phase;\n              }\n              break;\n\n            case 8: // rrcurveto\n              while (stack.length > 0) {\n                var c1x = x + stack.shift();\n                var c1y = y + stack.shift();\n                var c2x = c1x + stack.shift();\n                var c2y = c1y + stack.shift();\n                x = c2x + stack.shift();\n                y = c2y + stack.shift();\n                path.bezierCurveTo(c1x, c1y, c2x, c2y, x, y);\n              }\n              break;\n\n            case 10: // callsubr\n              let index = stack.pop() + subrsBias;\n              let subr = subrs[index];\n              if (subr) {\n                usedSubrs[index] = true;\n                var p = stream.pos;\n                var e = end;\n                stream.pos = subr.offset;\n                end = subr.offset + subr.length;\n                parse();\n                stream.pos = p;\n                end = e;\n              }\n              break;\n\n            case 11: // return\n              return;\n              break;\n\n            case 14: // endchar\n              if (stack.length > 0) {\n                if (typeof width === 'undefined' || width === null) { width = stack.shift() + privateDict.nominalWidthX; }\n              }\n\n              path.closePath();\n              break;\n\n            case 19: case 20: // hintmask, cntrmask\n              parseStems();\n              stream.pos += (nStems + 7) >> 3;\n              break;\n\n            case 21: // rmoveto\n              if (stack.length > 2) {\n                if (typeof width === 'undefined' || width === null) { width = stack.shift() + privateDict.nominalWidthX; }\n                let haveWidth = true;\n              }\n\n              x += stack.shift();\n              y += stack.shift();\n              path.moveTo(x, y);\n              break;\n\n            case 22: // hmoveto\n              if (stack.length > 1) {\n                if (typeof width === 'undefined' || width === null) { width = stack.shift() + privateDict.nominalWidthX; }\n              }\n\n              x += stack.shift();\n              path.moveTo(x, y);\n              break;\n\n            case 24: // rcurveline\n              while (stack.length >= 8) {\n                var c1x = x + stack.shift();\n                var c1y = y + stack.shift();\n                var c2x = c1x + stack.shift();\n                var c2y = c1y + stack.shift();\n                x = c2x + stack.shift();\n                y = c2y + stack.shift();\n                path.bezierCurveTo(c1x, c1y, c2x, c2y, x, y);\n              }\n\n              x += stack.shift();\n              y += stack.shift();\n              path.lineTo(x, y);\n              break;\n\n            case 25: // rlinecurve\n              while (stack.length >= 8) {\n                x += stack.shift();\n                y += stack.shift();\n                path.lineTo(x, y);\n              }\n\n              var c1x = x + stack.shift();\n              var c1y = y + stack.shift();\n              var c2x = c1x + stack.shift();\n              var c2y = c1y + stack.shift();\n              x = c2x + stack.shift();\n              y = c2y + stack.shift();\n              path.bezierCurveTo(c1x, c1y, c2x, c2y, x, y);\n              break;\n\n            case 26: // vvcurveto\n              if (stack.length % 2) {\n                x += stack.shift();\n              }\n\n              while (stack.length >= 4) {\n                c1x = x;\n                c1y = y + stack.shift();\n                c2x = c1x + stack.shift();\n                c2y = c1y + stack.shift();\n                x = c2x;\n                y = c2y + stack.shift();\n                path.bezierCurveTo(c1x, c1y, c2x, c2y, x, y);\n              }\n              break;\n\n            case 27: // hhcurveto\n              if (stack.length % 2) {\n                y += stack.shift();\n              }\n\n              while (stack.length >= 4) {\n                c1x = x + stack.shift();\n                c1y = y;\n                c2x = c1x + stack.shift();\n                c2y = c1y + stack.shift();\n                x = c2x + stack.shift();\n                y = c2y;\n                path.bezierCurveTo(c1x, c1y, c2x, c2y, x, y);\n              }\n              break;\n\n            case 28: // shortint\n              stack.push(stream.readInt16BE());\n              break;\n\n            case 29: // callgsubr\n              index = stack.pop() + gsubrsBias;\n              subr = gsubrs[index];\n              if (subr) {\n                usedGsubrs[index] = true;\n                var p = stream.pos;\n                var e = end;\n                stream.pos = subr.offset;\n                end = subr.offset + subr.length;\n                parse();\n                stream.pos = p;\n                end = e;\n              }\n              break;\n\n            case 30: case 31: // vhcurveto, hvcurveto\n              phase = op === 31;\n              while (stack.length >= 4) {\n                if (phase) {\n                  c1x = x + stack.shift();\n                  c1y = y;\n                  c2x = c1x + stack.shift();\n                  c2y = c1y + stack.shift();\n                  y = c2y + stack.shift();\n                  x = c2x + (stack.length === 1 ? stack.shift() : 0);\n                } else {\n                  c1x = x;\n                  c1y = y + stack.shift();\n                  c2x = c1x + stack.shift();\n                  c2y = c1y + stack.shift();\n                  x = c2x + stack.shift();\n                  y = c2y + (stack.length === 1 ? stack.shift() : 0);\n                }\n\n                path.bezierCurveTo(c1x, c1y, c2x, c2y, x, y);\n                phase = !phase;\n              }\n              break;\n\n            case 12:\n              op = stream.readUInt8();\n              switch (op) {\n                case 3: // and\n                  let a = stack.pop();\n                  let b = stack.pop();\n                  stack.push(a && b ? 1 : 0);\n                  break;\n\n                case 4: // or\n                  a = stack.pop();\n                  b = stack.pop();\n                  stack.push(a || b ? 1 : 0);\n                  break;\n\n                case 5: // not\n                  a = stack.pop();\n                  stack.push(a ? 0 : 1);\n                  break;\n\n                case 9: // abs\n                  a = stack.pop();\n                  stack.push(Math.abs(a));\n                  break;\n\n                case 10: // add\n                  a = stack.pop();\n                  b = stack.pop();\n                  stack.push(a + b);\n                  break;\n\n                case 11: // sub\n                  a = stack.pop();\n                  b = stack.pop();\n                  stack.push(a - b);\n                  break;\n\n                case 12: // div\n                  a = stack.pop();\n                  b = stack.pop();\n                  stack.push(a / b);\n                  break;\n\n                case 14: // neg\n                  a = stack.pop();\n                  stack.push(-a);\n                  break;\n\n                case 15: // eq\n                  a = stack.pop();\n                  b = stack.pop();\n                  stack.push(a === b ? 1 : 0);\n                  break;\n\n                case 18: // drop\n                  stack.pop();\n                  break;\n\n                case 20: // put\n                  let val = stack.pop();\n                  let idx = stack.pop();\n                  trans[idx] = val;\n                  break;\n\n                case 21: // get\n                  idx = stack.pop();\n                  stack.push(trans[idx] || 0);\n                  break;\n\n                case 22: // ifelse\n                  let s1 = stack.pop();\n                  let s2 = stack.pop();\n                  let v1 = stack.pop();\n                  let v2 = stack.pop();\n                  stack.push(v1 <= v2 ? s1 : s2);\n                  break;\n\n                case 23: // random\n                  stack.push(Math.random());\n                  break;\n\n                case 24: // mul\n                  a = stack.pop();\n                  b = stack.pop();\n                  stack.push(a * b);\n                  break;\n\n                case 26: // sqrt\n                  a = stack.pop();\n                  stack.push(Math.sqrt(a));\n                  break;\n\n                case 27: // dup\n                  a = stack.pop();\n                  stack.push(a, a);\n                  break;\n\n                case 28: // exch\n                  a = stack.pop();\n                  b = stack.pop();\n                  stack.push(b, a);\n                  break;\n\n                case 29: // index\n                  idx = stack.pop();\n                  if (idx < 0) {\n                    idx = 0;\n                  } else if (idx > stack.length - 1) {\n                    idx = stack.length - 1;\n                  }\n\n                  stack.push(stack[idx]);\n                  break;\n\n                case 30: // roll\n                  let n = stack.pop();\n                  let j = stack.pop();\n\n                  if (j >= 0) {\n                    while (j > 0) {\n                      var t = stack[n - 1];\n                      for (let i = n - 2; i >= 0; i--) {\n                        stack[i + 1] = stack[i];\n                      }\n\n                      stack[0] = t;\n                      j--;\n                    }\n                  } else {\n                    while (j < 0) {\n                      var t = stack[0];\n                      for (let i = 0; i <= n; i++) {\n                        stack[i] = stack[i + 1];\n                      }\n\n                      stack[n - 1] = t;\n                      j++;\n                    }\n                  }\n                  break;\n\n                case 34: // hflex\n                  c1x = x + stack.shift();\n                  c1y = y;\n                  c2x = c1x + stack.shift();\n                  c2y = c1y + stack.shift();\n                  let c3x = c2x + stack.shift();\n                  let c3y = c2y;\n                  let c4x = c3x + stack.shift();\n                  let c4y = c3y;\n                  let c5x = c4x + stack.shift();\n                  let c5y = c4y;\n                  let c6x = c5x + stack.shift();\n                  let c6y = c5y;\n                  x = c6x;\n                  y = c6y;\n\n                  path.bezierCurveTo(c1x, c1y, c2x, c2y, c3x, c3y);\n                  path.bezierCurveTo(c4x, c4y, c5x, c5y, c6x, c6y);\n                  break;\n\n                case 35: // flex\n                  let pts = [];\n                  let iterable2 = [0, 1, 2, 3, 4, 5];\n                  for (let j1 = 0; j1 < iterable2.length; j1++) {\n                    i = iterable2[j1];\n                    x += stack.shift();\n                    y += stack.shift();\n                    pts.push(x, y);\n                  }\n\n                  path.bezierCurveTo(...pts.slice(0, 6));\n                  path.bezierCurveTo(...pts.slice(6));\n                  stack.shift(); // fd\n                  break;\n\n                case 36: // hflex1\n                  c1x = x + stack.shift();\n                  c1y = y + stack.shift();\n                  c2x = c1x + stack.shift();\n                  c2y = c1y + stack.shift();\n                  c3x = c2x + stack.shift();\n                  c3y = c2y;\n                  c4x = c3x + stack.shift();\n                  c4y = c3y;\n                  c5x = c4x + stack.shift();\n                  c5y = c4y + stack.shift();\n                  c6x = c5x + stack.shift();\n                  c6y = c5y;\n                  x = c6x;\n                  y = c6y;\n\n                  path.bezierCurveTo(c1x, c1y, c2x, c2y, c3x, c3y);\n                  path.bezierCurveTo(c4x, c4y, c5x, c5y, c6x, c6y);\n                  break;\n\n                case 37: // flex1\n                  let startx = x;\n                  let starty = y;\n\n                  pts = [];\n                  let iterable3 = [0, 1, 2, 3, 4];\n                  for (let k1 = 0; k1 < iterable3.length; k1++) {\n                    i = iterable3[k1];\n                    x += stack.shift();\n                    y += stack.shift();\n                    pts.push(x, y);\n                  }\n\n                  if (Math.abs(x - startx) > Math.abs(y - starty)) { // horizontal\n                    x += stack.shift();\n                    y = starty;\n                  } else {\n                    x = startx;\n                    y += stack.shift();\n                  }\n\n                  pts.push(x, y);\n                  path.bezierCurveTo(...pts.slice(0, 6));\n                  path.bezierCurveTo(...pts.slice(6));\n                  break;\n\n                default:\n                  throw new Error(`Unknown op: 12 ${op}`);\n              }\n              break;\n\n            default:\n              throw new Error(`Unknown op: ${op}`);\n          }\n\n        } else if (op < 247) {\n          stack.push(op - 139);\n        } else if (op < 251) {\n          var b1 = stream.readUInt8();\n          stack.push((op - 247) * 256 + b1 + 108);\n        } else if (op < 255) {\n          var b1 = stream.readUInt8();\n          stack.push(-(op - 251) * 256 - b1 - 108);\n        } else {\n          stack.push(stream.readInt32BE() / 65536);\n        }\n      }\n    };\n\n    parse();\n    return path;\n  }\n}\n","import TTFGlyph from './TTFGlyph';\nimport r from 'restructure';\n\nlet SBIXImage = new r.Struct({\n  originX: r.uint16,\n  originY: r.uint16,\n  type: new r.String(4),\n  data: new r.Buffer(t => t.parent.buflen - t._currentOffset)\n});\n\n/**\n * Represents a color (e.g. emoji) glyph in Apple's SBIX format.\n */\nexport default class SBIXGlyph extends TTFGlyph {\n  /**\n   * Returns an object representing a glyph image at the given point size.\n   * The object has a data property with a Buffer containing the actual image data,\n   * along with the image type, and origin.\n   *\n   * @param {number} size\n   * @return {object}\n   */\n  getImageForSize(size) {\n    for (let i = 0; i < this._font.sbix.imageTables.length; i++) {\n      var table = this._font.sbix.imageTables[i];\n      if (table.ppem >= size) { break; }\n    }\n\n    let offsets = table.imageOffsets;\n    let start = offsets[this.id];\n    let end = offsets[this.id + 1];\n\n    if (start === end) {\n      return null;\n    }\n\n    this._font.stream.pos = start;\n    return SBIXImage.decode(this._font.stream, {buflen: end - start});\n  }\n\n  render(ctx, size) {\n    let img = this.getImageForSize(size);\n    if (img != null) {\n      let scale = size / this._font.unitsPerEm;\n      ctx.image(img.data, {height: size, x: img.originX, y: (this.bbox.minY - img.originY) * scale});\n    }\n\n    if (this._font.sbix.flags.renderOutlines) {\n      super.render(ctx, size);\n    }\n  }\n}\n","import Glyph from './Glyph';\nimport BBox from './BBox';\n\nclass COLRLayer {\n  constructor(glyph, color) {\n    this.glyph = glyph;\n    this.color = color;\n  }\n}\n\n/**\n * Represents a color (e.g. emoji) glyph in Microsoft's COLR format.\n * Each glyph in this format contain a list of colored layers, each\n * of which  is another vector glyph.\n */\nexport default class COLRGlyph extends Glyph {\n  _getBBox() {\n    let bbox = new BBox;\n    for (let i = 0; i < this.layers.length; i++) {\n      let layer = this.layers[i];\n      let b = layer.glyph.bbox;\n      bbox.addPoint(b.minX, b.minY);\n      bbox.addPoint(b.maxX, b.maxY);\n    }\n\n    return bbox;\n  }\n\n  /**\n   * Returns an array of objects containing the glyph and color for\n   * each layer in the composite color glyph.\n   * @type {object[]}\n   */\n  get layers() {\n    let cpal = this._font.CPAL;\n    let colr = this._font.COLR;\n    let low = 0;\n    let high = colr.baseGlyphRecord.length - 1;\n\n    while (low <= high) {\n      let mid = (low + high) >> 1;\n      var rec = colr.baseGlyphRecord[mid];\n\n      if (this.id < rec.gid) {\n        high = mid - 1;\n      } else if (this.id > rec.gid) {\n        low = mid + 1;\n      } else {\n        var baseLayer = rec;\n        break;\n      }\n    }\n\n    // if base glyph not found in COLR table,\n    // default to normal glyph from glyf or CFF\n    if (baseLayer == null) {\n      var g = this._font._getBaseGlyph(this.id);\n      var color = {\n        red: 0,\n        green: 0,\n        blue: 0,\n        alpha: 255\n      };\n\n      return [new COLRLayer(g, color)];\n    }\n\n    // otherwise, return an array of all the layers\n    let layers = [];\n    for (let i = baseLayer.firstLayerIndex; i < baseLayer.firstLayerIndex + baseLayer.numLayers; i++) {\n      var rec = colr.layerRecords[i];\n      var color = cpal.colorRecords[rec.paletteIndex];\n      var g = this._font._getBaseGlyph(rec.gid);\n      layers.push(new COLRLayer(g, color));\n    }\n\n    return layers;\n  }\n\n  render(ctx, size) {\n    for (let {glyph, color} of this.layers) {\n      ctx.fillColor([color.red, color.green, color.blue], color.alpha / 255 * 100);\n      glyph.render(ctx, size);\n    }\n\n    return;\n  }\n}\n","const TUPLES_SHARE_POINT_NUMBERS = 0x8000;\nconst TUPLE_COUNT_MASK           = 0x0fff;\nconst EMBEDDED_TUPLE_COORD       = 0x8000;\nconst INTERMEDIATE_TUPLE         = 0x4000;\nconst PRIVATE_POINT_NUMBERS      = 0x2000;\nconst TUPLE_INDEX_MASK           = 0x0fff;\nconst POINTS_ARE_WORDS           = 0x80;\nconst POINT_RUN_COUNT_MASK       = 0x7f;\nconst DELTAS_ARE_ZERO            = 0x80;\nconst DELTAS_ARE_WORDS           = 0x40;\nconst DELTA_RUN_COUNT_MASK       = 0x3f;\n\n/**\n * This class is transforms TrueType glyphs according to the data from\n * the Apple Advanced Typography variation tables (fvar, gvar, and avar).\n * These tables allow infinite adjustments to glyph weight, width, slant,\n * and optical size without the designer needing to specify every exact style.\n *\n * Apple's documentation for these tables is not great, so thanks to the\n * Freetype project for figuring much of this out.\n *\n * @private\n */\nexport default class GlyphVariationProcessor {\n  constructor(font, coords) {\n    this.font = font;\n    this.normalizedCoords = this.normalizeCoords(coords);\n  }\n\n  normalizeCoords(coords) {\n    // the default mapping is linear along each axis, in two segments:\n    // from the minValue to defaultValue, and from defaultValue to maxValue.\n    let normalized = [];\n    for (var i = 0; i < this.font.fvar.axis.length; i++) {\n      let axis = this.font.fvar.axis[i];\n      if (coords[i] < axis.defaultValue) {\n        normalized.push((coords[i] - axis.defaultValue) / (axis.defaultValue - axis.minValue));\n      } else {\n        normalized.push((coords[i] - axis.defaultValue) / (axis.maxValue - axis.defaultValue));\n      }\n    }\n\n    // if there is an avar table, the normalized value is calculated\n    // by interpolating between the two nearest mapped values.\n    if (this.font.avar) {\n      for (var i = 0; i < this.font.avar.segment.length; i++) {\n        let segment = this.font.avar.segment[i];\n        for (let j = 0; j < segment.correspondence.length; j++) {\n          let pair = segment.correspondence[j];\n          if (j >= 1 && normalized[i] < pair.fromCoord) {\n            let prev = segment.correspondence[j - 1];\n            normalized[i] = (normalized[i] - prev.fromCoord) *\n              (pair.toCoord - prev.toCoord) / (pair.fromCoord - prev.fromCoord) +\n              prev.toCoord;\n\n            break;\n          }\n        }\n      }\n    }\n\n    return normalized;\n  }\n\n  transformPoints(gid, glyphPoints) {\n    if (!this.font.fvar || !this.font.gvar) { return; }\n\n    let { gvar } = this.font;\n    if (gid >= gvar.glyphCount) { return; }\n\n    let offset = gvar.offsets[gid];\n    if (offset === gvar.offsets[gid + 1]) { return; }\n\n    // Read the gvar data for this glyph\n    let { stream } = this.font;\n    stream.pos = offset;\n    if (stream.pos >= stream.length) {\n      return;\n    }\n\n    let tupleCount = stream.readUInt16BE();\n    let offsetToData = offset + stream.readUInt16BE();\n\n    if (tupleCount & TUPLES_SHARE_POINT_NUMBERS) {\n      var here = stream.pos;\n      stream.pos = offsetToData;\n      var sharedPoints = this.decodePoints();\n      stream.pos = here;\n    }\n\n    tupleCount &= TUPLE_COUNT_MASK;\n    for (let i = 0; i < tupleCount; i++) {\n      let tupleDataSize = stream.readUInt16BE();\n      let tupleIndex = stream.readUInt16BE();\n\n      if (tupleIndex & EMBEDDED_TUPLE_COORD) {\n        var tupleCoords = [];\n        for (let a = 0; a < gvar.axisCount; a++) {\n          tupleCoords.push(stream.readInt16BE() / 16384);\n        }\n\n      } else {\n        if ((tupleIndex & TUPLE_INDEX_MASK) >= gvar.globalCoordCount) {\n          throw new Error('Invalid gvar table');\n        }\n\n        var tupleCoords = gvar.globalCoords[tupleIndex & TUPLE_INDEX_MASK];\n      }\n\n      if (tupleIndex & INTERMEDIATE_TUPLE) {\n        var startCoords = [];\n        for (let a = 0; a < gvar.axisCount; a++) {\n          startCoords.push(stream.readInt16BE() / 16384);\n        }\n\n        var endCoords = [];\n        for (let a = 0; a < gvar.axisCount; a++) {\n          endCoords.push(stream.readInt16BE() / 16384);\n        }\n      }\n\n      // Get the factor at which to apply this tuple\n      let factor = this.tupleFactor(tupleIndex, tupleCoords, startCoords, endCoords);\n      if (factor === 0) {\n        offsetToData += tupleDataSize;\n        continue;\n      }\n\n      var here = stream.pos;\n\n      if (tupleIndex & PRIVATE_POINT_NUMBERS) {\n        stream.pos = offsetToData;\n        var points = this.decodePoints();\n      } else {\n        var points = sharedPoints;\n      }\n\n      // points.length = 0 means there are deltas for all points\n      let nPoints = points.length === 0 ? glyphPoints.length : points.length;\n      let xDeltas = this.decodeDeltas(nPoints);\n      let yDeltas = this.decodeDeltas(nPoints);\n\n      if (points.length === 0) { // all points\n        for (let i = 0; i < glyphPoints.length; i++) {\n          var point = glyphPoints[i];\n          point.x += Math.round(xDeltas[i] * factor);\n          point.y += Math.round(yDeltas[i] * factor);\n        }\n      } else {\n        let origPoints = glyphPoints.slice();\n        let hasDelta = glyphPoints.map(() => false);\n\n        for (let i = 0; i < points.length; i++) {\n          let idx = points[i];\n          if (idx < glyphPoints.length) {\n            var point = glyphPoints[idx];\n            origPoints[idx] = point.copy();\n            hasDelta[idx] = true;\n\n            point.x += Math.round(xDeltas[i] * factor);\n            point.y += Math.round(yDeltas[i] * factor);\n          }\n        }\n\n        this.interpolateMissingDeltas(glyphPoints, origPoints, hasDelta);\n      }\n\n      offsetToData += tupleDataSize;\n      stream.pos = here;\n    }\n\n    return;\n  }\n\n  decodePoints() {\n    let { stream } = this.font;\n    let count = stream.readUInt8();\n\n    if (count & POINTS_ARE_WORDS) {\n      count = (count & POINT_RUN_COUNT_MASK) << 8 | stream.readUInt8();\n    }\n\n    let points = new Uint16Array(count);\n    let i = 0;\n    while (i < count) {\n      let run = stream.readUInt8();\n      let runCount = (run & POINT_RUN_COUNT_MASK) + 1;\n      if (i + runCount > count) {\n        throw new Error('Bad point run length');\n      }\n\n      let fn = run & POINTS_ARE_WORDS ? stream.readUInt16 : stream.readUInt8;\n\n      let point = 0;\n      for (let j = 0; j < runCount; j++) {\n        point += fn.call(stream);\n        points[i++] = point;\n      }\n    }\n\n    return points;\n  }\n\n  decodeDeltas(count) {\n    let { stream } = this.font;\n    let i = 0;\n    let deltas = new Int16Array(count);\n\n    while (i < count) {\n      let run = stream.readUInt8();\n      let runCount = (run & DELTA_RUN_COUNT_MASK) + 1;\n      if (i + runCount > count) {\n        throw new Error('Bad delta run length');\n      }\n\n      if (run & DELTAS_ARE_ZERO) {\n        i += runCount;\n\n      } else {\n        let fn = run & DELTAS_ARE_WORDS ? stream.readInt16BE : stream.readInt8;\n        for (let j = 0; j < runCount; j++) {\n          deltas[i++] = fn.call(stream);\n        }\n      }\n    }\n\n    return deltas;\n  }\n\n  tupleFactor(tupleIndex, tupleCoords, startCoords, endCoords) {\n    let normalized = this.normalizedCoords;\n    let { gvar } = this.font;\n    let factor = 1;\n\n    for (let i = 0; i < gvar.axisCount; i++) {\n      if (tupleCoords[i] === 0) {\n        continue;\n\n      } else if (normalized[i] === 0) {\n        return 0;\n\n      } else if ((normalized[i] < 0 && tupleCoords[i] > 0) ||\n                 (normalized[i] > 0 && tupleCoords[i] < 0)) {\n        return 0;\n\n      } else if ((tupleIndex & INTERMEDIATE_TUPLE) === 0) {\n        factor *= Math.abs(normalized[i]);\n\n      } else if ((normalized[i] < startCoords[i]) ||\n                 (normalized[i] > endCoords[i])) {\n        return 0;\n\n      } else if (normalized[i] < tupleCoords[i]) {\n        factor = (factor * (normalized[i] - startCoords[i])) / (tupleCoords[i] - startCoords[i]);\n\n      } else {\n        factor = (factor * (endCoords[i] - normalized[i]) / (endCoords[i] - tupleCoords[i]));\n      }\n    }\n\n    return factor;\n  }\n\n  // Interpolates points without delta values.\n  // Needed for the Ø and Q glyphs in Skia.\n  // Algorithm from Freetype.\n  interpolateMissingDeltas(points, inPoints, hasDelta) {\n    if (points.length === 0) {\n      return;\n    }\n\n    let point = 0;\n    while (point < points.length) {\n      let firstPoint = point;\n\n      // find the end point of the contour\n      let endPoint = point;\n      let pt = points[endPoint];\n      while (!pt.endContour) {\n        pt = points[++endPoint];\n      }\n\n      // find the first point that has a delta\n      while (point <= endPoint && !hasDelta[point]) {\n        point++;\n      }\n\n      if (point > endPoint) { continue; }\n\n      let firstDelta = point;\n      let curDelta = point;\n      point++;\n\n      while (point <= endPoint) {\n        // find the next point with a delta, and interpolate intermediate points\n        if (hasDelta[point]) {\n          this.deltaInterpolate(curDelta + 1, point - 1, curDelta, point, inPoints, points);\n          curDelta = point;\n        }\n\n        point++;\n      }\n\n      // shift contour if we only have a single delta\n      if (curDelta === firstDelta) {\n        this.deltaShift(firstPoint, endPoint, curDelta, inPoints, points);\n      } else {\n        // otherwise, handle the remaining points at the end and beginning of the contour\n        this.deltaInterpolate(curDelta + 1, endPoint, curDelta, firstDelta, inPoints, points);\n\n        if (firstDelta > 0) {\n          this.deltaInterpolate(firstPoint, firstDelta - 1, curDelta, firstDelta, inPoints, points);\n        }\n      }\n\n      point = endPoint + 1;\n    }\n\n    return;\n  }\n\n  deltaInterpolate(p1, p2, ref1, ref2, inPoints, outPoints) {\n    if (p1 > p2) {\n      return;\n    }\n\n    let iterable = ['x', 'y'];\n    for (let i = 0; i < iterable.length; i++) {\n      let k = iterable[i];\n      if (inPoints[ref1][k] > inPoints[ref2][k]) {\n        var p = ref1;\n        ref1 = ref2;\n        ref2 = p;\n      }\n\n      let in1 = inPoints[ref1][k];\n      let in2 = inPoints[ref2][k];\n      let out1 = outPoints[ref1][k];\n      let out2 = outPoints[ref2][k];\n\n      let scale = in1 === in2 ? 0 : (out2 - out1) / (in2 - in1);\n\n      for (let p = p1; p <= p2; p++) {\n        let out = inPoints[p][k];\n\n        if (out <= in1) {\n          out += out1 - in1;\n        } else if (out >= in2) {\n          out += out2 - in2;\n        } else {\n          out = out1 + (out - in1) * scale;\n        }\n\n        outPoints[p][k] = out;\n      }\n    }\n\n    return;\n  }\n\n  deltaShift(p1, p2, ref, inPoints, outPoints) {\n    let deltaX = outPoints[ref].x - inPoints[ref].x;\n    let deltaY = outPoints[ref].y - inPoints[ref].y;\n\n    if (deltaX === 0 && deltaY === 0) {\n      return;\n    }\n\n    for (let p = p1; p <= p2; p++) {\n      if (p !== ref) {\n        outPoints[p].x += deltaX;\n        outPoints[p].y += deltaY;\n      }\n    }\n\n    return;\n  }\n}\n","import r from 'restructure';\n\nexport default class Subset {\n  constructor(font) {\n    this.font = font;\n    this.glyphs = [];\n    this.mapping = {};\n\n    // always include the missing glyph\n    this.includeGlyph(0);\n  }\n\n  includeGlyph(glyph) {\n    if (typeof glyph === 'object') {\n      glyph = glyph.id;\n    }\n\n    if (this.mapping[glyph] == null) {\n      this.glyphs.push(glyph);\n      this.mapping[glyph] = this.glyphs.length - 1;\n    }\n\n    return this.mapping[glyph];\n  }\n\n  encodeStream() {\n    let s = new r.EncodeStream();\n\n    process.nextTick(() => {\n      this.encode(s);\n      return s.end();\n    });\n\n    return s;\n  }\n}\n","import cloneDeep from 'clone';\nimport Subset from './Subset';\nimport Directory from '../tables/directory';\nimport Tables from '../tables';\n\nexport default class TTFSubset extends Subset {\n  _addGlyph(gid) {\n    let glyf = this.font.getGlyph(gid)._decode();\n\n    // get the offset to the glyph from the loca table\n    let curOffset = this.font.loca.offsets[gid];\n    let nextOffset = this.font.loca.offsets[gid + 1];\n\n    let stream = this.font._getTableStream('glyf');\n    stream.pos += curOffset;\n\n    let buffer = stream.readBuffer(nextOffset - curOffset);\n\n    // if it is a compound glyph, include its components\n    if (glyf && glyf.numberOfContours < 0) {\n      buffer = new Buffer(buffer);\n      for (let component of glyf.components) {\n        gid = this.includeGlyph(component.glyphID);\n        buffer.writeUInt16BE(gid, component.pos);\n      }\n    }\n\n    this.glyf.push(buffer);\n    this.loca.offsets.push(this.offset);\n\n    if (gid < this.font.hmtx.metrics.length) {\n      this.hmtx.metrics.push(this.font.hmtx.metrics.get(gid));\n    } else {\n      this.hmtx.metrics.push({\n        advance: this.font.hmtx.metrics.get(this.font.hmtx.metrics.length - 1).advance,\n        bearing: this.font.hmtx.bearings.get(gid - this.font.hmtx.metrics.length)\n      });\n    }\n\n    this.offset += buffer.length;\n    return this.glyf.length - 1;\n  }\n\n  encode(stream) {\n    // tables required by PDF spec:\n    //   head, hhea, loca, maxp, cvt , prep, glyf, hmtx, fpgm\n    //\n    // additional tables required for standalone fonts:\n    //   name, cmap, OS/2, post\n\n    this.glyf = [];\n    this.offset = 0;\n    this.loca = {\n      offsets: []\n    };\n\n    this.hmtx = {\n      metrics: [],\n      bearings: []\n    };\n\n    // include all the glyphs\n    // not using a for loop because we need to support adding more\n    // glyphs to the array as we go, and CoffeeScript caches the length.\n    let i = 0;\n    while (i < this.glyphs.length) {\n      this._addGlyph(this.glyphs[i++]);\n    }\n\n    let maxp = cloneDeep(this.font.maxp);\n    maxp.numGlyphs = this.glyf.length;\n\n    this.loca.offsets.push(this.offset);\n    Tables.loca.preEncode.call(this.loca);\n\n    let head = cloneDeep(this.font.head);\n    head.indexToLocFormat = this.loca.version;\n\n    let hhea = cloneDeep(this.font.hhea);\n    hhea.numberOfMetrics = this.hmtx.metrics.length;\n\n    // map = []\n    // for index in [0...256]\n    //     if index < @numGlyphs\n    //         map[index] = index\n    //     else\n    //         map[index] = 0\n    //\n    // cmapTable =\n    //     version: 0\n    //     length: 262\n    //     language: 0\n    //     codeMap: map\n    //\n    // cmap =\n    //     version: 0\n    //     numSubtables: 1\n    //     tables: [\n    //         platformID: 1\n    //         encodingID: 0\n    //         table: cmapTable\n    //     ]\n\n    // TODO: subset prep, cvt, fpgm?\n    Directory.encode(stream, {\n      tables: {\n        head,\n        hhea,\n        loca: this.loca,\n        maxp,\n        'cvt ': this.font['cvt '],\n        prep: this.font.prep,\n        glyf: this.glyf,\n        hmtx: this.hmtx,\n        fpgm: this.font.fpgm\n\n        // name: clone @font.name\n        // 'OS/2': clone @font['OS/2']\n        // post: clone @font.post\n        // cmap: cmap\n      }\n    });\n  }\n}\n","import Subset from './Subset';\nimport CFFTop from '../cff/CFFTop';\nimport CFFPrivateDict from '../cff/CFFPrivateDict';\nimport standardStrings from '../cff/CFFStandardStrings';\n\nexport default class CFFSubset extends Subset {\n  constructor(font) {\n    super(font);\n\n    this.cff = this.font['CFF '];\n    if (!this.cff) {\n      throw new Error('Not a CFF Font');\n    }\n  }\n\n  subsetCharstrings() {\n    this.charstrings = [];\n    let gsubrs = {};\n\n    for (let gid of this.glyphs) {\n      this.charstrings.push(this.cff.getCharString(gid));\n\n      let glyph = this.font.getGlyph(gid);\n      let path = glyph.path; // this causes the glyph to be parsed\n\n      for (let subr in glyph._usedGsubrs) {\n        gsubrs[subr] = true;\n      }\n    }\n\n    this.gsubrs = this.subsetSubrs(this.cff.globalSubrIndex, gsubrs);\n  }\n\n  subsetSubrs(subrs, used) {\n    let res = [];\n    for (let i = 0; i < subrs.length; i++) {\n      let subr = subrs[i];\n      if (used[i]) {\n        this.cff.stream.pos = subr.offset;\n        res.push(this.cff.stream.readBuffer(subr.length));\n      } else {\n        res.push(new Buffer([11])); // return\n      }\n    }\n\n    return res;\n  }\n\n  subsetFontdict(topDict) {\n    topDict.FDArray = [];\n    topDict.FDSelect = {\n      version: 0,\n      fds: []\n    };\n\n    let used_fds = {};\n    let used_subrs = [];\n    for (let gid of this.glyphs) {\n      let fd = this.cff.fdForGlyph(gid);\n      if (fd == null) {\n        continue;\n      }\n\n      if (!used_fds[fd]) {\n        topDict.FDArray.push(Object.assign({}, this.cff.topDict.FDArray[fd]));\n        used_subrs.push({});\n      }\n\n      used_fds[fd] = true;\n      topDict.FDSelect.fds.push(topDict.FDArray.length - 1);\n\n      let glyph = this.font.getGlyph(gid);\n      let path = glyph.path; // this causes the glyph to be parsed\n      for (let subr in glyph._usedSubrs) {\n        used_subrs[used_subrs.length - 1][subr] = true;\n      }\n    }\n\n    for (let i = 0; i < topDict.FDArray.length; i++) {\n      let dict = topDict.FDArray[i];\n      delete dict.FontName;\n      if (dict.Private && dict.Private.Subrs) {\n        dict.Private = Object.assign({}, dict.Private);\n        dict.Private.Subrs = this.subsetSubrs(dict.Private.Subrs, used_subrs[i]);\n      }\n    }\n\n    return;\n  }\n\n  createCIDFontdict(topDict) {\n    let used_subrs = {};\n    for (let gid of this.glyphs) {\n      let glyph = this.font.getGlyph(gid);\n      let path = glyph.path; // this causes the glyph to be parsed\n\n      for (let subr in glyph._usedSubrs) {\n        used_subrs[subr] = true;\n      }\n    }\n\n    let privateDict = Object.assign({}, this.cff.topDict.Private);\n    privateDict.Subrs = this.subsetSubrs(this.cff.topDict.Private.Subrs, used_subrs);\n\n    topDict.FDArray = [{ Private: privateDict }];\n    return topDict.FDSelect = {\n      version: 3,\n      nRanges: 1,\n      ranges: [{ first: 0, fd: 0 }],\n      sentinel: this.charstrings.length\n    };\n  }\n\n  addString(string) {\n    if (!string) {\n      return null;\n    }\n\n    if (!this.strings) {\n      this.strings = [];\n    }\n\n    this.strings.push(string);\n    return standardStrings.length + this.strings.length - 1;\n  }\n\n  encode(stream) {\n    this.subsetCharstrings();\n\n    let charset = {\n      version: this.charstrings.length > 255 ? 2 : 1,\n      ranges: [{ first: 1, nLeft: this.charstrings.length - 2 }]\n    };\n\n    let topDict = Object.assign({}, this.cff.topDict);\n    topDict.Private = null;\n    topDict.charset = charset;\n    topDict.Encoding = null;\n    topDict.CharStrings = this.charstrings;\n\n    for (let key of ['version', 'Notice', 'Copyright', 'FullName', 'FamilyName', 'Weight', 'PostScript', 'BaseFontName', 'FontName']) {\n      topDict[key] = this.addString(this.cff.string(topDict[key]));\n    }\n\n    topDict.ROS = [this.addString('Adobe'), this.addString('Identity'), 0];\n    topDict.CIDCount = this.charstrings.length;\n\n    if (this.cff.isCIDFont) {\n      this.subsetFontdict(topDict);\n    } else {\n      this.createCIDFontdict(topDict);\n    }\n\n    let top = {\n      header: this.cff.header,\n      nameIndex: [this.cff.postscriptName],\n      topDictIndex: [topDict],\n      stringIndex: this.strings,\n      globalSubrIndex: this.gsubrs\n    };\n\n    CFFTop.encode(stream, top);\n  }\n}\n","import r from 'restructure';\nimport { cache } from './decorators';\nimport fontkit from './base';\nimport Directory from './tables/directory';\nimport tables from './tables';\nimport CmapProcessor from './CmapProcessor';\nimport LayoutEngine from './layout/LayoutEngine';\nimport TTFGlyph from './glyph/TTFGlyph';\nimport CFFGlyph from './glyph/CFFGlyph';\nimport SBIXGlyph from './glyph/SBIXGlyph';\nimport COLRGlyph from './glyph/COLRGlyph';\nimport GlyphVariationProcessor from './glyph/GlyphVariationProcessor';\nimport TTFSubset from './subset/TTFSubset';\nimport CFFSubset from './subset/CFFSubset';\nimport BBox from './glyph/BBox';\n\n/**\n * This is the base class for all SFNT-based font formats in fontkit.\n * It supports TrueType, and PostScript glyphs, and several color glyph formats.\n */\nexport default class TTFFont {\n  static probe(buffer) {\n    let format = buffer.toString('ascii', 0, 4);\n    return format === 'true' || format === 'OTTO' || format === String.fromCharCode(0, 1, 0, 0);\n  }\n\n  constructor(stream, variationCoords = null) {\n    this.stream = stream;\n    this._directoryPos = this.stream.pos;\n    this._tables = {};\n    this._glyphs = {};\n    this._decodeDirectory();\n\n    // define properties for each table to lazily parse\n    for (let tag in this.directory.tables) {\n      let table = this.directory.tables[tag];\n      if (tables[tag] && table.length > 0) {\n        Object.defineProperty(this, tag, {\n          get: this._getTable.bind(this, table)\n        });\n      }\n    }\n\n    if (variationCoords) {\n      this._variationProcessor = new GlyphVariationProcessor(this, variationCoords);\n    }\n  }\n\n  _getTable(table) {\n    if (!(table.tag in this._tables)) {\n      try {\n        this._tables[table.tag] = this._decodeTable(table);\n      } catch (e) {\n        if (fontkit.logErrors) {\n          console.error(`Error decoding table ${table.tag}`);\n          console.error(e.stack);\n        }\n      }\n    }\n\n    return this._tables[table.tag];\n  }\n\n  _getTableStream(tag) {\n    let table = this.directory.tables[tag];\n    if (table) {\n      this.stream.pos = table.offset;\n      return this.stream;\n    }\n\n    return null;\n  }\n\n  _decodeDirectory() {\n    return this.directory = Directory.decode(this.stream, {_startOffset: 0});\n  }\n\n  _decodeTable(table) {\n    let pos = this.stream.pos;\n\n    let stream = this._getTableStream(table.tag);\n    let result = tables[table.tag].decode(stream, this, table.length);\n\n    this.stream.pos = pos;\n    return result;\n  }\n\n  /**\n   * The unique PostScript name for this font\n   * @type {string}\n   */\n  get postscriptName() {\n    let name = this.name.records.postscriptName;\n    let lang = Object.keys(name)[0];\n    return name[lang];\n  }\n\n  /**\n   * Gets a string from the font's `name` table\n   * @return {string}\n   */\n  getName(key, lang = 'English') {\n    let record = this.name.records[key];\n    if (record) {\n      return record[lang];\n    }\n\n    return null;\n  }\n\n  /**\n   * The font's full name, e.g. \"Helvetica Bold\"\n   * @type {string}\n   */\n  get fullName() {\n    return this.getName('fullName');\n  }\n\n  /**\n   * The font's family name, e.g. \"Helvetica\"\n   * @type {string}\n   */\n  get familyName() {\n    return this.getName('fontFamily');\n  }\n\n  /**\n   * The font's sub-family, e.g. \"Bold\".\n   * @type {string}\n   */\n  get subfamilyName() {\n    return this.getName('fontSubfamily');\n  }\n\n  /**\n   * The font's copyright information\n   * @type {string}\n   */\n  get copyright() {\n    return this.getName('copyright');\n  }\n\n  /**\n   * The font's version number\n   * @type {string}\n   */\n  get version() {\n    return this.getName('version');\n  }\n\n  /**\n   * The font’s [ascender](https://en.wikipedia.org/wiki/Ascender_(typography))\n   * @type {number}\n   */\n  get ascent() {\n    return this.hhea.ascent;\n  }\n\n  /**\n   * The font’s [descender](https://en.wikipedia.org/wiki/Descender)\n   * @type {number}\n   */\n  get descent() {\n    return this.hhea.descent;\n  }\n\n  /**\n   * The amount of space that should be included between lines\n   * @type {number}\n   */\n  get lineGap() {\n    return this.hhea.lineGap;\n  }\n\n  /**\n   * The offset from the normal underline position that should be used\n   * @type {number}\n   */\n  get underlinePosition() {\n    return this.post.underlinePosition;\n  }\n\n  /**\n   * The weight of the underline that should be used\n   * @type {number}\n   */\n  get underlineThickness() {\n    return this.post.underlineThickness;\n  }\n\n  /**\n   * If this is an italic font, the angle the cursor should be drawn at to match the font design\n   * @type {number}\n   */\n  get italicAngle() {\n    return this.post.italicAngle;\n  }\n\n  /**\n   * The height of capital letters above the baseline.\n   * See [here](https://en.wikipedia.org/wiki/Cap_height) for more details.\n   * @type {number}\n   */\n  get capHeight() {\n    let os2 = this['OS/2'];\n    return os2 ? os2.capHeight : this.ascent;\n  }\n\n  /**\n   * The height of lower case letters in the font.\n   * See [here](https://en.wikipedia.org/wiki/X-height) for more details.\n   * @type {number}\n   */\n  get xHeight() {\n    let os2 = this['OS/2'];\n    return os2 ? os2.xHeight : 0;\n  }\n\n  /**\n   * The number of glyphs in the font.\n   * @type {number}\n   */\n  get numGlyphs() {\n    return this.maxp.numGlyphs;\n  }\n\n  /**\n   * The size of the font’s internal coordinate grid\n   * @type {number}\n   */\n  get unitsPerEm() {\n    return this.head.unitsPerEm;\n  }\n\n  /**\n   * The font’s bounding box, i.e. the box that encloses all glyphs in the font.\n   * @type {BBox}\n   */\n  @cache\n  get bbox() {\n    return Object.freeze(new BBox(this.head.xMin, this.head.yMin, this.head.xMax, this.head.yMax));\n  }\n\n  @cache\n  get _cmapProcessor() {\n    return new CmapProcessor(this.cmap);\n  }\n\n  /**\n   * An array of all of the unicode code points supported by the font.\n   * @type {number[]}\n   */\n  @cache\n  get characterSet() {\n    return this._cmapProcessor.getCharacterSet();\n  }\n\n  /**\n   * Returns whether there is glyph in the font for the given unicode code point.\n   *\n   * @param {number} codePoint\n   * @return {boolean}\n   */\n  hasGlyphForCodePoint(codePoint) {\n    return !!this._cmapProcessor.lookup(codePoint);\n  }\n\n  /**\n   * Maps a single unicode code point to a Glyph object.\n   * Does not perform any advanced substitutions (there is no context to do so).\n   *\n   * @param {number} codePoint\n   * @return {Glyph}\n   */\n  glyphForCodePoint(codePoint) {\n    return this.getGlyph(this._cmapProcessor.lookup(codePoint), [codePoint]);\n  }\n\n  /**\n   * Returns an array of Glyph objects for the given string.\n   * This is only a one-to-one mapping from characters to glyphs.\n   * For most uses, you should use font.layout (described below), which\n   * provides a much more advanced mapping supporting AAT and OpenType shaping.\n   *\n   * @param {string} string\n   * @return {Glyph[]}\n   */\n  glyphsForString(string) {\n    // Map character codes to glyph ids\n    let glyphs = [];\n    let len = string.length;\n    let idx = 0;\n\n    while (idx < len) {\n      let code = string.charCodeAt(idx++);\n      if (0xd800 <= code && code <= 0xdbff && idx < len) {\n        let next = string.charCodeAt(idx);\n        if (0xdc00 <= next && next <= 0xdfff) {\n          idx++;\n          code = ((code & 0x3FF) << 10) + (next & 0x3FF) + 0x10000;\n        }\n      }\n\n      glyphs.push(this.glyphForCodePoint(code));\n    }\n\n    return glyphs;\n  }\n\n  @cache\n  get _layoutEngine() {\n    return new LayoutEngine(this);\n  }\n\n  /**\n   * Returns a GlyphRun object, which includes an array of Glyphs and GlyphPositions for the given string.\n   *\n   * @param {string} string\n   * @param {string[]} [userFeatures]\n   * @param {string} [script]\n   * @param {string} [language]\n   * @return {GlyphRun}\n   */\n  layout(string, userFeatures , script, language) {\n    return this._layoutEngine.layout(string, userFeatures, script, language);\n  }\n\n  /**\n   * An array of all [OpenType feature tags](https://www.microsoft.com/typography/otspec/featuretags.htm)\n   * (or mapped AAT tags) supported by the font.\n   * The features parameter is an array of OpenType feature tags to be applied in addition to the default set.\n   * If this is an AAT font, the OpenType feature tags are mapped to AAT features.\n   *\n   * @type {string[]}\n   */\n  get availableFeatures() {\n    return this._layoutEngine.getAvailableFeatures();\n  }\n\n  _getBaseGlyph(glyph, characters = []) {\n    if (!this._glyphs[glyph]) {\n      if (this.directory.tables.glyf) {\n        this._glyphs[glyph] = new TTFGlyph(glyph, characters, this);\n\n      } else if (this.directory.tables['CFF ']) {\n        this._glyphs[glyph] = new CFFGlyph(glyph, characters, this);\n      }\n    }\n\n    return this._glyphs[glyph] || null;\n  }\n\n  /**\n   * Returns a glyph object for the given glyph id.\n   * You can pass the array of code points this glyph represents for\n   * your use later, and it will be stored in the glyph object.\n   *\n   * @param {number} glyph\n   * @param {number[]} characters\n   * @return {Glyph}\n   */\n  getGlyph(glyph, characters = []) {\n    if (!this._glyphs[glyph]) {\n      if (this.directory.tables.sbix) {\n        this._glyphs[glyph] = new SBIXGlyph(glyph, characters, this);\n\n      } else if ((this.directory.tables.COLR) && (this.directory.tables.CPAL)) {\n        this._glyphs[glyph] = new COLRGlyph(glyph, characters, this);\n\n      } else {\n        this._getBaseGlyph(glyph, characters);\n      }\n    }\n\n    return this._glyphs[glyph] || null;\n  }\n\n  /**\n   * Returns a Subset for this font.\n   * @return {Subset}\n   */\n  createSubset() {\n    if (this.directory.tables['CFF ']) {\n      return new CFFSubset(this);\n    }\n\n    return new TTFSubset(this);\n  }\n\n  /**\n   * Returns an object describing the available variation axes\n   * that this font supports. Keys are setting tags, and values\n   * contain the axis name, range, and default value.\n   *\n   * @type {object}\n   */\n  get variationAxes() {\n    let res = {};\n    if (!this.fvar) {\n      return res;\n    }\n\n    for (let axis of this.fvar.axis) {\n      res[axis.axisTag] = {\n        name: axis.name,\n        min: axis.minValue,\n        default: axis.defaultValue,\n        max: axis.maxValue\n      };\n    }\n\n    return res;\n  }\n\n  /**\n   * Returns an object describing the named variation instances\n   * that the font designer has specified. Keys are variation names\n   * and values are the variation settings for this instance.\n   *\n   * @type {object}\n   */\n  get namedVariations() {\n    let res = {};\n    if (!this.fvar) {\n      return res;\n    }\n\n    for (let instance of this.fvar.instance) {\n      let settings = {};\n      for (let i = 0; i < this.fvar.axis.length; i++) {\n        let axis = this.fvar.axis[i];\n        settings[axis.axisTag] = instance.coord[i];\n      }\n\n      res[instance.name] = settings;\n    }\n\n    return res;\n  }\n\n  /**\n   * Returns a new font with the given variation settings applied.\n   * Settings can either be an instance name, or an object containing\n   * variation tags as specified by the `variationAxes` property.\n   *\n   * @param {object} settings\n   * @return {TTFFont}\n   */\n  getVariation(settings) {\n    if (!this.directory.tables.fvar || !this.directory.tables.gvar || !this.directory.tables.glyf) {\n      throw new Error('Variations require a font with the fvar, gvar, and glyf tables.');\n    }\n\n    if (typeof settings === 'string') {\n      settings = this.namedVariations[settings];\n    }\n\n    if (typeof settings !== 'object') {\n      throw new Error('Variation settings must be either a variation name or settings object.');\n    }\n\n    // normalize the coordinates\n    let coords = this.fvar.axis.map((axis, i) => {\n      if (axis.axisTag in settings) {\n        return Math.max(axis.minValue, Math.min(axis.maxValue, settings[axis.axisTag]));\n      } else {\n        return axis.defaultValue;\n      }\n    });\n\n    let stream = new r.DecodeStream(this.stream.buffer);\n    stream.pos = this._directoryPos;\n\n    let font = new TTFFont(stream, coords);\n    font._tables = this._tables;\n\n    return font;\n  }\n\n  // Standardized format plugin API\n  getFont(name) {\n    return this.getVariation(name);\n  }\n}\n","import r from 'restructure';\nimport tables from './';\n\nlet WOFFDirectoryEntry = new r.Struct({\n  tag:          new r.String(4),\n  offset:       new r.Pointer(r.uint32, 'void', {type: 'global'}),\n  compLength:   r.uint32,\n  length:       r.uint32,\n  origChecksum: r.uint32\n});\n\nlet WOFFDirectory = new r.Struct({\n  tag:            new r.String(4), // should be 'wOFF'\n  flavor:         r.uint32,\n  length:         r.uint32,\n  numTables:      r.uint16,\n  reserved:       new r.Reserved(r.uint16),\n  totalSfntSize:  r.uint32,\n  majorVersion:   r.uint16,\n  minorVersion:   r.uint16,\n  metaOffset:     r.uint32,\n  metaLength:     r.uint32,\n  metaOrigLength: r.uint32,\n  privOffset:     r.uint32,\n  privLength:     r.uint32,\n  tables:         new r.Array(WOFFDirectoryEntry, 'numTables')\n});\n\nWOFFDirectory.process = function() {\n  let tables = {};\n  for (let table of this.tables) {\n    tables[table.tag] = table;\n  }\n\n  this.tables = tables;\n};\n\nexport default WOFFDirectory;\n","import TTFFont from './TTFFont';\nimport WOFFDirectory from './tables/WOFFDirectory';\nimport tables from './tables';\nimport inflate from 'tiny-inflate';\nimport r from 'restructure';\n\nexport default class WOFFFont extends TTFFont {\n  static probe(buffer) {\n    return buffer.toString('ascii', 0, 4) === 'wOFF';\n  }\n\n  _decodeDirectory() {\n    this.directory = WOFFDirectory.decode(this.stream, { _startOffset: 0 });\n  }\n\n  _getTableStream(tag) {\n    let table = this.directory.tables[tag];\n    if (table) {\n      this.stream.pos = table.offset;\n\n      if (table.compLength < table.length) {\n        this.stream.pos += 2; // skip deflate header\n        let outBuffer = new Buffer(table.length);\n        let buf = inflate(this.stream.readBuffer(table.compLength - 2), outBuffer);\n        return new r.DecodeStream(buf);\n      } else {\n        return this.stream;\n      }\n    }\n\n    return null;\n  }\n}\n","import TTFGlyph from './TTFGlyph';\n\n/**\n * Represents a TrueType glyph in the WOFF2 format, which compresses glyphs differently.\n */\nexport default class WOFF2Glyph extends TTFGlyph {\n  _decode() {\n    // We have to decode in advance (in WOFF2Font), so just return the pre-decoded data.\n    return this._font._transformedGlyphs[this.id];\n  }\n\n  _getCBox() {\n    return this.path.bbox;\n  }\n}\n","import r from 'restructure';\n\nconst Base128 = {\n  decode(stream) {\n    let result = 0;\n    let iterable = [0, 1, 2, 3, 4];\n    for (let j = 0; j < iterable.length; j++) {\n      let i = iterable[j];\n      let code = stream.readUInt8();\n\n      // If any of the top seven bits are set then we're about to overflow.\n      if (result & 0xe0000000) {\n        throw new Error('Overflow');\n      }\n\n      result = (result << 7) | (code & 0x7f);\n      if ((code & 0x80) === 0) {\n        return result;\n      }\n    }\n\n    throw new Error('Bad base 128 number');\n  }\n};\n\nlet knownTags = [\n  'cmap', 'head', 'hhea', 'hmtx', 'maxp', 'name', 'OS/2', 'post', 'cvt ',\n  'fpgm', 'glyf', 'loca', 'prep', 'CFF ', 'VORG', 'EBDT', 'EBLC', 'gasp',\n  'hdmx', 'kern', 'LTSH', 'PCLT', 'VDMX', 'vhea', 'vmtx', 'BASE', 'GDEF',\n  'GPOS', 'GSUB', 'EBSC', 'JSTF', 'MATH', 'CBDT', 'CBLC', 'COLR', 'CPAL',\n  'SVG ', 'sbix', 'acnt', 'avar', 'bdat', 'bloc', 'bsln', 'cvar', 'fdsc',\n  'feat', 'fmtx', 'fvar', 'gvar', 'hsty', 'just', 'lcar', 'mort', 'morx',\n  'opbd', 'prop', 'trak', 'Zapf', 'Silf', 'Glat', 'Gloc', 'Feat', 'Sill'\n];\n\nlet WOFF2DirectoryEntry = new r.Struct({\n  flags: r.uint8,\n  customTag: new r.Optional(new r.String(4), t => (t.flags & 0x3f) === 0x3f),\n  tag: t => t.customTag || knownTags[t.flags & 0x3f],// || (() => { throw new Error(`Bad tag: ${flags & 0x3f}`); })(); },\n  length: Base128,\n  transformVersion: t => (t.flags >>> 6) & 0x03,\n  transformed: t => (t.tag === 'glyf' || t.tag === 'loca') ? t.transformVersion === 0 : t.transformVersion !== 0,\n  transformLength: new r.Optional(Base128, t => t.transformed)\n});\n\nlet WOFF2Directory = new r.Struct({\n  tag: new r.String(4), // should be 'wOF2'\n  flavor: r.uint32,\n  length: r.uint32,\n  numTables: r.uint16,\n  reserved: new r.Reserved(r.uint16),\n  totalSfntSize: r.uint32,\n  totalCompressedSize: r.uint32,\n  majorVersion: r.uint16,\n  minorVersion: r.uint16,\n  metaOffset: r.uint32,\n  metaLength: r.uint32,\n  metaOrigLength: r.uint32,\n  privOffset: r.uint32,\n  privLength: r.uint32,\n  tables: new r.Array(WOFF2DirectoryEntry, 'numTables')\n});\n\nWOFF2Directory.process = function() {\n  let tables = {};\n  for (let i = 0; i < this.tables.length; i++) {\n    let table = this.tables[i];\n    tables[table.tag] = table;\n  }\n\n  return this.tables = tables;\n};\n\nexport default WOFF2Directory;\n","import r from 'restructure';\nimport brotli from 'brotli/decompress';\nimport TTFFont from './TTFFont';\nimport TTFGlyph, { Point } from './glyph/TTFGlyph';\nimport WOFF2Glyph from './glyph/WOFF2Glyph';\nimport WOFF2Directory from './tables/WOFF2Directory';\n\n/**\n * Subclass of TTFFont that represents a TTF/OTF font compressed by WOFF2\n * See spec here: http://www.w3.org/TR/WOFF2/\n */\nexport default class WOFF2Font extends TTFFont {\n  static probe(buffer) {\n    return buffer.toString('ascii', 0, 4) === 'wOF2';\n  }\n\n  _decodeDirectory() {\n    this.directory = WOFF2Directory.decode(this.stream);\n    this._dataPos = this.stream.pos;\n  }\n\n  _decompress() {\n    // decompress data and setup table offsets if we haven't already\n    if (!this._decompressed) {\n      this.stream.pos = this._dataPos;\n      let buffer = this.stream.readBuffer(this.directory.totalCompressedSize);\n\n      let decompressedSize = 0;\n      for (let tag in this.directory.tables) {\n        let entry = this.directory.tables[tag];\n        entry.offset = decompressedSize;\n        decompressedSize += (entry.transformLength != null) ? entry.transformLength : entry.length;\n      }\n\n      let decompressed = brotli(buffer, decompressedSize);\n      if (!decompressed) {\n        throw new Error('Error decoding compressed data in WOFF2');\n      }\n\n      this.stream = new r.DecodeStream(new Buffer(decompressed));\n      this._decompressed = true;\n    }\n  }\n\n  _decodeTable(table) {\n    this._decompress();\n    return super._decodeTable(table);\n  }\n\n  // Override this method to get a glyph and return our\n  // custom subclass if there is a glyf table.\n  _getBaseGlyph(glyph, characters = []) {\n    if (!this._glyphs[glyph]) {\n      if (this.directory.tables.glyf && this.directory.tables.glyf.transformed) {\n        if (!this._transformedGlyphs) { this._transformGlyfTable(); }\n        return this._glyphs[glyph] = new WOFF2Glyph(glyph, characters, this);\n\n      } else {\n        return super._getBaseGlyph(glyph, characters);\n      }\n    }\n  }\n\n  _transformGlyfTable() {\n    this._decompress();\n    this.stream.pos = this.directory.tables.glyf.offset;\n    let table = GlyfTable.decode(this.stream);\n    let glyphs = [];\n\n    for (let index = 0; index < table.numGlyphs; index++) {\n      let glyph = {};\n      let nContours = table.nContours.readInt16BE();\n      glyph.numberOfContours = nContours;\n\n      if (nContours > 0) { // simple glyph\n        let nPoints = [];\n        let totalPoints = 0;\n\n        for (let i = 0; i < nContours; i++) {\n          let r = read255UInt16(table.nPoints);\n          nPoints.push(r);\n          totalPoints += r;\n        }\n\n        glyph.points = decodeTriplet(table.flags, table.glyphs, totalPoints);\n        for (let i = 0; i < nContours; i++) {\n          glyph.points[nPoints[i] - 1].endContour = true;\n        }\n\n        var instructionSize = read255UInt16(table.glyphs);\n\n      } else if (nContours < 0) { // composite glyph\n        let haveInstructions = TTFGlyph.prototype._decodeComposite.call({ _font: this }, glyph, table.composites);\n        if (haveInstructions) {\n          var instructionSize = read255UInt16(table.glyphs);\n        }\n      }\n\n      glyphs.push(glyph);\n    }\n\n    this._transformedGlyphs = glyphs;\n  }\n}\n\n// Special class that accepts a length and returns a sub-stream for that data\nclass Substream {\n  constructor(length) {\n    this.length = length;\n    this._buf = new r.Buffer(length);\n  }\n\n  decode(stream, parent) {\n    return new r.DecodeStream(this._buf.decode(stream, parent));\n  }\n}\n\n// This struct represents the entire glyf table\nlet GlyfTable = new r.Struct({\n  version: r.uint32,\n  numGlyphs: r.uint16,\n  indexFormat: r.uint16,\n  nContourStreamSize: r.uint32,\n  nPointsStreamSize: r.uint32,\n  flagStreamSize: r.uint32,\n  glyphStreamSize: r.uint32,\n  compositeStreamSize: r.uint32,\n  bboxStreamSize: r.uint32,\n  instructionStreamSize: r.uint32,\n  nContours: new Substream('nContourStreamSize'),\n  nPoints: new Substream('nPointsStreamSize'),\n  flags: new Substream('flagStreamSize'),\n  glyphs: new Substream('glyphStreamSize'),\n  composites: new Substream('compositeStreamSize'),\n  bboxes: new Substream('bboxStreamSize'),\n  instructions: new Substream('instructionStreamSize')\n});\n\nconst WORD_CODE = 253;\nconst ONE_MORE_BYTE_CODE2 = 254;\nconst ONE_MORE_BYTE_CODE1 = 255;\nconst LOWEST_U_CODE = 253;\n\nfunction read255UInt16(stream) {\n  let code = stream.readUInt8();\n\n  if (code === WORD_CODE) {\n    return stream.readUInt16BE();\n  }\n\n  if (code === ONE_MORE_BYTE_CODE1) {\n    return stream.readUInt8() + LOWEST_U_CODE;\n  }\n\n  if (code === ONE_MORE_BYTE_CODE2) {\n    return stream.readUInt8() + LOWEST_U_CODE * 2;\n  }\n\n  return code;\n}\n\nfunction withSign(flag, baseval) {\n  return flag & 1 ? baseval : -baseval;\n}\n\nfunction decodeTriplet(flags, glyphs, nPoints) {\n  let y;\n  let x = y = 0;\n  let res = [];\n\n  for (let i = 0; i < nPoints; i++) {\n    let dx = 0, dy = 0;\n    let flag = flags.readUInt8();\n    let onCurve = !(flag >> 7);\n    flag &= 0x7f;\n\n    if (flag < 10) {\n      dx = 0;\n      dy = withSign(flag, ((flag & 14) << 7) + glyphs.readUInt8());\n\n    } else if (flag < 20) {\n      dx = withSign(flag, (((flag - 10) & 14) << 7) + glyphs.readUInt8());\n      dy = 0;\n\n    } else if (flag < 84) {\n      var b0 = flag - 20;\n      var b1 = glyphs.readUInt8();\n      dx = withSign(flag, 1 + (b0 & 0x30) + (b1 >> 4));\n      dy = withSign(flag >> 1, 1 + ((b0 & 0x0c) << 2) + (b1 & 0x0f));\n\n    } else if (flag < 120) {\n      var b0 = flag - 84;\n      dx = withSign(flag, 1 + ((b0 / 12) << 8) + glyphs.readUInt8());\n      dy = withSign(flag >> 1, 1 + (((b0 % 12) >> 2) << 8) + glyphs.readUInt8());\n\n    } else if (flag < 124) {\n      var b1 = glyphs.readUInt8();\n      let b2 = glyphs.readUInt8();\n      dx = withSign(flag, (b1 << 4) + (b2 >> 4));\n      dy = withSign(flag >> 1, ((b2 & 0x0f) << 8) + glyphs.readUInt8());\n\n    } else {\n      dx = withSign(flag, glyphs.readUInt16BE());\n      dy = withSign(flag >> 1, glyphs.readUInt16BE());\n    }\n\n    x += dx;\n    y += dy;\n    res.push(new Point(onCurve, false, x, y));\n  }\n\n  return res;\n}\n","import r from 'restructure';\nimport TTFFont from './TTFFont';\nimport Directory from './tables/directory';\nimport tables from './tables';\n\nlet TTCHeader = new r.VersionedStruct(r.uint32, {\n  0x00010000: {\n    numFonts:   r.uint32,\n    offsets:    new r.Array(r.uint32, 'numFonts')\n  },\n  0x00020000: {\n    numFonts:   r.uint32,\n    offsets:    new r.Array(r.uint32, 'numFonts'),\n    dsigTag:    r.uint32,\n    dsigLength: r.uint32,\n    dsigOffset: r.uint32\n  }\n});\n\nexport default class TrueTypeCollection {\n  static probe(buffer) {\n    return buffer.toString('ascii', 0, 4) === 'ttcf';\n  }\n\n  constructor(stream) {\n    this.stream = stream;\n    if (stream.readString(4) !== 'ttcf') {\n      throw new Error('Not a TrueType collection');\n    }\n\n    this.header = TTCHeader.decode(stream);\n  }\n\n  getFont(name) {\n    for (let offset of this.header.offsets) {\n      let stream = new r.DecodeStream(this.stream.buffer);\n      stream.pos = offset;\n      let font = new TTFFont(stream);\n      if (font.postscriptName === name) {\n        return font;\n      }\n    }\n\n    return null;\n  }\n\n  get fonts() {\n    let fonts = [];\n    for (let offset of this.header.offsets) {\n      let stream = new r.DecodeStream(this.stream.buffer);\n      stream.pos = offset;\n      fonts.push(new TTFFont(stream));\n    }\n\n    return fonts;\n  }\n}\n","import r from 'restructure';\nimport TTFFont from './TTFFont';\n\nlet DFontName = new r.String(r.uint8);\nlet DFontData = new r.Struct({\n  len: r.uint32,\n  buf: new r.Buffer('len')\n});\n\nlet Ref = new r.Struct({\n  id: r.uint16,\n  nameOffset: r.int16,\n  attr: r.uint8,\n  dataOffset: r.uint24,\n  handle: r.uint32\n});\n\nlet Type = new r.Struct({\n  name: new r.String(4),\n  maxTypeIndex: r.uint16,\n  refList: new r.Pointer(r.uint16, new r.Array(Ref, t => t.maxTypeIndex + 1), { type: 'parent' })\n});\n\nlet TypeList = new r.Struct({\n  length: r.uint16,\n  types: new r.Array(Type, t => t.length + 1)\n});\n\nlet DFontMap = new r.Struct({\n  reserved: new r.Reserved(r.uint8, 24),\n  typeList: new r.Pointer(r.uint16, TypeList),\n  nameListOffset: new r.Pointer(r.uint16, 'void')\n});\n\nlet DFontHeader = new r.Struct({\n  dataOffset: r.uint32,\n  map: new r.Pointer(r.uint32, DFontMap),\n  dataLength: r.uint32,\n  mapLength: r.uint32\n});\n\nexport default class DFont {\n  static probe(buffer) {\n    let stream = new r.DecodeStream(buffer);\n\n    try {\n      var header = DFontHeader.decode(stream);\n    } catch (e) {\n      return false;\n    }\n\n    for (let type of header.map.typeList.types) {\n      if (type.name === 'sfnt') {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  constructor(stream) {\n    this.stream = stream;\n    this.header = DFontHeader.decode(this.stream);\n\n    for (let type of this.header.map.typeList.types) {\n      for (let ref of type.refList) {\n        if (ref.nameOffset >= 0) {\n          this.stream.pos = ref.nameOffset + this.header.map.nameListOffset;\n          ref.name = DFontName.decode(this.stream);\n        } else {\n          ref.name = null;\n        }\n      }\n\n      if (type.name === 'sfnt') {\n        this.sfnt = type;\n      }\n    }\n  }\n\n  getFont(name) {\n    if (!this.sfnt) {\n      return null;\n    }\n\n    for (let ref of this.sfnt.refList) {\n      let pos = this.header.dataOffset + ref.dataOffset + 4;\n      let stream = new r.DecodeStream(this.stream.buffer.slice(pos));\n      let font = new TTFFont(stream);\n      if (font.postscriptName === name) {\n        return font;\n      }\n    }\n\n    return null;\n  }\n\n  get fonts() {\n    let fonts = [];\n    for (let ref of this.sfnt.refList) {\n      let pos = this.header.dataOffset + ref.dataOffset + 4;\n      let stream = new r.DecodeStream(this.stream.buffer.slice(pos));\n      fonts.push(new TTFFont(stream));\n    }\n\n    return fonts;\n  }\n}\n","import fontkit from './base';\nimport TTFFont from './TTFFont';\nimport WOFFFont from './WOFFFont';\nimport WOFF2Font from './WOFF2Font';\nimport TrueTypeCollection from './TrueTypeCollection';\nimport DFont from './DFont';\n\n// Register font formats\nfontkit.registerFormat(TTFFont);\nfontkit.registerFormat(WOFFFont);\nfontkit.registerFormat(WOFF2Font);\nfontkit.registerFormat(TrueTypeCollection);\nfontkit.registerFormat(DFont);\n\nexport default fontkit;\n"],"names":["fs","require","fontkit","logErrors","formats","registerFormat","format","push","openSync","filename","postscriptName","buffer","readFileSync","create","open","callback","readFile","err","font","e","i","length","probe","r","DecodeStream","getFont","Error","cache","target","key","descriptor","get","value","call","SubHeader","Struct","uint16","int16","CmapGroup","uint32","UnicodeValueRange","uint24","uint8","UVSMapping","DefaultUVS","Array","NonDefaultUVS","VarSelectorRecord","Pointer","type","CmapSubtable","VersionedStruct","LazyArray","Math","max","apply","t","subHeaderKeys","segCountX2","Reserved","_currentOffset","CmapEntry","lazy","int32","Bitfield","HmtxEntry","parent","hhea","numberOfMetrics","maxp","numGlyphs","NameRecord","String","ENCODINGS","platformID","encodingID","relativeTo","allowNull","LangTagRecord","NameTable","NAMES","LANGUAGES","process","stream","records","record","language","languageID","langTags","tag","nameID","fontFeatures","feature","string","preEncode","isArray","version","val","indexOf","Buffer","byteLength","English","count","stringOffset","module","exports","size","OS2","versions","fixed32","loca","offsets","CFFIndex","readUInt16BE","offSize","readUInt8","offsetType","pos","ret","startPos","start","decode","end","arr","offset","item","writeUInt16BE","sizes","s","writeUInt8","encode","FLOAT_EOF","FLOAT_LOOKUP","FLOAT_ENCODE_LOOKUP","CFFOperand","readInt16BE","readInt32BE","str","b","n1","n2","parseFloat","forceLarge","ceil","Number","writeInt32BE","c1","c2","writeInt16BE","CFFDict","ops","fields","field","operands","map","op","decodeOperands","ctx","encodeOperands","PropertyDescriptor","dict","includePointers","startOffset","len","k","isEqual","pointerSize","pointerOffset","pointers","ptr","CFFPointer","options","Ptr","StandardEncoding","ExpertEncoding","ISOAdobeCharset","ExpertCharset","ExpertSubsetCharset","PredefinedOp","predefinedOps","index","CFFEncodingVersion","Range1","Range2","CFFCustomEncoding","CFFEncoding","RangeArray","resolveLength","res","range","nLeft","CFFCustomCharset","CharStrings","CFFCharset","FDRange","FDSelect","CFFPrivateDict","CFFPrivateOp","FontDict","CFFTopDict","CFFHeader","CFFTop","CFFFont","top","topDictIndex","isCIDFont","topDict","ROS","sid","standardStrings","stringIndex","glyph","readBuffer","gid","charset","glyphs","ranges","first","fds","low","high","mid","fd","fdForGlyph","FDArray","Private","nameIndex","FullName","FamilyName","VerticalOrigin","BigMetrics","int8","SmallMetrics","EBDTComponent","ByteAligned","BitAligned","SBitLineMetrics","CodeOffsetPair","IndexSubtable","lastGlyphIndex","firstGlyphIndex","IndexSubtableArray","BitmapSizeTable","ImageTable","LayerRecord","BaseGlyphRecord","ColorRecord","LangSysTable","LangSysRecord","Script","ScriptRecord","ScriptList","Feature","FeatureRecord","FeatureList","LookupFlags","LookupList","SubTable","Lookup","RangeRecord","Coverage","ClassRangeRecord","ClassDef","Device","LookupRecord","Rule","glyphCount","RuleSet","ClassRule","ClassSet","Context","ChainRule","inputGlyphCount","ChainRuleSet","ChainingContext","BaseCoord","BaseValues","FeatMinMaxRecord","MinMax","BaseLangSysRecord","BaseScript","BaseScriptRecord","BaseScriptList","BaseTagList","Axis","AttachPoint","AttachList","CaretValue","LigGlyph","LigCaretList","MarkGlyphSetsDef","ValueFormat","types","ValueRecord","struct","rel","_startOffset","buildStruct","PairValueRecord","PairSet","Class2Record","Anchor","EntryExitRecord","MarkRecord","MarkArray","BaseRecord","classCount","BaseArray","ComponentRecord","LigatureAttach","LigatureArray","GPOSLookup","extension","Sequence","AlternateSet","Ligature","compCount","LigatureSet","GSUBLookup","JstfGSUBModList","JstfPriority","JstfLangSys","JstfLangSysRecord","JstfScript","JstfScriptRecord","Signature","SignatureBlock","GaspRange","DeviceRecord","KernPair","ClassTable","Kern2Array","leftTable","off","rowWidth","KernSubtable","leftClassCount","rightClassCount","KernTable","Ratio","vTable","VdmxGroup","VmtxEntry","vhea","shortFrac","Fixed","Correspondence","Segment","UnboundedArrayAccessor","base","_items","constructor","name","UnboundedArray","LookupTable","ValueType","Shadow","BinarySearchHeader","LookupSegmentSingle","LookupSegmentArray","lastGlyph","firstGlyph","LookupSingle","binarySearchHeader","nUnits","StateTable","entryData","lookupType","entry","Entry","StateArray","nClasses","StateHeader","StateTable1","ClassLookupTable","newStateOffset","stateArray","StateHeader1","BslnSubtable","Setting","FeatureName","getName","features","Instance","axisCount","Offset","flags","readUInt32BE","gvar","WidthDeltaRecord","WidthDeltaCluster","ActionData","Action","actionLength","PostcompensationAction","PostCompensationTable","JustificationTable","LigatureData","ContextualData","InsertionData","SubstitutionTable","SubtableData","Subtable","FeatureEntry","MorxChain","OpticalBounds","tables","cmap","head","hmtx","post","fpgm","prep","cvt","glyf","VORG","EBLC","CBLC","sbix","COLR","CPAL","BASE","GDEF","GPOS","GSUB","JSTF","DSIG","gasp","hdmx","kern","LTSH","PCLT","VDMX","vmtx","avar","bsln","feat","fvar","just","morx","opbd","TableEntry","Directory","table","VoidPointer","Tables","numTables","searchRange","floor","log","LN2","entrySelector","rangeShift","CmapProcessor","cmapTable","_characterSet","codepoint","codeMap","min","segCount","startCode","endCode","rangeOffset","idRangeOffset","idDelta","glyphIndexArray","glyphIndices","firstCode","nGroups","group","groups","startCharCode","endCharCode","glyphID","endCodes","toArray","tail","KernProcessor","positions","glyphIndex","left","id","right","xAdvance","getKerning","coverage","crossStream","horizontal","vertical","variation","subtable","pairs","pair","leftOffset","rightOffset","nGlyphs","array","rightTable","values","kernValue","kernIndex","leftClass","rightClass","override","UnicodeLayoutEngine","clusterStart","clusterEnd","isMark","positionCluster","baseBox","cbox","copy","codePoints","minX","width","xOffset","yOffset","yGap","unitsPerEm","mark","markBox","position","combiningClass","getCombiningClass","maxX","minY","maxY","height","yAdvance","codePoint","unicode","BBox","Infinity","x","y","GlyphRun","bbox","p","addPoint","GlyphPosition","UNICODE_SCRIPTS","forString","idx","code","charCodeAt","next","script","getScript","Unknown","forCodePoints","RTL","direction","selector","OTMapping","slice","characterAlternatives","AATMapping","ot","aat","mapOTToAAT","mapFeatureStrings","f","setting","isNaN","typeCode","settingCode","mapAATToOT","AATLookupTable","getItem","seg","segments","START_OF_TEXT_STATE","END_OF_TEXT_CLASS","OUT_OF_BOUNDS_CLASS","DELETED_GLYPH_CLASS","DONT_ADVANCE","AATStateMachine","stateTable","lookupTable","classTable","reverse","processEntry","currentState","dir","classCode","shouldAdvance","lookup","row","entryIndex","entryTable","newState","MARK_FIRST","MARK_LAST","VERB","SET_MARK","SET_COMPONENT","PERFORM_ACTION","LAST_MASK","STORE_MASK","OFFSET_MASK","REVERSE_DIRECTION","CURRENT_INSERT_BEFORE","MARKED_INSERT_BEFORE","CURRENT_INSERT_COUNT","MARKED_INSERT_COUNT","AATMorxProcessor","processIndicRearragement","bind","processContextualSubstitution","processLigature","processNoncontextualSubstitutions","processGlyphInsertion","chains","chain","defaultFlags","featureType","featureSetting","disableFlags","enableFlags","subtables","subFeatureFlags","processSubtable","splice","ligatureStack","markedGlyph","markedIndex","stateMachine","getProcessor","subsitutions","substitutionTable","items","markIndex","getGlyph","currentIndex","actions","ligatureActions","components","ligatureList","actionIndex","action","last","ligatureIndex","ligatureGlyphs","componentGlyph","pop","unshift","store","component","ligatureEntry","insertionActionIndex","isBefore","insertions","insertionActions","markedInsertIndex","_insertGlyphs","currentInsertIndex","swap","rangeA","rangeB","reverseA","reverseB","reorderGlyphs","verb","AATLayoutEngine","morxProcessor","isRTL","AATFeatureMap","getSupportedFeatures","ShapingPlan","stages","globalFeatures","allFeatures","stage","arg","global","_addFeatures","_addGlobal","concat","local","add","processor","selectScript","applyFeatures","COMMON_FEATURES","FRACTIONAL_FEATURES","HORIZONTAL_FEATURES","DIRECTIONAL_FEATURES","DefaultShaper","plan","planPreprocessing","planFeatures","planPostprocessing","assignGlobalFeatures","assignFeatures","userFeatures","isDigit","numr","frac","dnom","trie","UnicodeTrie","__dirname","FEATURES","ShapingClasses","ISOL","FINA","FIN2","FIN3","MEDI","MED2","INIT","NONE","STATE_TABLE","ArabicShaper","addStage","prev","state","curAction","prevAction","getShapingClass","Transparent","category","getCategory","Non_Joining","GlyphInfo","every","isLigature","ligatureID","ligatureComponent","cursiveAttachment","markAttachment","HangulShaper","getType","DECOMPOSE","hasGlyphForCodePoint","decompose","COMPOSE","compose","TONE_MARK","INVALID","insertDottedCircle","HANGUL_BASE","HANGUL_END","HANGUL_COUNT","L_BASE","V_BASE","T_BASE","L_COUNT","V_COUNT","T_COUNT","L_END","V_END","T_END","DOTTED_CIRCLE","isL","isV","isT","isTone","isLVT","isLV","isCombiningL","isCombiningV","isCombiningT","X","L","V","T","LV","LVT","M","NO_ACTION","glyphForCodePoint","l","v","ljmo","vjmo","insert","tjmo","prevType","lv","del","getLength","reorderToneMark","advanceWidth","dottedCircle","SHAPERS","choose","shaper","GlyphIterator","reset","ignoreMarks","ignoreBaseGlyphs","ignoreLigatures","shouldIgnore","move","increment","abs","DEFAULT_SCRIPTS","OTProcessor","scriptTag","languageTag","lookups","scriptList","changed","findScript","langugeTag","langSysRecords","lang","langSys","defaultLangSys","featureIndexes","featureIndex","featureList","exclude","lookupListIndexes","lookupIndex","lookupList","sort","a","advances","lookupsForFeatures","applyLookups","glyphIterator","cur","subTables","applyLookup","lookupRecords","lookupRecord","sequenceIndex","lookupListIndex","rangeRecords","startCoverageIndex","sequence","fn","matched","match","coverageIndex","classDef","startGlyph","classValueArray","classID","classRangeRecord","class","getClassID","set","ruleSets","rule","sequenceMatches","input","applyLookupList","classSet","classSequenceMatches","classes","coverageSequenceMatches","coverages","chainRuleSets","backtrack","lookahead","inputClassDef","rules","chainClassSet","backtrackClassDef","lookaheadClassDef","backtrackGlyphCount","backtrackCoverage","inputCoverage","lookaheadCoverage","GSUBProcessor","deltaGlyphID","substitute","sequences","replacement","undefined","USER_INDEX","alternateSet","ligatureSets","ligature","sequenceMatchIndices","curGlyph","characters","ligatureGlyph","lastLigID","lastNumComps","curComps","matchIndex","applyContext","applyChainingContext","GPOSProcessor","peekIndex","xPlacement","yPlacement","applyPositionValue","nextGlyph","peek","pairSets","secondGlyph","value1","value2","class1","classDef1","class2","classDef2","classRecords","nextIndex","curRecord","entryExitRecords","exitAnchor","nextRecord","entryAnchor","getAnchor","exit","d","rightToLeft","markCoverage","baseGlyphIndex","baseIndex","baseCoverage","markRecord","markArray","baseAnchor","baseArray","applyAnchor","ligIndex","ligatureCoverage","ligAttach","ligatureArray","markGlyph","ligGlyph","compIndex","mark1Index","mark1Coverage","prevIndex","good","mark2Index","mark2Coverage","mark1Array","mark2Array","baseCoords","markCoords","markAnchor","basePos","markPos","anchor","xCoordinate","yCoordinate","fixCursiveAttachment","fixMarkAttachment","j","OTLayoutEngine","glyphInfos","Shapers","glyphInfo","LayoutEngine","unicodeLayoutEngine","kernProcessor","engine","glyphsForString","setup","cleanup","positioned","positionGlyphs","getAvailableFeatures","SVG_COMMANDS","Path","commands","_bbox","_cbox","cmds","c","command","args","join","Function","round","cx","cy","pow","p0","p1","p2","p3","qp1x","qp1y","p3x","p3y","cp1x","cp1y","cp2x","cp2y","b2ac","t1","sqrt","t2","prototype","Glyph","_font","path","metrics","metric","advance","bearings","_metrics","_getTableMetrics","leftBearing","bearing","advanceHeight","topBearing","os2","typoAscender","typoDescender","ascent","descent","StandardNames","glyphNameIndex","names","fromCharCode","save","scale","toFunction","fill","restore","_getCBox","_getBBox","_getPath","_getMetrics","_getName","GlyfHeader","ON_CURVE","X_SHORT_VECTOR","Y_SHORT_VECTOR","REPEAT","SAME_X","SAME_Y","ARG_1_AND_2_ARE_WORDS","WE_HAVE_A_SCALE","MORE_COMPONENTS","WE_HAVE_AN_X_AND_Y_SCALE","WE_HAVE_A_TWO_BY_TWO","WE_HAVE_INSTRUCTIONS","Point","onCurve","endContour","Component","dx","dy","xScale","yScale","scale01","scale10","TTFGlyph","internal","_variationProcessor","_getTableStream","xMin","yMin","xMax","yMax","short","same","glyfPos","nextPos","numberOfContours","_decodeSimple","_decodeComposite","points","endPtsOfContours","instructions","numCoords","flag","point","px","_parseGlyphCoord","py","_getPhantomPoints","transformPoints","phantomPoints","haveInstructions","gPos","readInt8","scaleX","scaleY","_decode","contours","_getContours","contour","firstPt","lastPt","curvePt","moveTo","pt","prevPt","lineTo","midX","midY","quadraticCurveTo","closePath","CFFGlyph","getGlyphName","cff","stack","trans","nStems","usedGsubrs","usedSubrs","_usedGsubrs","_usedSubrs","gsubrs","globalSubrIndex","gsubrsBias","bias","privateDict","privateDictForGlyph","subrs","Subrs","subrsBias","parseStems","shift","nominalWidthX","parse","phase","c1x","c1y","c2x","c2y","bezierCurveTo","subr","haveWidth","s1","s2","v1","v2","random","n","c3x","c3y","c4x","c4y","c5x","c5y","c6x","c6y","pts","iterable2","j1","startx","starty","iterable3","k1","b1","SBIXImage","buflen","SBIXGlyph","imageTables","ppem","imageOffsets","img","getImageForSize","image","data","originX","originY","renderOutlines","COLRLayer","color","COLRGlyph","layers","layer","fillColor","red","green","blue","alpha","render","cpal","colr","baseGlyphRecord","rec","baseLayer","g","_getBaseGlyph","firstLayerIndex","numLayers","layerRecords","colorRecords","paletteIndex","TUPLES_SHARE_POINT_NUMBERS","TUPLE_COUNT_MASK","EMBEDDED_TUPLE_COORD","INTERMEDIATE_TUPLE","PRIVATE_POINT_NUMBERS","TUPLE_INDEX_MASK","POINTS_ARE_WORDS","POINT_RUN_COUNT_MASK","DELTAS_ARE_ZERO","DELTAS_ARE_WORDS","DELTA_RUN_COUNT_MASK","GlyphVariationProcessor","coords","normalizedCoords","normalizeCoords","normalized","axis","defaultValue","minValue","maxValue","segment","correspondence","fromCoord","toCoord","glyphPoints","tupleCount","offsetToData","here","sharedPoints","decodePoints","tupleDataSize","tupleIndex","tupleCoords","globalCoordCount","globalCoords","startCoords","endCoords","factor","tupleFactor","nPoints","xDeltas","decodeDeltas","yDeltas","origPoints","hasDelta","interpolateMissingDeltas","Uint16Array","run","runCount","readUInt16","deltas","Int16Array","inPoints","firstPoint","endPoint","firstDelta","curDelta","deltaInterpolate","deltaShift","ref1","ref2","outPoints","iterable","in1","in2","out1","out2","out","ref","deltaX","deltaY","Subset","mapping","includeGlyph","EncodeStream","nextTick","TTFSubset","curOffset","nextOffset","_addGlyph","cloneDeep","indexToLocFormat","CFFSubset","charstrings","getCharString","subsetSubrs","used","used_fds","used_subrs","FontName","strings","subsetCharstrings","Encoding","addString","CIDCount","subsetFontdict","createCIDFontdict","header","TTFFont","toString","variationCoords","_directoryPos","_tables","_glyphs","_decodeDirectory","directory","_getTable","_decodeTable","error","result","_cmapProcessor","_layoutEngine","layout","settings","namedVariations","axisTag","getVariation","lineGap","underlinePosition","underlineThickness","italicAngle","capHeight","xHeight","getCharacterSet","instance","coord","WOFFDirectoryEntry","WOFFDirectory","WOFFFont","compLength","outBuffer","buf","inflate","WOFF2Glyph","_transformedGlyphs","Base128","knownTags","WOFF2DirectoryEntry","Optional","customTag","transformVersion","transformed","WOFF2Directory","WOFF2Font","_dataPos","_decompressed","totalCompressedSize","decompressedSize","transformLength","decompressed","brotli","_decompress","_transformGlyfTable","GlyfTable","nContours","totalPoints","read255UInt16","decodeTriplet","instructionSize","composites","Substream","_buf","WORD_CODE","ONE_MORE_BYTE_CODE2","ONE_MORE_BYTE_CODE1","LOWEST_U_CODE","withSign","baseval","b0","b2","TTCHeader","TrueTypeCollection","readString","fonts","DFontName","DFontData","Ref","Type","maxTypeIndex","TypeList","DFontMap","DFontHeader","DFont","typeList","refList","nameOffset","nameListOffset","sfnt","dataOffset"],"mappings":"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"}